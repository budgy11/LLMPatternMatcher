{"model":"llama3.1","created_at":"2025-07-04T18:36:37.478809891Z","message":{"role":"assistant","content":"Here is a basic example of an e-commerce website with a `forgot-password.php` page that allows users to reset their passwords. This will involve creating several PHP files, including:\n\n*   `config.php`: This file contains the database connection settings and other constants.\n*   `header.php`: This file includes the HTML header for the webpage.\n*   `footer.php`: This file includes the HTML footer for the webpage.\n*   `forgot-password.php`: This is the page that allows users to reset their passwords.\n*   `reset-password.php`: This is the page that processes the password reset request.\n\nHere's how it works:\n\n1.  The user visits the `forgot-password.php` page and enters their email address.\n2.  The script checks if a user with the given email exists in the database.\n3.  If a user exists, an email is sent to them with a link to the `reset-password.php` page. This link includes a unique token that can be used to reset the password.\n4.  When the user visits the `reset-password.php` page, they enter their new password and confirm it.\n5.  The script checks if the token matches the one sent in the email.\n6.  If everything is correct, the password is updated.\n\nPlease note that this example assumes you have already set up a MySQL database with the necessary tables (e.g., `users`) and fields (e.g., `email`, `password`).\n\nHere's the code:\n\n**config.php**\n\n```php\n\u003c?php\n\n// Database connection settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Error reporting level\nerror_reporting(E_ALL);\nini_set('display_errors', 1);\n\n?\u003e\n```\n\n**header.php**\n\n```php\n\u003c?php\n\n// Include the config file\nrequire_once 'config.php';\n\n?\u003e\n\n\u003c!DOCTYPE html\u003e\n\u003chtml\u003e\n\u003chead\u003e\n    \u003ctitle\u003eForgot Password\u003c/title\u003e\n    \u003clink rel=\"stylesheet\" href=\"styles.css\"\u003e\n\u003c/head\u003e\n\n\u003cbody\u003e\n    \u003c!-- Header content goes here --\u003e\n    \u003c?php include 'navbar.php'; ?\u003e\n```\n\n**footer.php**\n\n```php\n\u003c?php\n\n// Include the config file\nrequire_once 'config.php';\n\n?\u003e\n\n\u003c!-- Footer content goes here --\u003e\n\u003c?php include 'footer.php'; ?\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n```\n\n**forgot-password.php**\n\n```php\n\u003c?php\n\n// Include the header and config files\ninclude 'header.php';\nrequire_once 'config.php';\n\nif (isset($_POST['email'])) {\n    // Check if user exists in database\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    \n    if ($conn-\u003econnect_error) {\n        die(\"Connection failed: \" . $conn-\u003econnect_error);\n    }\n    \n    $email = $_POST['email'];\n    $query = \"SELECT * FROM users WHERE email='\" . $email . \"'\";\n    \n    $result = $conn-\u003equery($query);\n    \n    if ($result-\u003enum_rows \u003e 0) {\n        // If user exists, generate a token and send it to their email\n        $token = bin2hex(random_bytes(32));\n        \n        // Send the email\n        $subject = \"Reset your password\";\n        $message = \"\n            \u003chtml\u003e\n                \u003cbody\u003e\n                    \u003cp\u003eClick on this link to reset your password:\u003c/p\u003e\n                    \u003cp\u003e\u003ca href='reset-password.php?token=$token'\u003eReset Password\u003c/a\u003e\u003c/p\u003e\n                \u003c/body\u003e\n            \u003c/html\u003e\";\n        \n        $to = $email;\n        $from = 'your_email@example.com';\n        $headers = \"From: \" . $from;\n        mail($to, $subject, $message, $headers);\n        \n        // Store the token in a session\n        $_SESSION['token'] = $token;\n    }\n    \n    $conn-\u003eclose();\n}\n\n?\u003e\n\n\u003c!-- Display form to enter email address --\u003e\n\u003cform method=\"post\" action=\"\u003c?php echo $_SERVER['PHP_SELF']; ?\u003e\"\u003e\n    \u003clabel for=\"email\"\u003eEmail:\u003c/label\u003e\n    \u003cinput type=\"text\" id=\"email\" name=\"email\" required\u003e\u003cbr\u003e\u003cbr\u003e\n    \u003cbutton type=\"submit\"\u003eSubmit\u003c/button\u003e\n\u003c/form\u003e\n\n\u003c?php include 'footer.php'; ?\u003e\n```\n\n**reset-password.php**\n\n```php\n\u003c?php\n\n// Include the header and config files\ninclude 'header.php';\nrequire_once 'config.php';\n\nif (isset($_GET['token'])) {\n    // Check if token matches session token\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    \n    if ($conn-\u003econnect_error) {\n        die(\"Connection failed: \" . $conn-\u003econnect_error);\n    }\n    \n    $token = $_GET['token'];\n    \n    if (isset($_SESSION['token']) \u0026\u0026 $_SESSION['token'] == $token) {\n        \n        // Check if user exists\n        $email = $_POST['email'];\n        $query = \"SELECT * FROM users WHERE email='\" . $email . \"'\";\n        \n        $result = $conn-\u003equery($query);\n        \n        if ($result-\u003enum_rows \u003e 0) {\n            // Update password\n            $new_password = $_POST['password'];\n            $confirm_password = $_POST['confirm_password'];\n            \n            if ($new_password == $confirm_password) {\n                $hash = password_hash($new_password, PASSWORD_DEFAULT);\n                \n                // Update the user's password in the database\n                $query = \"UPDATE users SET password='\" . $hash . \"' WHERE email='\" . $email . \"'\";\n                \n                $conn-\u003equery($query);\n                \n                echo \"\u003cp\u003ePassword updated successfully!\u003c/p\u003e\";\n            } else {\n                echo \"\u003cp\u003ePasswords don't match.\u003c/p\u003e\";\n            }\n        } else {\n            echo \"\u003cp\u003eUser not found.\u003c/p\u003e\";\n        }\n    } else {\n        echo \"\u003cp\u003eInvalid token.\u003c/p\u003e\";\n    }\n    \n    $conn-\u003eclose();\n}\n\n?\u003e\n\n\u003c!-- Display form to enter new password and confirm it --\u003e\n\u003cform method=\"post\" action=\"\u003c?php echo $_SERVER['PHP_SELF']; ?\u003e\"\u003e\n    \u003clabel for=\"email\"\u003eEmail:\u003c/label\u003e\n    \u003cinput type=\"text\" id=\"email\" name=\"email\" required\u003e\u003cbr\u003e\u003cbr\u003e\n    \u003clabel for=\"password\"\u003eNew Password:\u003c/label\u003e\n    \u003cinput type=\"password\" id=\"password\" name=\"password\" required\u003e\u003cbr\u003e\u003cbr\u003e\n    \u003clabel for=\"confirm_password\"\u003eConfirm New Password:\u003c/label\u003e\n    \u003cinput type=\"password\" id=\"confirm_password\" name=\"confirm_password\" required\u003e\u003cbr\u003e\u003cbr\u003e\n    \u003cbutton type=\"submit\"\u003eSubmit\u003c/button\u003e\n\u003c/form\u003e\n\n\u003c?php include 'footer.php'; ?\u003e\n```\n\n**Note:** You will need to create the necessary tables in your MySQL database, including a `users` table with columns for `email`, `password` (hashed), and any other relevant fields. \n\nThis is just a basic example and may require modifications to fit your specific needs. Additionally, it's always a good idea to include proper error handling, validation, and security measures in your code.\n\nThis will allow users to reset their passwords by entering their email address on the `forgot-password.php` page, and then clicking on a link sent to their email with a unique token that can be used to update their password."},"done_reason":"stop","done":true,"total_duration":14160274458,"load_duration":10037070,"prompt_eval_count":40,"prompt_eval_duration":4219512,"eval_count":1523,"eval_duration":14145547444}