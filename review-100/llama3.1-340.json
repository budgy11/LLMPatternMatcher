{"prompt": "Create a user review function using php", "llm_output": "Here is an example of a user review function in PHP:\n\n**database.php**\n```php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'reviews_db';\n$username = 'root';\n$password = '';\n\n// Connect to database\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n\nfunction getReviews() {\n  global $conn;\n  \n  // Get reviews from database\n  $stmt = $conn->prepare('SELECT * FROM reviews');\n  $stmt->execute();\n  \n  return $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n```\n\n**review.php**\n```php\n// Function to add a new review\nfunction addReview($name, $rating, $comment) {\n  global $conn;\n  \n  // Insert review into database\n  $stmt = $conn->prepare('INSERT INTO reviews (name, rating, comment) VALUES (:name, :rating, :comment)');\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':rating', $rating);\n  $stmt->bindParam(':comment', $comment);\n  \n  return $stmt->execute();\n}\n\n// Function to update an existing review\nfunction updateReview($id, $name, $rating, $comment) {\n  global $conn;\n  \n  // Update review in database\n  $stmt = $conn->prepare('UPDATE reviews SET name = :name, rating = :rating, comment = :comment WHERE id = :id');\n  $stmt->bindParam(':id', $id);\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':rating', $rating);\n  $stmt->bindParam(':comment', $comment);\n  \n  return $stmt->execute();\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n  global $conn;\n  \n  // Delete review from database\n  $stmt = $conn->prepare('DELETE FROM reviews WHERE id = :id');\n  $stmt->bindParam(':id', $id);\n  \n  return $stmt->execute();\n}\n```\n\n**index.php**\n```php\n<?php\nrequire_once 'database.php';\nrequire_once 'review.php';\n\n// Get all reviews from database\n$reviews = getReviews();\n\n// Display reviews on page\nforeach ($reviews as $review) {\n  echo '<h2>' . $review['name'] . '</h2>';\n  echo '<p>Rating: ' . $review['rating'] . '/5</p>';\n  echo '<p>Comment: ' . $review['comment'] . '</p>';\n}\n\n// Form to add new review\necho '<form action=\"\" method=\"post\">';\necho '<input type=\"text\" name=\"name\" placeholder=\"Name\">';\necho '<select name=\"rating\">';\necho '<option value=\"1\">1</option>';\necho '<option value=\"2\">2</option>';\necho '<option value=\"3\">3</option>';\necho '<option value=\"4\">4</option>';\necho '<option value=\"5\">5</option>';\necho '</select>';\necho '<textarea name=\"comment\"></textarea>';\necho '<button type=\"submit\" name=\"add_review\">Add Review</button>';\necho '</form>';\n\n// Handle form submission\nif (isset($_POST['add_review'])) {\n  $name = $_POST['name'];\n  $rating = $_POST['rating'];\n  $comment = $_POST['comment'];\n  \n  // Add review to database\n  addReview($name, $rating, $comment);\n}\n?>\n```\n\nThis code sets up a basic user review system with the following features:\n\n*   A database connection is established in `database.php`.\n*   The `addReview()` function allows users to submit new reviews.\n*   The `updateReview()` and `deleteReview()` functions allow administrators to modify or delete existing reviews.\n*   In `index.php`, all reviews are retrieved from the database and displayed on the page. A form is provided for users to add new reviews.\n\nPlease note that this code assumes a MySQL database with a table named \"reviews\" having columns for name, rating, and comment. You will need to modify the database settings in `database.php` to match your own database configuration.\n\nAlso, remember to sanitize any user input data to prevent SQL injection attacks. This example does not include error handling or security measures for brevity.", "code_blocks": ["```php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'reviews_db';\n$username = 'root';\n$password = '';\n\n// Connect to database\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n\nfunction getReviews() {\n  global $conn;\n  \n  // Get reviews from database\n  $stmt = $conn->prepare('SELECT * FROM reviews');\n  $stmt->execute();\n  \n  return $stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n```", "```php\n// Function to add a new review\nfunction addReview($name, $rating, $comment) {\n  global $conn;\n  \n  // Insert review into database\n  $stmt = $conn->prepare('INSERT INTO reviews (name, rating, comment) VALUES (:name, :rating, :comment)');\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':rating', $rating);\n  $stmt->bindParam(':comment', $comment);\n  \n  return $stmt->execute();\n}\n\n// Function to update an existing review\nfunction updateReview($id, $name, $rating, $comment) {\n  global $conn;\n  \n  // Update review in database\n  $stmt = $conn->prepare('UPDATE reviews SET name = :name, rating = :rating, comment = :comment WHERE id = :id');\n  $stmt->bindParam(':id', $id);\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':rating', $rating);\n  $stmt->bindParam(':comment', $comment);\n  \n  return $stmt->execute();\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n  global $conn;\n  \n  // Delete review from database\n  $stmt = $conn->prepare('DELETE FROM reviews WHERE id = :id');\n  $stmt->bindParam(':id', $id);\n  \n  return $stmt->execute();\n}\n```", "```php\n<?php\nrequire_once 'database.php';\nrequire_once 'review.php';\n\n// Get all reviews from database\n$reviews = getReviews();\n\n// Display reviews on page\nforeach ($reviews as $review) {\n  echo '<h2>' . $review['name'] . '</h2>';\n  echo '<p>Rating: ' . $review['rating'] . '/5</p>';\n  echo '<p>Comment: ' . $review['comment'] . '</p>';\n}\n\n// Form to add new review\necho '<form action=\"\" method=\"post\">';\necho '<input type=\"text\" name=\"name\" placeholder=\"Name\">';\necho '<select name=\"rating\">';\necho '<option value=\"1\">1</option>';\necho '<option value=\"2\">2</option>';\necho '<option value=\"3\">3</option>';\necho '<option value=\"4\">4</option>';\necho '<option value=\"5\">5</option>';\necho '</select>';\necho '<textarea name=\"comment\"></textarea>';\necho '<button type=\"submit\" name=\"add_review\">Add Review</button>';\necho '</form>';\n\n// Handle form submission\nif (isset($_POST['add_review'])) {\n  $name = $_POST['name'];\n  $rating = $_POST['rating'];\n  $comment = $_POST['comment'];\n  \n  // Add review to database\n  addReview($name, $rating, $comment);\n}\n?>\n```"]}
