{"prompt": "Create a user review function using php", "llm_output": "Here is an example of a simple user review function in PHP:\n\n**review.php**\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'reviews_db';\n$user = 'root';\n$password = '';\n\n// Connect to database\n$conn = new mysqli($host, $user, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction add_review($product_id, $rating, $comment) {\n    // Add review to database\n    $sql = \"INSERT INTO reviews (product_id, rating, comment, created_at)\n            VALUES ('$product_id', '$rating', '$comment', NOW())\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review added successfully!\";\n    } else {\n        echo \"Error adding review: \" . $conn->error;\n    }\n}\n\nfunction get_reviews($product_id) {\n    // Retrieve reviews from database\n    $sql = \"SELECT * FROM reviews WHERE product_id = '$product_id'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        while($row = $result->fetch_assoc()) {\n            echo \"<p>Rating: $row[rating]</p>\";\n            echo \"<p>Comment: $row[comment]</p>\";\n            echo \"<hr>\";\n        }\n    } else {\n        echo \"No reviews found for this product.\";\n    }\n}\n\nfunction update_review($review_id, $rating, $comment) {\n    // Update review in database\n    $sql = \"UPDATE reviews SET rating = '$rating', comment = '$comment' WHERE id = '$review_id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review updated successfully!\";\n    } else {\n        echo \"Error updating review: \" . $conn->error;\n    }\n}\n\nfunction delete_review($review_id) {\n    // Delete review from database\n    $sql = \"DELETE FROM reviews WHERE id = '$review_id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review deleted successfully!\";\n    } else {\n        echo \"Error deleting review: \" . $conn->error;\n    }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```\nThis script provides four functions:\n\n* `add_review()`: Adds a new review to the database.\n* `get_reviews()`: Retrieves all reviews for a specific product from the database.\n* `update_review()`: Updates an existing review in the database.\n* `delete_review()`: Deletes a review from the database.\n\n**Example usage:**\n\nTo add a new review, use:\n```php\nadd_review(1, 5, \"Great product!\");\n```\nTo retrieve all reviews for a specific product, use:\n```php\nget_reviews(1);\n```\nTo update an existing review, use:\n```php\n\nupdate_review(1, 4, \"Good product, but... \");\n```\nTo delete a review, use:\n```php\n\ndelete_review(1);\n```\nNote: This script uses a simple MySQL database connection and assumes that the `reviews` table has the following structure:\n\n| Column Name | Data Type | Description |\n| --- | --- | --- |\n| id | int | Unique identifier for each review |\n| product_id | int | Foreign key referencing the products table |\n| rating | int | Rating given by user (1-5) |\n| comment | text | User's comment about the product |\n| created_at | timestamp | Timestamp when review was added |\n\nYou will need to modify this script to fit your specific database schema and requirements.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'reviews_db';\n$user = 'root';\n$password = '';\n\n// Connect to database\n$conn = new mysqli($host, $user, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction add_review($product_id, $rating, $comment) {\n    // Add review to database\n    $sql = \"INSERT INTO reviews (product_id, rating, comment, created_at)\n            VALUES ('$product_id', '$rating', '$comment', NOW())\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review added successfully!\";\n    } else {\n        echo \"Error adding review: \" . $conn->error;\n    }\n}\n\nfunction get_reviews($product_id) {\n    // Retrieve reviews from database\n    $sql = \"SELECT * FROM reviews WHERE product_id = '$product_id'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        while($row = $result->fetch_assoc()) {\n            echo \"<p>Rating: $row[rating]</p>\";\n            echo \"<p>Comment: $row[comment]</p>\";\n            echo \"<hr>\";\n        }\n    } else {\n        echo \"No reviews found for this product.\";\n    }\n}\n\nfunction update_review($review_id, $rating, $comment) {\n    // Update review in database\n    $sql = \"UPDATE reviews SET rating = '$rating', comment = '$comment' WHERE id = '$review_id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review updated successfully!\";\n    } else {\n        echo \"Error updating review: \" . $conn->error;\n    }\n}\n\nfunction delete_review($review_id) {\n    // Delete review from database\n    $sql = \"DELETE FROM reviews WHERE id = '$review_id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review deleted successfully!\";\n    } else {\n        echo \"Error deleting review: \" . $conn->error;\n    }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```", "```php\nadd_review(1, 5, \"Great product!\");\n```", "```php\nget_reviews(1);\n```", "```php\n\nupdate_review(1, 4, \"Good product, but... \");\n```", "```php\n\ndelete_review(1);\n```"]}
