{"prompt": "Create a user review function using php", "llm_output": "**User Review Function in PHP**\n=====================================\n\nBelow is an example of a basic user review function implemented in PHP. This script will allow users to create reviews, display all reviews, and edit/delete their own reviews.\n\n**Database Schema**\n-------------------\n\nFor this example, we'll assume the following database schema:\n\n```sql\nCREATE TABLE reviews (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  user_id INT,\n  review_text TEXT,\n  rating TINYINT(1),\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n**User Review Function**\n-----------------------\n\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$db_name = 'reviews_db';\n$user = 'your_username';\n$password = 'your_password';\n\n// Connect to database\n$conn = new mysqli($host, $user, $password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction displayReviews() {\n  global $conn;\n  \n  // Retrieve reviews from database\n  $query = \"SELECT * FROM reviews\";\n  $result = $conn->query($query);\n  \n  if (!$result) {\n    echo \"Error retrieving reviews.\";\n  } else {\n    while ($row = $result->fetch_assoc()) {\n      echo \"<p>User ID: \" . $row['user_id'] . \"</p>\";\n      echo \"<p>Review Text: \" . $row['review_text'] . \"</p>\";\n      echo \"<p>Rating: \" . $row['rating'] . \"/5</p>\";\n      echo \"<p>Created At: \" . $row['created_at'] . \"</p><hr>\";\n    }\n  }\n}\n\nfunction createReview($user_id, $review_text, $rating) {\n  global $conn;\n  \n  // Insert review into database\n  $query = \"INSERT INTO reviews (user_id, review_text, rating) VALUES (?, ?, ?)\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"iss\", $user_id, $review_text, $rating);\n  \n  if ($stmt->execute()) {\n    echo \"Review created successfully.\";\n  } else {\n    echo \"Error creating review.\";\n  }\n}\n\nfunction editReview($id, $new_review_text) {\n  global $conn;\n  \n  // Update review in database\n  $query = \"UPDATE reviews SET review_text = ? WHERE id = ?\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"si\", $new_review_text, $id);\n  \n  if ($stmt->execute()) {\n    echo \"Review updated successfully.\";\n  } else {\n    echo \"Error updating review.\";\n  }\n}\n\nfunction deleteReview($id) {\n  global $conn;\n  \n  // Delete review from database\n  $query = \"DELETE FROM reviews WHERE id = ?\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"i\", $id);\n  \n  if ($stmt->execute()) {\n    echo \"Review deleted successfully.\";\n  } else {\n    echo \"Error deleting review.\";\n  }\n}\n\n?>\n```\n\n**Example Usage**\n-----------------\n\nTo use this script, simply include it in your PHP file and call the functions accordingly:\n\n```php\n<?php\ninclude 'user_review_function.php';\n\n// Create a new review\ncreateReview(1, \"This is my review\", 4);\n\n// Display all reviews\ndisplayReviews();\n\n// Edit an existing review\neditReview(1, \"Updated review text\");\n\n// Delete a review\ndeleteReview(2);\n?>\n```\n\n**Remember to replace the database connection settings with your actual credentials.**\n\nNote: This script uses prepared statements and parameterized queries to prevent SQL injection attacks.", "code_blocks": [null, "```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$db_name = 'reviews_db';\n$user = 'your_username';\n$password = 'your_password';\n\n// Connect to database\n$conn = new mysqli($host, $user, $password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction displayReviews() {\n  global $conn;\n  \n  // Retrieve reviews from database\n  $query = \"SELECT * FROM reviews\";\n  $result = $conn->query($query);\n  \n  if (!$result) {\n    echo \"Error retrieving reviews.\";\n  } else {\n    while ($row = $result->fetch_assoc()) {\n      echo \"<p>User ID: \" . $row['user_id'] . \"</p>\";\n      echo \"<p>Review Text: \" . $row['review_text'] . \"</p>\";\n      echo \"<p>Rating: \" . $row['rating'] . \"/5</p>\";\n      echo \"<p>Created At: \" . $row['created_at'] . \"</p><hr>\";\n    }\n  }\n}\n\nfunction createReview($user_id, $review_text, $rating) {\n  global $conn;\n  \n  // Insert review into database\n  $query = \"INSERT INTO reviews (user_id, review_text, rating) VALUES (?, ?, ?)\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"iss\", $user_id, $review_text, $rating);\n  \n  if ($stmt->execute()) {\n    echo \"Review created successfully.\";\n  } else {\n    echo \"Error creating review.\";\n  }\n}\n\nfunction editReview($id, $new_review_text) {\n  global $conn;\n  \n  // Update review in database\n  $query = \"UPDATE reviews SET review_text = ? WHERE id = ?\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"si\", $new_review_text, $id);\n  \n  if ($stmt->execute()) {\n    echo \"Review updated successfully.\";\n  } else {\n    echo \"Error updating review.\";\n  }\n}\n\nfunction deleteReview($id) {\n  global $conn;\n  \n  // Delete review from database\n  $query = \"DELETE FROM reviews WHERE id = ?\";\n  $stmt = $conn->prepare($query);\n  $stmt->bind_param(\"i\", $id);\n  \n  if ($stmt->execute()) {\n    echo \"Review deleted successfully.\";\n  } else {\n    echo \"Error deleting review.\";\n  }\n}\n\n?>\n```", "```php\n<?php\ninclude 'user_review_function.php';\n\n// Create a new review\ncreateReview(1, \"This is my review\", 4);\n\n// Display all reviews\ndisplayReviews();\n\n// Edit an existing review\neditReview(1, \"Updated review text\");\n\n// Delete a review\ndeleteReview(2);\n?>\n```"]}
