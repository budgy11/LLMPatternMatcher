{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a basic user registration function in PHP:\n\n**`register.php`**\n```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'users_database');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Function to register a user\nfunction registerUser($name, $email, $password, $confirm_password) {\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password) || empty($confirm_password)) {\n        return array('error' => 'Please fill in all fields.');\n    }\n\n    if ($password != $confirm_password) {\n        return array('error' => 'Passwords do not match.');\n    }\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert user data into database\n    $sql = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($sql);\n    $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n    $result = $stmt->execute();\n\n    if ($result) {\n        return array('success' => 'User registered successfully.');\n    } else {\n        return array('error' => 'Error registering user.');\n    }\n}\n\n// Handle form submission\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get form data\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n\n    // Register user\n    $response = registerUser($name, $email, $password, $confirm_password);\n\n    if ($response['error']) {\n        echo '<p style=\"color: red;\">' . $response['error'] . '</p>';\n    } elseif ($response['success']) {\n        echo '<p style=\"color: green;\">' . $response['success'] . '</p>';\n    }\n}\n\n?>\n```\n**Explanation**\n\n1. The script connects to a MySQL database using the `mysqli` extension.\n2. The `registerUser` function takes four arguments: `$name`, `$email`, `$password`, and `$confirm_password`.\n3. The function validates the input data by checking if all fields are filled in and if the passwords match.\n4. If the validation passes, the function hashes the password using the `password_hash` function and inserts the user data into the database using a prepared statement.\n5. The script checks for form submission and gets the form data using `$_POST`.\n6. It then calls the `registerUser` function with the form data and displays an error or success message based on the response.\n\n**Example use case**\n\nCreate a HTML form that submits to this PHP script:\n```html\n<form action=\"register.php\" method=\"post\">\n    <label for=\"name\">Name:</label>\n    <input type=\"text\" id=\"name\" name=\"name\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <label for=\"confirm_password\">Confirm Password:</label>\n    <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```\nWhen the form is submitted, it will call the `registerUser` function and display an error or success message based on the response.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'users_database');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Function to register a user\nfunction registerUser($name, $email, $password, $confirm_password) {\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password) || empty($confirm_password)) {\n        return array('error' => 'Please fill in all fields.');\n    }\n\n    if ($password != $confirm_password) {\n        return array('error' => 'Passwords do not match.');\n    }\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert user data into database\n    $sql = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($sql);\n    $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n    $result = $stmt->execute();\n\n    if ($result) {\n        return array('success' => 'User registered successfully.');\n    } else {\n        return array('error' => 'Error registering user.');\n    }\n}\n\n// Handle form submission\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get form data\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n\n    // Register user\n    $response = registerUser($name, $email, $password, $confirm_password);\n\n    if ($response['error']) {\n        echo '<p style=\"color: red;\">' . $response['error'] . '</p>';\n    } elseif ($response['success']) {\n        echo '<p style=\"color: green;\">' . $response['success'] . '</p>';\n    }\n}\n\n?>\n```", null]}
