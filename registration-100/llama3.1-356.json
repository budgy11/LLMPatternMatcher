{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a basic user registration function in PHP:\n\n**`register.php`**\n```php\n<?php\n\n// Configuration\n$required_fields = array('username', 'email', 'password');\n$db_host = 'localhost';\n$db_username = 'your_database_username';\n$db_password = 'your_database_password';\n$db_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction register_user() {\n    global $required_fields;\n    global $conn;\n\n    // Get form data\n    if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate input fields\n        foreach ($required_fields as $field) {\n            if (empty($$field)) {\n                echo 'Error: Please fill in all required fields.';\n                return false;\n            }\n        }\n\n        // Check for duplicate username and email\n        $query = \"SELECT * FROM users WHERE username='$username' OR email='$email'\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            echo 'Error: Username or Email already exists.';\n            return false;\n        }\n\n        // Hash password\n        $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n        // Insert new user into database\n        $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n        if ($conn->query($query)) {\n            echo 'User registered successfully!';\n            return true;\n        } else {\n            echo 'Error: Registration failed.';\n            return false;\n        }\n    }\n\n    // Form not submitted\n    $page_content = '\n    <h1>Register</h1>\n    <form method=\"post\">\n        <label>Username:</label><br />\n        <input type=\"text\" name=\"username\"><br /><br />\n        <label>Email:</label><br />\n        <input type=\"email\" name=\"email\"><br /><br />\n        <label>Password:</label><br />\n        <input type=\"password\" name=\"password\"><br /><br />\n        <input type=\"submit\" value=\"Register\">\n    </form>\n    ';\n}\n\n// Call the register_user function\nregister_user();\n\n?>\n```\n**How it works:**\n\n1. The script first checks if a form has been submitted using `$_SERVER[\"REQUEST_METHOD\"] == \"POST\"`.\n2. If the form is submitted, it retrieves the input values for username, email, and password.\n3. It validates the required fields by checking if they're empty.\n4. It checks for duplicate usernames and emails in the database using a SQL query.\n5. If no duplicates are found, it hashes the password using `password_hash()` and inserts the new user into the database using another SQL query.\n\n**Example use case:**\n\n1. Save this code as `register.php`.\n2. Open your web browser and navigate to `http://localhost/register.php` (assuming you're running a local server like XAMPP or MAMP).\n3. Fill out the form with a username, email, and password.\n4. Submit the form.\n5. If everything goes smoothly, you should see \"User registered successfully!\" displayed on the page.\n\n**Note:** Make sure to replace the placeholders for your database credentials (`$db_username`, `$db_password`, etc.) with your actual database login information. Also, this is a very basic example and doesn't include any security measures like CSRF protection or password strength checking. You should consider adding these features in a production environment.", "code_blocks": ["```php\n<?php\n\n// Configuration\n$required_fields = array('username', 'email', 'password');\n$db_host = 'localhost';\n$db_username = 'your_database_username';\n$db_password = 'your_database_password';\n$db_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction register_user() {\n    global $required_fields;\n    global $conn;\n\n    // Get form data\n    if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate input fields\n        foreach ($required_fields as $field) {\n            if (empty($$field)) {\n                echo 'Error: Please fill in all required fields.';\n                return false;\n            }\n        }\n\n        // Check for duplicate username and email\n        $query = \"SELECT * FROM users WHERE username='$username' OR email='$email'\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            echo 'Error: Username or Email already exists.';\n            return false;\n        }\n\n        // Hash password\n        $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n        // Insert new user into database\n        $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n        if ($conn->query($query)) {\n            echo 'User registered successfully!';\n            return true;\n        } else {\n            echo 'Error: Registration failed.';\n            return false;\n        }\n    }\n\n    // Form not submitted\n    $page_content = '\n    <h1>Register</h1>\n    <form method=\"post\">\n        <label>Username:</label><br />\n        <input type=\"text\" name=\"username\"><br /><br />\n        <label>Email:</label><br />\n        <input type=\"email\" name=\"email\"><br /><br />\n        <label>Password:</label><br />\n        <input type=\"password\" name=\"password\"><br /><br />\n        <input type=\"submit\" value=\"Register\">\n    </form>\n    ';\n}\n\n// Call the register_user function\nregister_user();\n\n?>\n```"]}
