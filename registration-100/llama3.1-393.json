{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a simple user registration function in PHP. This function uses prepared statements to prevent SQL injection attacks.\n\n**Code**\n--------\n\n```php\nfunction register_user($db, $username, $email, $password) {\n  // Hash password using SHA-256\n  $hashed_password = hash('sha256', $password);\n\n  // Prepare INSERT statement\n  $query = \"INSERT INTO users (username, email, password)\n            VALUES (?, ?, ?)\";\n\n  try {\n    // Execute query with prepared statement\n    $stmt = $db->prepare($query);\n    $stmt->execute([$username, $email, $hashed_password]);\n\n    // Return last inserted ID if successful\n    return $db->lastInsertId();\n  } catch (PDOException $e) {\n    // Handle errors and rethrow exception\n    echo \"Error registering user: \" . $e->getMessage() . \"\\n\";\n    throw new Exception($e);\n  }\n}\n```\n\n**Example Usage**\n-----------------\n\n```php\n$db = new PDO('mysql:host=localhost;dbname=database', 'username', 'password');\n\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\nif (register_user($db, $username, $email, $password)) {\n  echo \"User registered successfully!\";\n} else {\n  echo \"Error registering user.\";\n}\n```\n\n**Security Notes**\n-----------------\n\n*   This example uses SHA-256 to hash the password. Note that while hashing is a good practice, it's recommended to use a library like `bcrypt` or `argon2i` for secure password storage.\n*   Never store plaintext passwords in your database.\n*   Always validate and sanitize user input data.\n\n**SQL Schema**\n--------------\n\n```sql\nCREATE TABLE users (\n  id INTEGER PRIMARY KEY,\n  username VARCHAR(255) NOT NULL UNIQUE,\n  email VARCHAR(255) NOT NULL UNIQUE,\n  password VARCHAR(255) NOT NULL\n);\n```\n\nRemember to replace placeholders (`$db`, `$username`, etc.) with actual values in your application.", "code_blocks": ["```php\nfunction register_user($db, $username, $email, $password) {\n  // Hash password using SHA-256\n  $hashed_password = hash('sha256', $password);\n\n  // Prepare INSERT statement\n  $query = \"INSERT INTO users (username, email, password)\n            VALUES (?, ?, ?)\";\n\n  try {\n    // Execute query with prepared statement\n    $stmt = $db->prepare($query);\n    $stmt->execute([$username, $email, $hashed_password]);\n\n    // Return last inserted ID if successful\n    return $db->lastInsertId();\n  } catch (PDOException $e) {\n    // Handle errors and rethrow exception\n    echo \"Error registering user: \" . $e->getMessage() . \"\\n\";\n    throw new Exception($e);\n  }\n}\n```", "```php\n$db = new PDO('mysql:host=localhost;dbname=database', 'username', 'password');\n\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\nif (register_user($db, $username, $email, $password)) {\n  echo \"User registered successfully!\";\n} else {\n  echo \"Error registering user.\";\n}\n```", null]}
