{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a user registration function written in PHP. This function will handle user input, validate data, and store the new user in a database.\n\n### Database Schema\n\nFor this example, we'll assume you have a MySQL database with a `users` table that has the following columns:\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n```\n\n### User Registration Function\n\n```php\nfunction registerUser($username, $email, $password) {\n  // Validate user input\n  if (empty($username) || empty($email) || empty($password)) {\n    throw new Exception('All fields are required');\n  }\n\n  if (!preg_match('/^[a-zA-Z0-9]+$/', $username)) {\n    throw new Exception('Invalid username. Only letters and numbers allowed');\n  }\n\n  if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    throw new Exception('Invalid email address');\n  }\n\n  // Hash password\n  $password = hash('sha256', $password);\n\n  try {\n    // Connect to database\n    $dbConnection = mysqli_connect('localhost', 'username', 'password', 'database');\n\n    if (!$dbConnection) {\n      throw new Exception('Failed to connect to database');\n    }\n\n    // Insert user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$password')\";\n    mysqli_query($dbConnection, $query);\n\n    // Close database connection\n    mysqli_close($dbConnection);\n\n    return true;\n  } catch (Exception $e) {\n    throw new Exception('Failed to register user: ' . $e->getMessage());\n  }\n}\n```\n\n### Example Usage\n\n```php\ntry {\n  $registered = registerUser('johnDoe', 'john.doe@example.com', 'password123');\n  if ($registered) {\n    echo \"User registered successfully!\";\n  } else {\n    throw new Exception('Failed to register user');\n  }\n} catch (Exception $e) {\n  echo \"Error registering user: \" . $e->getMessage();\n}\n```\n\n### Notes\n\n* Make sure to replace the placeholders in the database connection and SQL query with your actual database credentials.\n* This function uses a simple hash for password storage. In production, consider using a more secure password hashing algorithm like bcrypt or Argon2.\n* Always validate user input to prevent SQL injection and other security vulnerabilities.\n\nI hope this example helps! Let me know if you have any questions or need further assistance.", "code_blocks": [null, "```php\nfunction registerUser($username, $email, $password) {\n  // Validate user input\n  if (empty($username) || empty($email) || empty($password)) {\n    throw new Exception('All fields are required');\n  }\n\n  if (!preg_match('/^[a-zA-Z0-9]+$/', $username)) {\n    throw new Exception('Invalid username. Only letters and numbers allowed');\n  }\n\n  if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    throw new Exception('Invalid email address');\n  }\n\n  // Hash password\n  $password = hash('sha256', $password);\n\n  try {\n    // Connect to database\n    $dbConnection = mysqli_connect('localhost', 'username', 'password', 'database');\n\n    if (!$dbConnection) {\n      throw new Exception('Failed to connect to database');\n    }\n\n    // Insert user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$password')\";\n    mysqli_query($dbConnection, $query);\n\n    // Close database connection\n    mysqli_close($dbConnection);\n\n    return true;\n  } catch (Exception $e) {\n    throw new Exception('Failed to register user: ' . $e->getMessage());\n  }\n}\n```", "```php\ntry {\n  $registered = registerUser('johnDoe', 'john.doe@example.com', 'password123');\n  if ($registered) {\n    echo \"User registered successfully!\";\n  } else {\n    throw new Exception('Failed to register user');\n  }\n} catch (Exception $e) {\n  echo \"Error registering user: \" . $e->getMessage();\n}\n```"]}
