{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a basic user registration function written in PHP. This function will handle the creation of a new user account, hashing their password, and storing it in a database.\n\n### `config.php` (Database Configuration)\n\n```php\n<?php\n// Database configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n?>\n```\n\n### `userregistration.php` (Registration Function)\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Registration form data\nfunction registerUser() {\n    // Get user input from the registration form\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n\n    // Validate user input\n    if (!isset($username) || !isset($email) || !isset($password) || !isset($confirm_password)) {\n        die(\"Invalid input\");\n    }\n\n    // Check for required fields\n    if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n        return array('error' => 'Please fill in all required fields');\n    }\n\n    // Password validation\n    if (strlen($password) < 8) {\n        return array('error' => 'Password must be at least 8 characters long');\n    }\n    if ($password !== $confirm_password) {\n        return array('error' => 'Passwords do not match');\n    }\n\n    // Hash the password\n    $hashed_password = hash('sha256', $password);\n\n    // Insert new user into the database\n    $query = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($query);\n    $stmt->bind_param(\"sss\", $username, $email, $hashed_password);\n    if (!$stmt->execute()) {\n        die(\"Error: \" . $mysqli->error);\n    }\n\n    return array('success' => 'User created successfully');\n}\n\n// Handle POST request\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $result = registerUser();\n    echo json_encode($result);\n}\n?>\n```\n\n### `index.php` (Registration Form)\n\n```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>User Registration</title>\n</head>\n<body>\n\n<!-- Registration form -->\n<form id=\"register-form\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <label for=\"confirm_password\">Confirm Password:</label>\n    <input type=\"password\" name=\"confirm_password\"><br><br>\n    <button type=\"submit\">Register</button>\n</form>\n\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n<script>\n    $(document).ready(function() {\n        $('#register-form').submit(function(e) {\n            e.preventDefault();\n            var data = { username: $('input[name=username]').val(), email: $('input[name=email]').val(), password: $('input[name=password]').val(), confirm_password: $('input[name=confirm_password]').val() };\n            $.ajax({\n                type: 'POST',\n                url: 'userregistration.php',\n                data: JSON.stringify(data),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: 'json',\n                success: function(response) {\n                    if (response.success) {\n                        alert('User created successfully!');\n                    } else {\n                        alert(response.error);\n                    }\n                }\n            });\n        });\n    });\n</script>\n\n</body>\n</html>\n```\n\nThis example uses a simple registration form with input fields for username, email, password, and confirm password. When the user submits the form, it sends an AJAX request to the `userregistration.php` script, which handles the registration process.\n\nNote that this is a basic example and you should add additional validation and security measures (e.g., CSRF protection) in a production environment.", "code_blocks": ["```php\n<?php\n// Database configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n?>\n```", "```php\n<?php\nrequire_once 'config.php';\n\n// Registration form data\nfunction registerUser() {\n    // Get user input from the registration form\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n\n    // Validate user input\n    if (!isset($username) || !isset($email) || !isset($password) || !isset($confirm_password)) {\n        die(\"Invalid input\");\n    }\n\n    // Check for required fields\n    if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n        return array('error' => 'Please fill in all required fields');\n    }\n\n    // Password validation\n    if (strlen($password) < 8) {\n        return array('error' => 'Password must be at least 8 characters long');\n    }\n    if ($password !== $confirm_password) {\n        return array('error' => 'Passwords do not match');\n    }\n\n    // Hash the password\n    $hashed_password = hash('sha256', $password);\n\n    // Insert new user into the database\n    $query = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($query);\n    $stmt->bind_param(\"sss\", $username, $email, $hashed_password);\n    if (!$stmt->execute()) {\n        die(\"Error: \" . $mysqli->error);\n    }\n\n    return array('success' => 'User created successfully');\n}\n\n// Handle POST request\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $result = registerUser();\n    echo json_encode($result);\n}\n?>\n```", "```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>User Registration</title>\n</head>\n<body>\n\n<!-- Registration form -->\n<form id=\"register-form\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <label for=\"confirm_password\">Confirm Password:</label>\n    <input type=\"password\" name=\"confirm_password\"><br><br>\n    <button type=\"submit\">Register</button>\n</form>\n\n<script src=\"https://code.jquery.com/jquery-3.6.0.min.js\"></script>\n<script>\n    $(document).ready(function() {\n        $('#register-form').submit(function(e) {\n            e.preventDefault();\n            var data = { username: $('input[name=username]').val(), email: $('input[name=email]').val(), password: $('input[name=password]').val(), confirm_password: $('input[name=confirm_password]').val() };\n            $.ajax({\n                type: 'POST',\n                url: 'userregistration.php',\n                data: JSON.stringify(data),\n                contentType: \"application/json; charset=utf-8\",\n                dataType: 'json',\n                success: function(response) {\n                    if (response.success) {\n                        alert('User created successfully!');\n                    } else {\n                        alert(response.error);\n                    }\n                }\n            });\n        });\n    });\n</script>\n\n</body>\n</html>\n```"]}
