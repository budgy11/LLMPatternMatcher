{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a basic user registration function using PHP. This script checks for existing usernames, validates the input data, and hashes passwords before storing them in a database.\n\n**Note:** You will need to have PHP, MySQLi (or any other suitable database extension) installed on your server to use this code.\n\n```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Database connection settings\nfunction connect_to_db() {\n    global $conn;\n    $conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n}\n\n// User registration function\nfunction register_user($username, $email, $password) {\n    // Connect to the database\n    connect_to_db();\n    \n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('status' => 'error', 'message' => 'Please fill in all fields');\n    }\n\n    // Check for existing username\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = mysqli_query($conn, $query);\n    \n    if (mysqli_num_rows($result) > 0) {\n        return array('status' => 'error', 'message' => 'Username already exists');\n    }\n\n    // Hash the password\n    $hashed_password = hash('sha256', $password);\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n    \n    if (mysqli_query($conn, $query)) {\n        return array('status' => 'success', 'message' => 'User registered successfully');\n    } else {\n        return array('status' => 'error', 'message' => 'Failed to register user');\n    }\n}\n\n// Example usage\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = register_user($username, $email, $password);\necho json_encode($result);\n\n?>\n```\n\nThis code defines a function called `register_user` which takes three parameters: `$username`, `$email`, and `$password`. It connects to the database using MySQLi, checks for existing usernames, hashes passwords, and inserts new users into the database. The example usage demonstrates how you can call this function from an HTML form with JavaScript (or AJAX).\n\n**Security Considerations**\n\n1. Always hash sensitive data like passwords before storing them in your database.\n2. Validate user input to prevent SQL injection attacks.\n3. Use prepared statements or parameterized queries instead of directly inserting variables into the query string.\n\n**Note:** Remember to update `DB_HOST`, `DB_USER`, `DB_PASSWORD`, and `DB_NAME` with your actual database credentials for this script to work properly.", "code_blocks": ["```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Database connection settings\nfunction connect_to_db() {\n    global $conn;\n    $conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n}\n\n// User registration function\nfunction register_user($username, $email, $password) {\n    // Connect to the database\n    connect_to_db();\n    \n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('status' => 'error', 'message' => 'Please fill in all fields');\n    }\n\n    // Check for existing username\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = mysqli_query($conn, $query);\n    \n    if (mysqli_num_rows($result) > 0) {\n        return array('status' => 'error', 'message' => 'Username already exists');\n    }\n\n    // Hash the password\n    $hashed_password = hash('sha256', $password);\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n    \n    if (mysqli_query($conn, $query)) {\n        return array('status' => 'success', 'message' => 'User registered successfully');\n    } else {\n        return array('status' => 'error', 'message' => 'Failed to register user');\n    }\n}\n\n// Example usage\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = register_user($username, $email, $password);\necho json_encode($result);\n\n?>\n```"]}
