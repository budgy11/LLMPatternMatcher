{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a basic user registration function in PHP. This function will create a new user account with the provided information and store it in a database.\n\n**Database Setup**\n-----------------\n\nBefore running this code, you'll need to set up a MySQL database. Create a table called `users` with the following schema:\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  email VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL,\n  username VARCHAR(50) NOT NULL\n);\n```\n\n**Registration Function**\n------------------------\n\nCreate a new PHP file called `register.php` and add the following code:\n\n```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n  global $conn;\n\n  // Get user input\n  $email = $_POST['email'];\n  $password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n  $username = $_POST['username'];\n\n  // Check if email already exists in database\n  $sql = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = $conn->query($sql);\n\n  if ($result->num_rows > 0) {\n    echo 'Email already exists. Please choose a different email.';\n    return false;\n  }\n\n  // Insert new user into database\n  $sql = \"INSERT INTO users (email, password, username) VALUES ('$email', '$password', '$username')\";\n  if ($conn->query($sql) === TRUE) {\n    echo 'User created successfully!';\n    return true;\n  } else {\n    echo 'Error creating user: ' . $conn->error;\n    return false;\n  }\n}\n\n// Check for POST request\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  registerUser();\n} else {\n  // Handle GET request (display registration form)\n  ?>\n  <h1>Register</h1>\n  <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    Email: <input type=\"email\" name=\"email\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    <button type=\"submit\">Register</button>\n  </form>\n  <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n\n**Usage**\n------------\n\n1. Create a new file called `register.php` and add the above code.\n2. Open `register.php` in your web browser to display the registration form.\n3. Fill out the form with the required information (email, password, username).\n4. Submit the form to create a new user account.\n\nNote: This is a basic example of a user registration function. You should consider implementing additional security measures such as:\n\n* Validation and sanitization of input data\n* Password hashing using a library like `password_hash()`\n* Email verification or password reset functionality", "code_blocks": [null, "```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n  global $conn;\n\n  // Get user input\n  $email = $_POST['email'];\n  $password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n  $username = $_POST['username'];\n\n  // Check if email already exists in database\n  $sql = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = $conn->query($sql);\n\n  if ($result->num_rows > 0) {\n    echo 'Email already exists. Please choose a different email.';\n    return false;\n  }\n\n  // Insert new user into database\n  $sql = \"INSERT INTO users (email, password, username) VALUES ('$email', '$password', '$username')\";\n  if ($conn->query($sql) === TRUE) {\n    echo 'User created successfully!';\n    return true;\n  } else {\n    echo 'Error creating user: ' . $conn->error;\n    return false;\n  }\n}\n\n// Check for POST request\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  registerUser();\n} else {\n  // Handle GET request (display registration form)\n  ?>\n  <h1>Register</h1>\n  <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    Email: <input type=\"email\" name=\"email\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    <button type=\"submit\">Register</button>\n  </form>\n  <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```"]}
