{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a basic user registration function in PHP, including validation and hashing of passwords:\n\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'your_database_name';\n$username = 'your_username';\n$password = 'your_password';\n\n// Function to connect to database\nfunction dbConnect() {\n    global $host, $dbname, $username, $password;\n    try {\n        $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n        return $conn;\n    } catch (PDOException $e) {\n        echo 'Connection failed: ' . $e->getMessage();\n        exit();\n    }\n}\n\n// Function to register a user\nfunction registerUser($name, $email, $password) {\n    // Database connection\n    $db = dbConnect();\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    try {\n        $stmt = $db->prepare(\"INSERT INTO users (name, email, password) VALUES (:name, :email, :password)\");\n        $stmt->bindParam(':name', $name);\n        $stmt->bindParam(':email', $email);\n        $stmt->bindParam(':password', $hashedPassword);\n\n        if ($stmt->execute()) {\n            return true;\n        } else {\n            throw new Exception('Database error');\n        }\n    } catch (Exception $e) {\n        echo 'Error registering user: ' . $e->getMessage();\n        return false;\n    } finally {\n        // Close database connection\n        unset($db);\n    }\n}\n\n// Example usage:\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    if (!empty($_POST['name']) && !empty($_POST['email']) && !empty($_POST['password'])) {\n        $name = $_POST['name'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate input\n        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            if (strlen($password) >= 8) {\n                if (registerUser($name, $email, $password)) {\n                    echo 'User registered successfully!';\n                } else {\n                    echo 'Registration failed. Please try again.';\n                }\n            } else {\n                echo 'Password must be at least 8 characters long.';\n            }\n        } else {\n            echo 'Invalid email address.';\n        }\n    } else {\n        echo 'Please fill in all fields.';\n    }\n}\n\n?>\n```\n\nThis example includes:\n\n1. Database connection settings.\n2. A `dbConnect` function to establish a database connection.\n3. A `registerUser` function that hashes the password and inserts the user data into the database using prepared statements.\n4. Validation for email address format and password length.\n5. An example usage section with input validation.\n\nRemember to replace placeholders (`$host`, `$dbname`, `$username`, `$password`) with your actual database settings.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'your_database_name';\n$username = 'your_username';\n$password = 'your_password';\n\n// Function to connect to database\nfunction dbConnect() {\n    global $host, $dbname, $username, $password;\n    try {\n        $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n        return $conn;\n    } catch (PDOException $e) {\n        echo 'Connection failed: ' . $e->getMessage();\n        exit();\n    }\n}\n\n// Function to register a user\nfunction registerUser($name, $email, $password) {\n    // Database connection\n    $db = dbConnect();\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    try {\n        $stmt = $db->prepare(\"INSERT INTO users (name, email, password) VALUES (:name, :email, :password)\");\n        $stmt->bindParam(':name', $name);\n        $stmt->bindParam(':email', $email);\n        $stmt->bindParam(':password', $hashedPassword);\n\n        if ($stmt->execute()) {\n            return true;\n        } else {\n            throw new Exception('Database error');\n        }\n    } catch (Exception $e) {\n        echo 'Error registering user: ' . $e->getMessage();\n        return false;\n    } finally {\n        // Close database connection\n        unset($db);\n    }\n}\n\n// Example usage:\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    if (!empty($_POST['name']) && !empty($_POST['email']) && !empty($_POST['password'])) {\n        $name = $_POST['name'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate input\n        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            if (strlen($password) >= 8) {\n                if (registerUser($name, $email, $password)) {\n                    echo 'User registered successfully!';\n                } else {\n                    echo 'Registration failed. Please try again.';\n                }\n            } else {\n                echo 'Password must be at least 8 characters long.';\n            }\n        } else {\n            echo 'Invalid email address.';\n        }\n    } else {\n        echo 'Please fill in all fields.';\n    }\n}\n\n?>\n```"]}
