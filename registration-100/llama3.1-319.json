{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nHere is an example of a user registration function in PHP that includes form validation and database interaction.\n\n### Database Schema\n\nFor this example, we'll assume you have a MySQL database with the following schema:\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(50) NOT NULL,\n  email VARCHAR(100) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n```\n### User Registration Function\n\nCreate a file called `register.php` and add the following code:\n```php\n<?php\nrequire 'config/database.php'; // assume you have a database connection configuration\n\nfunction registerUser($username, $email, $password)\n{\n  // Validate user input\n  if (empty($username) || empty($email) || empty($password)) {\n    return array('error' => 'Please fill out all fields');\n  }\n\n  // Check for duplicate username or email\n  $query = \"SELECT * FROM users WHERE username = '$username' OR email = '$email'\";\n  $result = mysqli_query($db, $query);\n  if (mysqli_num_rows($result) > 0) {\n    return array('error' => 'Username or email already exists');\n  }\n\n  // Hash password\n  $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n  // Insert new user into database\n  $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashedPassword')\";\n  $result = mysqli_query($db, $query);\n  if ($result === TRUE) {\n    return array('success' => 'User created successfully');\n  } else {\n    return array('error' => 'Error creating user');\n  }\n}\n```\n### Registration Form\n\nCreate a form to collect user input:\n```html\n<form action=\"register.php\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" name=\"username\" id=\"username\"><br><br>\n  <label for=\"email\">Email:</label>\n  <input type=\"email\" name=\"email\" id=\"email\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" name=\"password\" id=\"password\"><br><br>\n  <button type=\"submit\">Register</button>\n</form>\n```\n### Example Usage\n\n```php\n$registerData = array(\n  'username' => $_POST['username'],\n  'email' => $_POST['email'],\n  'password' => $_POST['password']\n);\n\n$result = registerUser($registerData['username'], $registerData['email'], $registerData['password']);\nif ($result['success']) {\n  echo \"User created successfully!\";\n} else {\n  echo \"Error: \" . $result['error'];\n}\n```\nThis code defines a `registerUser` function that takes three arguments (`$username`, `$email`, and `$password`) and performs the following actions:\n\n1. Validates user input to ensure all fields are filled out.\n2. Checks for duplicate username or email by querying the database.\n3. Hashes the password using PHP's built-in `password_hash` function.\n4. Inserts a new user into the database with the hashed password.\n\nThe example usage demonstrates how to call the `registerUser` function and handle the result, displaying a success message if the registration is successful or an error message otherwise.\n\n**Note:** This code uses MySQLi extension for database interaction. Make sure you have it enabled in your PHP setup. Also, this is just a basic example, you should adapt it to your specific needs and add more validation and security measures as necessary.", "code_blocks": [null, "```php\n<?php\nrequire 'config/database.php'; // assume you have a database connection configuration\n\nfunction registerUser($username, $email, $password)\n{\n  // Validate user input\n  if (empty($username) || empty($email) || empty($password)) {\n    return array('error' => 'Please fill out all fields');\n  }\n\n  // Check for duplicate username or email\n  $query = \"SELECT * FROM users WHERE username = '$username' OR email = '$email'\";\n  $result = mysqli_query($db, $query);\n  if (mysqli_num_rows($result) > 0) {\n    return array('error' => 'Username or email already exists');\n  }\n\n  // Hash password\n  $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n  // Insert new user into database\n  $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashedPassword')\";\n  $result = mysqli_query($db, $query);\n  if ($result === TRUE) {\n    return array('success' => 'User created successfully');\n  } else {\n    return array('error' => 'Error creating user');\n  }\n}\n```", null, "```php\n$registerData = array(\n  'username' => $_POST['username'],\n  'email' => $_POST['email'],\n  'password' => $_POST['password']\n);\n\n$result = registerUser($registerData['username'], $registerData['email'], $registerData['password']);\nif ($result['success']) {\n  echo \"User created successfully!\";\n} else {\n  echo \"Error: \" . $result['error'];\n}\n```"]}
