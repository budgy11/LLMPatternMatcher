{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nThe following is an example of a user registration function written in PHP. This function includes input validation, password hashing, and email verification.\n\n### Database Configuration\n\nFor this example to work, you need to have a database set up with the necessary tables for storing users. We'll be using MySQL for our database operations.\n\nCreate a new file named `config.php` and add the following code:\n\n```php\n<?php\n$database = array(\n    'host' => 'your_host',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'name' => 'your_database'\n);\n?>\n```\n\nReplace `'your_host'`, `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n\n### User Registration Function\n\nCreate a new file named `register.php` and add the following code:\n\n```php\n<?php\nrequire_once 'config.php';\n\nfunction registerUser($name, $email, $password, $confirmPassword) {\n    // Input validation\n    if (empty($name)) {\n        return array('error' => 'Name is required.');\n    }\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        return array('error' => 'Invalid email address.');\n    }\n    if ($password != $confirmPassword) {\n        return array('error' => 'Passwords do not match.');\n    }\n\n    // Password hashing\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Query to insert new user into database\n    try {\n        $mysqli = new mysqli($database['host'], $database['username'], $database['password'], $database['name']);\n        if ($mysqli->connect_errno) {\n            throw new Exception(\"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error);\n        }\n\n        // Insert new user into database\n        $query = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n        if (!$stmt = $mysqli->prepare($query)) {\n            throw new Exception(\"Prepare failed: (\" . $mysqli->errno . \") \" . $mysqli->error);\n        }\n\n        // Bind parameters to query\n        $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n\n        // Execute query\n        if (!$stmt->execute()) {\n            throw new Exception(\"Execute failed: (\" . $mysqli->errno . \") \" . $mysqli->error);\n        }\n\n        return array('success' => 'User created successfully.');\n    } catch (Exception $e) {\n        echo \"An error occurred: \" . $e->getMessage();\n        return array('error' => $e->getMessage());\n    }\n}\n\n// Call the registerUser function with form data\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirmPassword = $_POST['confirm_password'];\n\n    $result = registerUser($name, $email, $password, $confirmPassword);\n    if (isset($result['error'])) {\n        echo $result['error'];\n    } else {\n        echo $result['success'];\n    }\n}\n?>\n```\n\n### Example Use Case\n\nCreate a form in your HTML file with the following fields:\n\n```html\n<form action=\"register.php\" method=\"post\">\n    <label for=\"name\">Name:</label>\n    <input type=\"text\" id=\"name\" name=\"name\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <label for=\"confirm_password\">Confirm Password:</label>\n    <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```\n\nWhen the form is submitted, the `register.php` script will validate the input data and attempt to create a new user in your database. If the operation is successful, it will return a success message; otherwise, it will display an error message.\n\nNote that this example assumes you have already set up a MySQL database with the necessary tables for storing users. You should replace `'your_host'`, `'your_username'`, `'your_password'`, and `'your_database'` in `config.php` with your actual database credentials.", "code_blocks": ["```php\n<?php\n$database = array(\n    'host' => 'your_host',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'name' => 'your_database'\n);\n?>\n```", "```php\n<?php\nrequire_once 'config.php';\n\nfunction registerUser($name, $email, $password, $confirmPassword) {\n    // Input validation\n    if (empty($name)) {\n        return array('error' => 'Name is required.');\n    }\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        return array('error' => 'Invalid email address.');\n    }\n    if ($password != $confirmPassword) {\n        return array('error' => 'Passwords do not match.');\n    }\n\n    // Password hashing\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Query to insert new user into database\n    try {\n        $mysqli = new mysqli($database['host'], $database['username'], $database['password'], $database['name']);\n        if ($mysqli->connect_errno) {\n            throw new Exception(\"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error);\n        }\n\n        // Insert new user into database\n        $query = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n        if (!$stmt = $mysqli->prepare($query)) {\n            throw new Exception(\"Prepare failed: (\" . $mysqli->errno . \") \" . $mysqli->error);\n        }\n\n        // Bind parameters to query\n        $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n\n        // Execute query\n        if (!$stmt->execute()) {\n            throw new Exception(\"Execute failed: (\" . $mysqli->errno . \") \" . $mysqli->error);\n        }\n\n        return array('success' => 'User created successfully.');\n    } catch (Exception $e) {\n        echo \"An error occurred: \" . $e->getMessage();\n        return array('error' => $e->getMessage());\n    }\n}\n\n// Call the registerUser function with form data\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirmPassword = $_POST['confirm_password'];\n\n    $result = registerUser($name, $email, $password, $confirmPassword);\n    if (isset($result['error'])) {\n        echo $result['error'];\n    } else {\n        echo $result['success'];\n    }\n}\n?>\n```", null]}
