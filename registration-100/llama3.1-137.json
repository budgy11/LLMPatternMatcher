{"prompt": "Create a user registration function using php", "llm_output": "Here is an example of a simple user registration function in PHP:\n\n**register.php**\n```php\n<?php\n\n// Define the database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n    exit();\n}\n\n// Define the registration form fields\n$fields = array(\n    'username' => '',\n    'email' => '',\n    'password' => ''\n);\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Validate the form data\n    $errors = array();\n    foreach ($fields as $field => $value) {\n        if (empty($value)) {\n            $errors[] = \"$field is required\";\n        } elseif (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            $errors[] = \"$field must be a valid email address\";\n        }\n    }\n\n    // Check for password strength\n    if (strlen($_POST['password']) < 8) {\n        $errors[] = \"Password must be at least 8 characters long\";\n    }\n\n    // If there are no errors, proceed with registration\n    if (empty($errors)) {\n        // Hash the password\n        $hashed_password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n\n        // Insert the user into the database\n        $query = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n        $stmt = $mysqli->prepare($query);\n        $stmt->bind_param(\"sss\", $_POST['username'], $_POST['email'], $hashed_password);\n        if ($stmt->execute()) {\n            echo \"User registered successfully!\";\n        } else {\n            echo \"Error registering user: \" . $stmt->error;\n        }\n    } else {\n        // Display the errors\n        foreach ($errors as $error) {\n            echo \"<p>$error</p>\";\n        }\n    }\n}\n\n?>\n```\n**register.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Register</title>\n</head>\n<body>\n    <h1>Register</h1>\n    <form action=\"register.php\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Register\">\n    </form>\n</body>\n</html>\n```\nThis code defines a simple user registration form that collects the username, email address, and password. The form data is then validated using PHP to ensure it meets certain criteria (e.g., email address must be valid). If the data passes validation, it is inserted into the database using prepared statements.\n\nNote: This example uses the `mysqli` extension for database interactions. You may need to modify the code to use a different extension (e.g., PDO) depending on your specific requirements.\n\nAlso, remember to replace the placeholders (`your_username`, `your_password`, `your_database`) with your actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Define the database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n    exit();\n}\n\n// Define the registration form fields\n$fields = array(\n    'username' => '',\n    'email' => '',\n    'password' => ''\n);\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Validate the form data\n    $errors = array();\n    foreach ($fields as $field => $value) {\n        if (empty($value)) {\n            $errors[] = \"$field is required\";\n        } elseif (!filter_var($value, FILTER_VALIDATE_EMAIL)) {\n            $errors[] = \"$field must be a valid email address\";\n        }\n    }\n\n    // Check for password strength\n    if (strlen($_POST['password']) < 8) {\n        $errors[] = \"Password must be at least 8 characters long\";\n    }\n\n    // If there are no errors, proceed with registration\n    if (empty($errors)) {\n        // Hash the password\n        $hashed_password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n\n        // Insert the user into the database\n        $query = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n        $stmt = $mysqli->prepare($query);\n        $stmt->bind_param(\"sss\", $_POST['username'], $_POST['email'], $hashed_password);\n        if ($stmt->execute()) {\n            echo \"User registered successfully!\";\n        } else {\n            echo \"Error registering user: \" . $stmt->error;\n        }\n    } else {\n        // Display the errors\n        foreach ($errors as $error) {\n            echo \"<p>$error</p>\";\n        }\n    }\n}\n\n?>\n```", null]}
