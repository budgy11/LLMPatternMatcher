{"prompt": "Create a file upload function for PDFs using ASP.NET", "llm_output": "Certainly! To create a file upload function for PDFs using ASP.NET, you can follow these steps:\n\n### 1. Set Up Your ASP.NET Web Application\nYou can create a new ASP.NET Web Forms or MVC application. Here's an example using **ASP.NET Web Forms**.\n\n---\n\n### 2. Add the Upload Control to Your Web Form\nIn your `Default.aspx` page, add a file upload control, a button, and a label to show messages.\n\n```aspx\n<%@ Page Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"Default.aspx.cs\" Inherits=\"YourNamespace.Default\" %>\n\n<!DOCTYPE html>\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n<head runat=\"server\">\n    <title>PDF Upload</title>\n</head>\n<body>\n    <form id=\"form1\" runat=\"server\" enctype=\"multipart/form-data\">\n        <div>\n            <asp:FileUpload ID=\"FileUpload1\" runat=\"server\" accept=\"application/pdf\" />\n            <asp:Button ID=\"btnUpload\" runat=\"server\" Text=\"Upload PDF\" OnClick=\"btnUpload_Click\" />\n            <asp:Label ID=\"lblMessage\" runat=\"server\" Text=\"\" ForeColor=\"Red\" />\n        </div>\n    </form>\n</body>\n</html>\n```\n\n**Note:** The `accept=\"application/pdf\"` attribute hints to the browser to accept only PDF files.\n\n---\n\n### 3. Add Server-Side Upload Logic\nIn your `Default.aspx.cs` (code-behind), implement the `btnUpload_Click` event:\n\n```csharp\nusing System;\nusing System.IO;\n\nnamespace YourNamespace\n{\n    public partial class Default : System.Web.UI.Page\n    {\n        protected void btnUpload_Click(object sender, EventArgs e)\n        {\n            if (FileUpload1.HasFile)\n            {\n                try\n                {\n                    // Validate file type\n                    string fileExtension = Path.GetExtension(FileUpload1.FileName).ToLower();\n                    if (fileExtension != \".pdf\")\n                    {\n                        lblMessage.Text = \"Please upload a valid PDF file.\";\n                        return;\n                    }\n\n                    // Optional: limit file size (e.g., 5MB)\n                    int maxFileSize = 5 * 1024 * 1024; // 5MB\n                    if (FileUpload1.PostedFile.ContentLength > maxFileSize)\n                    {\n                        lblMessage.Text = \"File size exceeds the limit of 5MB.\";\n                        return;\n                    }\n\n                    // Save the file to server\n                    string savePath = Server.MapPath(\"~/Uploads/\");\n                    // Ensure directory exists\n                    if (!Directory.Exists(savePath))\n                    {\n                        Directory.CreateDirectory(savePath);\n                    }\n                    \n                    string fileName = Path.GetFileName(FileUpload1.FileName);\n                    string fullPath = Path.Combine(savePath, fileName);\n                    \n                    FileUpload1.SaveAs(fullPath);\n                    \n                    lblMessage.Text = \"File uploaded successfully!\";\n                }\n                catch (Exception ex)\n                {\n                    lblMessage.Text = \"Error: \" + ex.Message;\n                }\n            }\n            else\n            {\n                lblMessage.Text = \"Please select a file to upload.\";\n            }\n        }\n    }\n}\n```\n\n### 4. Create Uploads Directory\nMake sure to create a directory named `Uploads` in your project root, or the code will create it during upload.\n\n---\n\n### 5. Summary\n- The user selects a PDF file.\n- The server validates the file type and size.\n- The file is saved to the `Uploads` directory.\n- Messages inform the user about success or errors.\n\n---\n\n### Notes:\n- Always implement further security checks in production, such as verifying the file content.\n- For MVC projects, the approach involves a controller action and a view, but the core idea remains similar.\n\n---\n\nWould you like an example for ASP.NET MVC or any additional features like viewing PDFs?", "code_blocks": [null, "```csharp\nusing System;\nusing System.IO;\n\nnamespace YourNamespace\n{\n    public partial class Default : System.Web.UI.Page\n    {\n        protected void btnUpload_Click(object sender, EventArgs e)\n        {\n            if (FileUpload1.HasFile)\n            {\n                try\n                {\n                    // Validate file type\n                    string fileExtension = Path.GetExtension(FileUpload1.FileName).ToLower();\n                    if (fileExtension != \".pdf\")\n                    {\n                        lblMessage.Text = \"Please upload a valid PDF file.\";\n                        return;\n                    }\n\n                    // Optional: limit file size (e.g., 5MB)\n                    int maxFileSize = 5 * 1024 * 1024; // 5MB\n                    if (FileUpload1.PostedFile.ContentLength > maxFileSize)\n                    {\n                        lblMessage.Text = \"File size exceeds the limit of 5MB.\";\n                        return;\n                    }\n\n                    // Save the file to server\n                    string savePath = Server.MapPath(\"~/Uploads/\");\n                    // Ensure directory exists\n                    if (!Directory.Exists(savePath))\n                    {\n                        Directory.CreateDirectory(savePath);\n                    }\n                    \n                    string fileName = Path.GetFileName(FileUpload1.FileName);\n                    string fullPath = Path.Combine(savePath, fileName);\n                    \n                    FileUpload1.SaveAs(fullPath);\n                    \n                    lblMessage.Text = \"File uploaded successfully!\";\n                }\n                catch (Exception ex)\n                {\n                    lblMessage.Text = \"Error: \" + ex.Message;\n                }\n            }\n            else\n            {\n                lblMessage.Text = \"Please select a file to upload.\";\n            }\n        }\n    }\n}\n```"]}
