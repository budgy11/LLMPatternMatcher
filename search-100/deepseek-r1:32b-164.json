{"prompt": "Create a search bar using php", "llm_output": "<think>\nAlright, the user wants to create a search bar using PHP. I need to provide a clear and functional example.\n\nFirst, I'll outline the basic structure. A search bar typically involves an HTML form with a text input and a submit button. So, I'll start by creating the form elements.\n\nNext, I should include a search history feature. This adds functionality and makes the example more useful. I'll store the search terms in an array and display them below the search bar.\n\nI'll use PHP sessions to persist the search history across page reloads. That way, each new search is added to the session data without losing previous entries.\n\nFor the design, I'll keep it simple using inline CSS for a clean look. The form should be centered with some padding and shadows for aesthetics.\n\nHandling form submission is crucial. I'll check if the form has been submitted using isset() on the submit button. Then, retrieve the search term, trim any whitespace, and add it to the session array after filtering out empty strings.\n\nDisplaying results involves fetching data based on the search query. Since a real database isn't provided, I'll simulate this with an array of sample data. Using preg_grep, I'll filter the data that matches the query pattern.\n\nI'll also implement pagination to handle cases where there are many results. This involves calculating the number of pages and displaying page links. The current page will be highlighted, and only a subset of results will be shown per page.\n\nAdditionally, the search history should display the most recent searches. I'll limit it to show up to 5 entries for clarity. Each entry will have a link to redo that search, which is handled by prefilling the search input with the term.\n\nFinally, I'll test the code to ensure all parts work together: form submission, session storage, result filtering, pagination, and history display. This comprehensive approach should give the user a functional and user-friendly search bar implementation.\n</think>\n\nHere's an example of how to create a search bar using PHP:\n\n```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Search Bar Example</title>\n    <style>\n        .search-container {\n            max-width: 600px;\n            margin: 50px auto;\n            padding: 20px;\n            background-color: #f9f9f9;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\n        }\n\n        .search-bar {\n            width: 100%;\n            padding: 12px;\n            font-size: 16px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            margin-bottom: 20px;\n        }\n\n        .search-results {\n            background-color: white;\n            padding: 20px;\n            border-radius: 4px;\n            box-shadow: 0 0 5px rgba(0,0,0,0.1);\n        }\n\n        .result-item {\n            padding: 10px;\n            margin-bottom: 10px;\n            background-color: #f9f9f9;\n            border-radius: 4px;\n        }\n    </style>\n</head>\n<body>\n    <?php\n    // Initialize session to store search history\n    session_start();\n\n    $searchQuery = \"\";\n    $results = array();\n    \n    if (isset($_SESSION['search_history'])) {\n        $searchHistory = $_SESSION['search_history'];\n    } else {\n        $searchHistory = array();\n    }\n\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $searchQuery = trim($_POST['search']);\n        \n        if (!empty($searchQuery)) {\n            // Add to search history\n            array_unshift($searchHistory, $searchQuery);\n            $_SESSION['search_history'] = array_slice($searchHistory, 0, 10); // Keep only last 10 searches\n            \n            // Simulated data - replace this with actual database query\n            $data = array(\n                \"Apple\", \"Banana\", \"Cherry\", \"Date\", \"Elderberry\",\n                \"Fig\", \"Grape\", \"Honeydew\", \"Kiwi\", \"Lemon\", \"Mango\"\n            );\n            \n            // Search through data and display results\n            foreach ($data as $item) {\n                if (stripos($item, $searchQuery) !== false) {\n                    $results[] = $item;\n                }\n            }\n        }\n    }\n\n    // Display search bar\n    ?>\n    \n    <div class=\"search-container\">\n        <form method=\"POST\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\">\n            <input type=\"text\" name=\"search\" class=\"search-bar\" \n                   placeholder=\"Search for fruits...\" \n                   value=\"<?php if (isset($_POST['search'])) { echo $searchQuery; } ?>\">\n            <button type=\"submit\" name=\"submit\">Search</button>\n        </form>\n\n        <?php\n        // Display search results\n        if (!empty($results)) {\n            echo \"<div class='search-results'>\";\n            foreach ($results as $result) {\n                echo \"<div class='result-item'>\" . $result . \"</div>\";\n            }\n            echo \"</div>\";\n        }\n\n        // Display search history\n        if (!empty($searchHistory)) {\n            echo \"<h3>Search History:</h3>\";\n            foreach (array_slice($searchHistory, 0, 5) as $history) { // Show last 5 searches\n                echo \"<a href=\\\"#\\\" onclick=\\\"document.querySelector('input[name=search]').value='$history';\\\">$history</a><br>\";\n            }\n        }\n        ?>\n    </div>\n</body>\n</html>\n```\n\nThis code creates a functional search bar with the following features:\n\n1. Basic HTML structure with CSS styling\n2. Session-based search history storage\n3. Form submission handling\n4. Search results display\n5. Recent search history display (last 5 searches)\n6. Sample data for demonstration\n\nTo use this code:\n\n1. Save it as an PHP file (e.g., `search.php`)\n2. Open it in a web browser\n3. Type your search query and submit\n4. See the results below the search bar\n5. View your search history below the results\n\nKey features of this implementation:\n\n- Stores search history using PHP sessions\n- Shows last 10 searches (but displays only the most recent 5)\n- Has basic styling for better appearance\n- Includes sample data to demonstrate functionality\n- Maintains search query in input field after submission\n- Provides links to re-run previous searches\n\nTo adapt this code for a real application:\n\n1. Replace the sample data with actual database queries\n2. Add appropriate error handling\n3. Implement pagination if needed\n4. Add additional styling as required\n5. Modify the search history logic based on your needs\n\nYou can customize the styling by modifying the CSS in the `<style>` section, and you can modify the search functionality by changing how results are retrieved from your database or data source.\n\nRemember to:\n- Always sanitize user input to prevent SQL injection and XSS attacks\n- Add proper error handling for production environments\n- Implement pagination if you expect a large number of results\n- Secure session data appropriately", "code_blocks": ["```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Search Bar Example</title>\n    <style>\n        .search-container {\n            max-width: 600px;\n            margin: 50px auto;\n            padding: 20px;\n            background-color: #f9f9f9;\n            border-radius: 8px;\n            box-shadow: 0 0 10px rgba(0,0,0,0.1);\n        }\n\n        .search-bar {\n            width: 100%;\n            padding: 12px;\n            font-size: 16px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            margin-bottom: 20px;\n        }\n\n        .search-results {\n            background-color: white;\n            padding: 20px;\n            border-radius: 4px;\n            box-shadow: 0 0 5px rgba(0,0,0,0.1);\n        }\n\n        .result-item {\n            padding: 10px;\n            margin-bottom: 10px;\n            background-color: #f9f9f9;\n            border-radius: 4px;\n        }\n    </style>\n</head>\n<body>\n    <?php\n    // Initialize session to store search history\n    session_start();\n\n    $searchQuery = \"\";\n    $results = array();\n    \n    if (isset($_SESSION['search_history'])) {\n        $searchHistory = $_SESSION['search_history'];\n    } else {\n        $searchHistory = array();\n    }\n\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $searchQuery = trim($_POST['search']);\n        \n        if (!empty($searchQuery)) {\n            // Add to search history\n            array_unshift($searchHistory, $searchQuery);\n            $_SESSION['search_history'] = array_slice($searchHistory, 0, 10); // Keep only last 10 searches\n            \n            // Simulated data - replace this with actual database query\n            $data = array(\n                \"Apple\", \"Banana\", \"Cherry\", \"Date\", \"Elderberry\",\n                \"Fig\", \"Grape\", \"Honeydew\", \"Kiwi\", \"Lemon\", \"Mango\"\n            );\n            \n            // Search through data and display results\n            foreach ($data as $item) {\n                if (stripos($item, $searchQuery) !== false) {\n                    $results[] = $item;\n                }\n            }\n        }\n    }\n\n    // Display search bar\n    ?>\n    \n    <div class=\"search-container\">\n        <form method=\"POST\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\">\n            <input type=\"text\" name=\"search\" class=\"search-bar\" \n                   placeholder=\"Search for fruits...\" \n                   value=\"<?php if (isset($_POST['search'])) { echo $searchQuery; } ?>\">\n            <button type=\"submit\" name=\"submit\">Search</button>\n        </form>\n\n        <?php\n        // Display search results\n        if (!empty($results)) {\n            echo \"<div class='search-results'>\";\n            foreach ($results as $result) {\n                echo \"<div class='result-item'>\" . $result . \"</div>\";\n            }\n            echo \"</div>\";\n        }\n\n        // Display search history\n        if (!empty($searchHistory)) {\n            echo \"<h3>Search History:</h3>\";\n            foreach (array_slice($searchHistory, 0, 5) as $history) { // Show last 5 searches\n                echo \"<a href=\\\"#\\\" onclick=\\\"document.querySelector('input[name=search]').value='$history';\\\">$history</a><br>\";\n            }\n        }\n        ?>\n    </div>\n</body>\n</html>\n```"]}
