{"prompt": "Create a forgot password function using php", "llm_output": "Here's an example of how to create a \"Forgot Password\" functionality in PHP:\n\n**Database Setup**\n\nLet's assume we have the following database table `users` with columns `id`, `email`, and `password`.\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  email VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n```\n\n**PHP Code**\n\nCreate a new PHP file named `forgot_password.php`. This script will handle the forgot password functionality.\n\n```php\n<?php\n\n// Configuration settings\nrequire 'config.php';\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  // Get user email from input field\n  $email = $_POST['email'];\n\n  // Validate email using regular expression\n  if (!preg_match(\"/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/\", $email)) {\n    echo \"Invalid email address\";\n    exit;\n  }\n\n  // Query database to find user with matching email\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // If user found, generate new password and send it via email\n    $user = mysqli_fetch_assoc($result);\n    $new_password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 8);\n\n    // Update user password in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send new password via email using PHPMailer (not shown here)\n    send_email_notification($user['email'], $new_password);\n  } else {\n    echo \"User not found with this email address\";\n  }\n}\n\n// Function to send email notification\nfunction send_email_notification($to_email, $new_password) {\n  // Your email settings here\n  $from_email = 'your-email@example.com';\n  $subject = 'Your new password is: ' . $new_password;\n  $message_body = 'Your new password is: ' . $new_password;\n\n  // Send email using PHPMailer (not shown here)\n}\n\n?>\n```\n\n**HTML Form**\n\nCreate an HTML form to allow users to submit their email address for a forgotten password.\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Forgot Password</title>\n</head>\n<body>\n  <h1>Forgot Password</h1>\n\n  <?php if (isset($_GET['success'])): ?>\n    <p>Password updated successfully!</p>\n  <?php endif; ?>\n\n  <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\" required>\n\n    <button type=\"submit\">Submit</button>\n  </form>\n</body>\n</html>\n```\n\n**Security Considerations**\n\n* Always validate user input (in this case, the email address) to prevent SQL injection attacks.\n* Store passwords securely using a hashing algorithm like `password_hash()` and verify them on login with `password_verify()`.\n* Use a secure connection (HTTPS) for sending sensitive information via email.\n\nThis is a basic example of how you can implement a \"Forgot Password\" functionality in PHP. You should adapt this code to fit your specific requirements and ensure it meets security best practices.", "code_blocks": [null, "```php\n<?php\n\n// Configuration settings\nrequire 'config.php';\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  // Get user email from input field\n  $email = $_POST['email'];\n\n  // Validate email using regular expression\n  if (!preg_match(\"/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/\", $email)) {\n    echo \"Invalid email address\";\n    exit;\n  }\n\n  // Query database to find user with matching email\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // If user found, generate new password and send it via email\n    $user = mysqli_fetch_assoc($result);\n    $new_password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 8);\n\n    // Update user password in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send new password via email using PHPMailer (not shown here)\n    send_email_notification($user['email'], $new_password);\n  } else {\n    echo \"User not found with this email address\";\n  }\n}\n\n// Function to send email notification\nfunction send_email_notification($to_email, $new_password) {\n  // Your email settings here\n  $from_email = 'your-email@example.com';\n  $subject = 'Your new password is: ' . $new_password;\n  $message_body = 'Your new password is: ' . $new_password;\n\n  // Send email using PHPMailer (not shown here)\n}\n\n?>\n```", null]}
