{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of how you can create a forgot password function in PHP. This script will send a link to the user's email that they can use to reset their password.\n\n**Forgot Password Function**\n\n```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction forgotPassword($email) {\n    // Get user data from database\n    $sql = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            // Generate random password\n            $password = substr(str_shuffle('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'), 0, 8);\n            \n            // Update user data with new password\n            $sql = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n            if ($conn->query($sql)) {\n                // Send reset link to email\n                sendResetLink($row['id'], $email, $password);\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction sendResetLink($userId, $email, $password) {\n    // Email configuration\n    $from = 'your_email@example.com';\n    $to = $email;\n    $subject = 'Password Reset Link';\n    $body = \"Click on the following link to reset your password: http://your_website.com/reset-password.php?user_id=\" . $userId . \"&password=\" . md5($password);\n\n    // Send email\n    mail($to, $subject, $body, \"From: $from\");\n\n    return true;\n}\n\n// Check if form was submitted\nif (isset($_POST['email'])) {\n    // Clean input data\n    $email = trim(filter_var($_POST['email'], FILTER_SANITIZE_EMAIL));\n\n    // Check if email is valid\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo 'Invalid email address';\n    } else {\n        // Send reset link to user's email\n        if (forgotPassword($email)) {\n            echo \"A password reset link has been sent to your email.\";\n        } else {\n            echo \"Error sending password reset link. Please try again later.\";\n        }\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```\n\n**Reset Password Form**\n\n```php\n<form method=\"post\" action=\"<?php $_SERVER['PHP_SELF']; ?>\">\n    <label for=\"email\">Email:</label>\n    <input type=\"text\" name=\"email\" id=\"email\">\n    <button type=\"submit\">Send Reset Link</button>\n</form>\n```\n\n**Reset Password Script**\n\n```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction resetPassword($userId, $password) {\n    // Update user data with new password\n    $sql = \"UPDATE users SET password = '$password' WHERE id = '$userId'\";\n    if ($conn->query($sql)) {\n        return true;\n    }\n\n    return false;\n}\n\n// Check if form was submitted\nif (isset($_GET['user_id']) && isset($_GET['password'])) {\n    // Get user ID and password from URL parameters\n    $userId = $_GET['user_id'];\n    $password = $_GET['password'];\n\n    // Update user's password\n    if (resetPassword($userId, $password)) {\n        echo \"Your password has been successfully updated.\";\n    } else {\n        echo \"Error updating your password. Please try again later.\";\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```\n\nThis script assumes you have a table named `users` in your database with columns for `email`, `password`, and `id`. You will need to modify the script to match your specific database schema.\n\nRemember to replace `'your_username'`, `'your_password'`, `'your_database'`, and `'http://your_website.com/reset-password.php'` with your actual database credentials and website URL.", "code_blocks": ["```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction forgotPassword($email) {\n    // Get user data from database\n    $sql = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            // Generate random password\n            $password = substr(str_shuffle('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'), 0, 8);\n            \n            // Update user data with new password\n            $sql = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n            if ($conn->query($sql)) {\n                // Send reset link to email\n                sendResetLink($row['id'], $email, $password);\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nfunction sendResetLink($userId, $email, $password) {\n    // Email configuration\n    $from = 'your_email@example.com';\n    $to = $email;\n    $subject = 'Password Reset Link';\n    $body = \"Click on the following link to reset your password: http://your_website.com/reset-password.php?user_id=\" . $userId . \"&password=\" . md5($password);\n\n    // Send email\n    mail($to, $subject, $body, \"From: $from\");\n\n    return true;\n}\n\n// Check if form was submitted\nif (isset($_POST['email'])) {\n    // Clean input data\n    $email = trim(filter_var($_POST['email'], FILTER_SANITIZE_EMAIL));\n\n    // Check if email is valid\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo 'Invalid email address';\n    } else {\n        // Send reset link to user's email\n        if (forgotPassword($email)) {\n            echo \"A password reset link has been sent to your email.\";\n        } else {\n            echo \"Error sending password reset link. Please try again later.\";\n        }\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```", "```php\n<form method=\"post\" action=\"<?php $_SERVER['PHP_SELF']; ?>\">\n    <label for=\"email\">Email:</label>\n    <input type=\"text\" name=\"email\" id=\"email\">\n    <button type=\"submit\">Send Reset Link</button>\n</form>\n```", "```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction resetPassword($userId, $password) {\n    // Update user data with new password\n    $sql = \"UPDATE users SET password = '$password' WHERE id = '$userId'\";\n    if ($conn->query($sql)) {\n        return true;\n    }\n\n    return false;\n}\n\n// Check if form was submitted\nif (isset($_GET['user_id']) && isset($_GET['password'])) {\n    // Get user ID and password from URL parameters\n    $userId = $_GET['user_id'];\n    $password = $_GET['password'];\n\n    // Update user's password\n    if (resetPassword($userId, $password)) {\n        echo \"Your password has been successfully updated.\";\n    } else {\n        echo \"Error updating your password. Please try again later.\";\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```"]}
