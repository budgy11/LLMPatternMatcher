{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"Forgot Password\" functionality using PHP:\n\n**Database Schema**\n\nAssuming you have a database table named `users` with the following columns:\n\n| Column Name | Data Type |\n| --- | --- |\n| id | int (primary key) |\n| email | varchar |\n| password | varchar |\n\n**PHP Code**\n\nCreate a new file named `forgot-password.php` and add the following code:\n```php\n<?php\n\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = mysqli_connect($db_host, $db_username, $db_password, $db_name);\nif (!$conn) {\n    die('Connection failed: ' . mysqli_connect_error());\n}\n\n// Get the email from the form\n$email = $_POST['email'];\n\n// Query to retrieve user data\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($conn, $query);\n\n// Check if user exists\nif (mysqli_num_rows($result) > 0) {\n    // Retrieve user data\n    while ($row = mysqli_fetch_assoc($result)) {\n        $id = $row['id'];\n        $password = $row['password'];\n\n        // Generate a random password and update the database\n        $new_password = uniqid('', true);\n        $query2 = \"UPDATE users SET password = '$new_password' WHERE id = '$id'\";\n        mysqli_query($conn, $query2);\n\n        // Send an email to the user with the new password\n        $to = $email;\n        $subject = 'Your new password is: ';\n        $body = 'Your new password is: ' . $new_password;\n        mail($to, $subject, $body);\n\n        echo 'Password sent successfully!';\n    }\n} else {\n    echo 'Email not found.';\n}\n\n// Close the database connection\nmysqli_close($conn);\n?>\n```\n**HTML Form**\n\nCreate an HTML form to collect the user's email:\n```html\n<form action=\"forgot-password.php\" method=\"post\">\n  <input type=\"email\" name=\"email\" placeholder=\"Enter your email\">\n  <button type=\"submit\">Send Password</button>\n</form>\n```\n**Security Notes**\n\n1. **Password Hashing**: In a real-world application, you should use a password hashing algorithm (e.g., `password_hash()`) to store and verify passwords securely.\n2. **Input Validation**: Always validate user input data to prevent SQL injection attacks.\n3. **Email Verification**: Consider implementing email verification (e.g., via a confirmation link) to ensure the user's email is valid and secure.\n\n**Example Use Case**\n\n1. The user submits their email through the HTML form.\n2. The PHP script retrieves the user's data from the database based on the provided email.\n3. If the user exists, a new random password is generated and stored in the database.\n4. An email with the new password is sent to the user.\n\nRemember to adapt this example to your specific use case and security requirements.", "code_blocks": ["```php\n<?php\n\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = mysqli_connect($db_host, $db_username, $db_password, $db_name);\nif (!$conn) {\n    die('Connection failed: ' . mysqli_connect_error());\n}\n\n// Get the email from the form\n$email = $_POST['email'];\n\n// Query to retrieve user data\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($conn, $query);\n\n// Check if user exists\nif (mysqli_num_rows($result) > 0) {\n    // Retrieve user data\n    while ($row = mysqli_fetch_assoc($result)) {\n        $id = $row['id'];\n        $password = $row['password'];\n\n        // Generate a random password and update the database\n        $new_password = uniqid('', true);\n        $query2 = \"UPDATE users SET password = '$new_password' WHERE id = '$id'\";\n        mysqli_query($conn, $query2);\n\n        // Send an email to the user with the new password\n        $to = $email;\n        $subject = 'Your new password is: ';\n        $body = 'Your new password is: ' . $new_password;\n        mail($to, $subject, $body);\n\n        echo 'Password sent successfully!';\n    }\n} else {\n    echo 'Email not found.';\n}\n\n// Close the database connection\nmysqli_close($conn);\n?>\n```", null]}
