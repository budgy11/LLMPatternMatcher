{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"Forgot Password\" function in PHP:\n\n**index.php**\n```php\n<?php\nrequire_once 'config.php'; // database connection settings\n\n// handle form submission (forgot password)\nif (isset($_POST['submit'])) {\n  $email = $_POST['email'];\n  forgot_password($email);\n}\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Forgot Password</title>\n</head>\n<body>\n\n<h1>Forgot Password</h1>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label>Email:</label>\n  <input type=\"text\" name=\"email\" value=\"<?php echo (isset($_POST['email'])) ? $_POST['email'] : ''; ?>\">\n  <br><br>\n  <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n\n<?php\n// forgot password function\nfunction forgot_password($email) {\n  global $db; // database connection\n\n  // check if email exists in database\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($db, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // generate new password and send it to user's email\n    $new_password = substr(md5(uniqid()), 0, 8); // generate random password\n    $update_query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($db, $update_query);\n\n    // send new password via email\n    $to = $email;\n    $subject = 'Your New Password';\n    $message = 'Hello,\n                Your new password is: '.$new_password.'\n                Please log in with this new password.\n                Sincerely,\n                [Your Name]';\n    mail($to, $subject, $message);\n\n    echo \"New password sent to your email.\";\n  } else {\n    echo \"Email not found. Please try again.\";\n  }\n}\n?>\n</body>\n</html>\n```\n**config.php**\n```php\n<?php\n// database connection settings\n$db = mysqli_connect('localhost', 'username', 'password', 'database_name');\n\n// error handling\nif (!$db) {\n  die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```\nThis code creates a simple form that allows users to enter their email address. When the user submits the form, it checks if an account with the entered email exists in the database. If an account is found, it generates a new password using PHP's `md5()` and `uniqid()` functions, updates the password in the database, and sends the new password via email to the user.\n\nPlease note that this is a basic example and should not be used as-is in production environment without proper security measures (e.g. hashing passwords, secure password reset process).", "code_blocks": ["```php\n<?php\nrequire_once 'config.php'; // database connection settings\n\n// handle form submission (forgot password)\nif (isset($_POST['submit'])) {\n  $email = $_POST['email'];\n  forgot_password($email);\n}\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Forgot Password</title>\n</head>\n<body>\n\n<h1>Forgot Password</h1>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label>Email:</label>\n  <input type=\"text\" name=\"email\" value=\"<?php echo (isset($_POST['email'])) ? $_POST['email'] : ''; ?>\">\n  <br><br>\n  <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n\n<?php\n// forgot password function\nfunction forgot_password($email) {\n  global $db; // database connection\n\n  // check if email exists in database\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($db, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // generate new password and send it to user's email\n    $new_password = substr(md5(uniqid()), 0, 8); // generate random password\n    $update_query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($db, $update_query);\n\n    // send new password via email\n    $to = $email;\n    $subject = 'Your New Password';\n    $message = 'Hello,\n                Your new password is: '.$new_password.'\n                Please log in with this new password.\n                Sincerely,\n                [Your Name]';\n    mail($to, $subject, $message);\n\n    echo \"New password sent to your email.\";\n  } else {\n    echo \"Email not found. Please try again.\";\n  }\n}\n?>\n</body>\n</html>\n```", "```php\n<?php\n// database connection settings\n$db = mysqli_connect('localhost', 'username', 'password', 'database_name');\n\n// error handling\nif (!$db) {\n  die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```"]}
