{"prompt": "Create a forgot password function using php", "llm_output": "Here's an example of how to create a \"Forgot Password\" function using PHP. This will send an email with a temporary password to the user, which they can use to log in and change their password.\n\n**Note:** For this example, we'll assume you have already created your database with a users table that has the following fields: `username`, `email`, `password` (hashed using a library like PHPass or a similar one).\n\n### Database Schema\n\n```sql\nCREATE TABLE users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  username VARCHAR(50) NOT NULL,\n  email VARCHAR(100) NOT NULL UNIQUE,\n  password VARCHAR(255) NOT NULL\n);\n```\n\n### PHP Code: Forgot Password Function\n\n```php\n// config.php (database connection settings)\nrequire 'config.php';\n\nfunction forgotPassword() {\n  $username = $_POST['username'];\n  $email = $_POST['email'];\n\n  // Check if username exists in database\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($conn, $query);\n  if (mysqli_num_rows($result) > 0) {\n    $user_data = mysqli_fetch_assoc($result);\n\n    // Generate a random password and store it temporarily in the database\n    $random_password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 10);\n    $query = \"UPDATE users SET password = '$random_password' WHERE username = '$username'\";\n    mysqli_query($conn, $query);\n\n    // Send email with new temporary password\n    sendEmail($user_data['email'], $random_password);\n  } else {\n    echo 'Username not found.';\n  }\n}\n\nfunction sendEmail($to_email, $password) {\n  $subject = 'Temporary Password for your account';\n  $body = 'Your temporary password is: '.$password;\n  $headers = 'From: no-reply@example.com' . \"\\r\\n\";\n  $headers .= 'Content-type: text/html; charset=iso-8859-1' . \"\\r\\n\";\n\n  mail($to_email, $subject, $body, $headers);\n}\n\nif (isset($_POST['forgot_password'])) {\n  forgotPassword();\n}\n```\n\n### PHP Code: Form\n\n```php\n<form action=\"\" method=\"post\">\n  <label>Username:</label>\n  <input type=\"text\" name=\"username\"><br><br>\n  <label>Email:</label>\n  <input type=\"email\" name=\"email\"><br><br>\n  <button type=\"submit\" name=\"forgot_password\">Forgot Password</button>\n</form>\n```\n\n### PHP Code: Sending Temporary Password via Email\n\nThe `sendEmail()` function sends an email to the user's email address with a temporary password. In this example, we'll assume you're using your web server's mail function (PHP's built-in `mail()` function). You may want to consider a more reliable solution like using a library for sending emails.\n\n**Note:** This is just a basic example and doesn't handle errors properly or implement any security measures (like password hashing or token-based recovery) you'd need in a real-world application.", "code_blocks": [null, "```php\n// config.php (database connection settings)\nrequire 'config.php';\n\nfunction forgotPassword() {\n  $username = $_POST['username'];\n  $email = $_POST['email'];\n\n  // Check if username exists in database\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($conn, $query);\n  if (mysqli_num_rows($result) > 0) {\n    $user_data = mysqli_fetch_assoc($result);\n\n    // Generate a random password and store it temporarily in the database\n    $random_password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 10);\n    $query = \"UPDATE users SET password = '$random_password' WHERE username = '$username'\";\n    mysqli_query($conn, $query);\n\n    // Send email with new temporary password\n    sendEmail($user_data['email'], $random_password);\n  } else {\n    echo 'Username not found.';\n  }\n}\n\nfunction sendEmail($to_email, $password) {\n  $subject = 'Temporary Password for your account';\n  $body = 'Your temporary password is: '.$password;\n  $headers = 'From: no-reply@example.com' . \"\\r\\n\";\n  $headers .= 'Content-type: text/html; charset=iso-8859-1' . \"\\r\\n\";\n\n  mail($to_email, $subject, $body, $headers);\n}\n\nif (isset($_POST['forgot_password'])) {\n  forgotPassword();\n}\n```", "```php\n<form action=\"\" method=\"post\">\n  <label>Username:</label>\n  <input type=\"text\" name=\"username\"><br><br>\n  <label>Email:</label>\n  <input type=\"email\" name=\"email\"><br><br>\n  <button type=\"submit\" name=\"forgot_password\">Forgot Password</button>\n</form>\n```"]}
