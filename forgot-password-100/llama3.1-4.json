{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"forgot password\" function in PHP:\n\n**Forgot Password Function**\n```php\n// file: forgot_password.php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\nfunction send_reset_link($email, $username) {\n    // Check if email exists in database\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($database['connection'], $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found\";\n        return;\n    }\n\n    // Generate random password\n    $password = substr(md5(uniqid(rand(), true)), 0, 10);\n\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n    mysqli_query($database['connection'], $query);\n\n    // Send reset link to user's email\n    $subject = 'Reset Your Password';\n    $body = \"\n        Dear $username,\n        \n        We have received a request to reset your password. To do so, please click on the following link:\n        \n        <a href='reset_password.php?email=$email&password=$password'>Reset Password</a>\n        \n        Best regards,\n        [Your Name]\n    \";\n    mail($email, $subject, $body);\n\n    echo \"Password reset link sent to your email.\";\n}\n\nfunction forgot_password() {\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $email = $_POST['email'];\n        $username = $_POST['username'];\n\n        send_reset_link($email, $username);\n    }\n}\n```\n**Reset Password Function**\n```php\n// file: reset_password.php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\nfunction update_password($email, $password) {\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n    mysqli_query($database['connection'], $query);\n}\n\nfunction reset_password() {\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        update_password($email, $password);\n\n        echo \"Password updated successfully.\";\n    }\n}\n```\n**HTML Form**\n```html\n<!-- file: forgot_password.html -->\n\n<form action=\"forgot_password.php\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <input type=\"submit\" name=\"submit\" value=\"Send Reset Link\">\n</form>\n```\n**HTML Form**\n```html\n<!-- file: reset_password.html -->\n\n<form action=\"reset_password.php\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">New Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" name=\"submit\" value=\"Reset Password\">\n</form>\n```\nThis is a basic example of how you can implement a \"forgot password\" function in PHP. When the user submits the form with their email and username, the `send_reset_link` function generates a random password, updates the user's password in the database, and sends an email with a reset link to the user's email.\n\nThe reset link points to the `reset_password.php` file, which contains the `update_password` function. This function updates the user's password in the database when the user submits the form with their new password.\n\nNote that this is just a basic example and you should consider implementing additional security measures, such as:\n\n* Hashing passwords instead of storing them in plain text\n* Implementing a secure password reset process using tokens or one-time links\n* Limiting login attempts to prevent brute-force attacks\n\nYou should also update the database configuration variables (`$database`) with your actual database credentials.", "code_blocks": ["```php\n// file: forgot_password.php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\nfunction send_reset_link($email, $username) {\n    // Check if email exists in database\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($database['connection'], $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found\";\n        return;\n    }\n\n    // Generate random password\n    $password = substr(md5(uniqid(rand(), true)), 0, 10);\n\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n    mysqli_query($database['connection'], $query);\n\n    // Send reset link to user's email\n    $subject = 'Reset Your Password';\n    $body = \"\n        Dear $username,\n        \n        We have received a request to reset your password. To do so, please click on the following link:\n        \n        <a href='reset_password.php?email=$email&password=$password'>Reset Password</a>\n        \n        Best regards,\n        [Your Name]\n    \";\n    mail($email, $subject, $body);\n\n    echo \"Password reset link sent to your email.\";\n}\n\nfunction forgot_password() {\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $email = $_POST['email'];\n        $username = $_POST['username'];\n\n        send_reset_link($email, $username);\n    }\n}\n```", "```php\n// file: reset_password.php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\nfunction update_password($email, $password) {\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$password' WHERE email = '$email'\";\n    mysqli_query($database['connection'], $query);\n}\n\nfunction reset_password() {\n    // Handle form submission\n    if (isset($_POST['submit'])) {\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        update_password($email, $password);\n\n        echo \"Password updated successfully.\";\n    }\n}\n```", null, null]}
