{"prompt": "Create a user cart session using php", "llm_output": "Here's an example of how you can create a basic user cart session using PHP:\n\n**cart.php**\n```php\n<?php\n// Check if the cart session is set, if not create it\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addToCart($id, $quantity) {\n    global $db;\n    // Get product details from database\n    $query = \"SELECT * FROM products WHERE id = '$id'\";\n    $result = mysqli_query($db, $query);\n    if (mysqli_num_rows($result) > 0) {\n        $product = mysqli_fetch_assoc($result);\n        \n        // Check if item is already in cart, if yes increment quantity\n        foreach ($_SESSION['cart'] as &$item) {\n            if ($item['id'] == $id) {\n                $item['quantity'] += $quantity;\n                break;\n            }\n        }\n        \n        // If not found, add new item to cart\n        if (!isset($item)) {\n            $_SESSION['cart'][] = array(\n                'id' => $id,\n                'name' => $product['name'],\n                'price' => $product['price'],\n                'quantity' => $quantity\n            );\n        }\n    }\n}\n\n// Function to update quantity of item in cart\nfunction updateQuantity($id, $newQuantity) {\n    global $db;\n    \n    // Find the index of the item in cart\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $id) {\n            $item['quantity'] = $newQuantity;\n            break;\n        }\n    }\n}\n\n// Function to remove item from cart\nfunction removeFromCart($id) {\n    global $db;\n    \n    // Find the index of the item in cart and unset it\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $id) {\n            unset($item);\n            break;\n        }\n    }\n}\n\n// Function to get total cost of items in cart\nfunction getTotalCost() {\n    global $db;\n    \n    // Calculate total cost by summing up the price * quantity of each item\n    $total = 0;\n    foreach ($_SESSION['cart'] as &$item) {\n        $total += $item['price'] * $item['quantity'];\n    }\n    return $total;\n}\n\n// Example usage:\naddToCart(1, 2); // Add product with id 1 to cart in quantity of 2\nupdateQuantity(1, 3); // Update quantity of product with id 1 to 3\nremoveFromCart(1); // Remove product with id 1 from cart\n\necho \"Total cost: \" . getTotalCost(); // Output total cost of items in cart\n?>\n```\nThis script uses the following functions:\n\n* `addToCart($id, $quantity)`: Adds a product to the cart or increments its quantity if it already exists.\n* `updateQuantity($id, $newQuantity)`: Updates the quantity of an item in the cart.\n* `removeFromCart($id)`: Removes an item from the cart.\n* `getTotalCost()`: Calculates the total cost of items in the cart.\n\nNote: This is a basic example and you may want to add more features like:\n\n* Handling empty sessions\n* Sanitizing user input (e.g., quantity)\n* Displaying cart contents and totals on the page\n\nMake sure to follow proper security practices, such as using prepared statements for database queries.", "code_blocks": ["```php\n<?php\n// Check if the cart session is set, if not create it\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addToCart($id, $quantity) {\n    global $db;\n    // Get product details from database\n    $query = \"SELECT * FROM products WHERE id = '$id'\";\n    $result = mysqli_query($db, $query);\n    if (mysqli_num_rows($result) > 0) {\n        $product = mysqli_fetch_assoc($result);\n        \n        // Check if item is already in cart, if yes increment quantity\n        foreach ($_SESSION['cart'] as &$item) {\n            if ($item['id'] == $id) {\n                $item['quantity'] += $quantity;\n                break;\n            }\n        }\n        \n        // If not found, add new item to cart\n        if (!isset($item)) {\n            $_SESSION['cart'][] = array(\n                'id' => $id,\n                'name' => $product['name'],\n                'price' => $product['price'],\n                'quantity' => $quantity\n            );\n        }\n    }\n}\n\n// Function to update quantity of item in cart\nfunction updateQuantity($id, $newQuantity) {\n    global $db;\n    \n    // Find the index of the item in cart\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $id) {\n            $item['quantity'] = $newQuantity;\n            break;\n        }\n    }\n}\n\n// Function to remove item from cart\nfunction removeFromCart($id) {\n    global $db;\n    \n    // Find the index of the item in cart and unset it\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $id) {\n            unset($item);\n            break;\n        }\n    }\n}\n\n// Function to get total cost of items in cart\nfunction getTotalCost() {\n    global $db;\n    \n    // Calculate total cost by summing up the price * quantity of each item\n    $total = 0;\n    foreach ($_SESSION['cart'] as &$item) {\n        $total += $item['price'] * $item['quantity'];\n    }\n    return $total;\n}\n\n// Example usage:\naddToCart(1, 2); // Add product with id 1 to cart in quantity of 2\nupdateQuantity(1, 3); // Update quantity of product with id 1 to 3\nremoveFromCart(1); // Remove product with id 1 from cart\n\necho \"Total cost: \" . getTotalCost(); // Output total cost of items in cart\n?>\n```"]}
