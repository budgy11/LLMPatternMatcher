{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nThis is an example of a simple user login function in PHP. This code includes functions for registering new users, logging in existing users, and checking if a user is already logged in.\n\n**`database.php`: Database Connection File**\n---------------------------------------------\n\nCreate a file named `database.php` with the following content:\n\n```php\n<?php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"login_system\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n\n**`functions.php`: Login and Registration Functions**\n---------------------------------------------------\n\nCreate a file named `functions.php` with the following content:\n\n```php\n<?php\ninclude 'database.php';\n\nfunction registerUser($username, $email, $password) {\n    global $conn;\n    \n    // Check if user already exists\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        return false;  // User already exists\n    }\n    \n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '\".md5($password).\"')\";\n    $conn->query($query);\n    \n    return true;\n}\n\nfunction loginUser($username, $password) {\n    global $conn;\n    \n    // Check if user exists\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        $user = $result->fetch_assoc();\n        \n        // Check password\n        if (md5($password) == $user['password']) {\n            return true;  // Login successful\n        } else {\n            return false;  // Incorrect password\n        }\n    } else {\n        return false;  // User does not exist\n    }\n}\n\nfunction isLoggedIn() {\n    global $conn;\n    \n    session_start();\n    \n    if (isset($_SESSION['username'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n?>\n```\n\n**`index.php`: Example Usage**\n------------------------------\n\nCreate a file named `index.php` with the following content:\n\n```php\n<?php\ninclude 'functions.php';\n\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    \n    if (registerUser($username, $email, $password)) {\n        echo \"Registration successful!\";\n    } else {\n        echo \"Username already exists.\";\n    }\n}\n\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    if (loginUser($username, $password)) {\n        session_start();\n        $_SESSION['username'] = $username;\n        \n        echo \"Login successful!\";\n    } else {\n        echo \"Incorrect username or password.\";\n    }\n}\n\nif (isLoggedIn()) {\n    echo \"You are currently logged in as \" . $_SESSION['username'];\n} else {\n    echo \"Please log in to access this page.\";\n}\n?>\n```\n\nThis is a basic example of how you can create user login functionality using PHP. Remember to replace the database credentials and table names with your own.\n\nNote: This code does not include any security measures such as password hashing, CSRF protection, or SQL injection prevention. You should consider implementing these features in your production environment.", "code_blocks": ["```php\n<?php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"login_system\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nfunction registerUser($username, $email, $password) {\n    global $conn;\n    \n    // Check if user already exists\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        return false;  // User already exists\n    }\n    \n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '\".md5($password).\"')\";\n    $conn->query($query);\n    \n    return true;\n}\n\nfunction loginUser($username, $password) {\n    global $conn;\n    \n    // Check if user exists\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        $user = $result->fetch_assoc();\n        \n        // Check password\n        if (md5($password) == $user['password']) {\n            return true;  // Login successful\n        } else {\n            return false;  // Incorrect password\n        }\n    } else {\n        return false;  // User does not exist\n    }\n}\n\nfunction isLoggedIn() {\n    global $conn;\n    \n    session_start();\n    \n    if (isset($_SESSION['username'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n?>\n```", "```php\n<?php\ninclude 'functions.php';\n\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    \n    if (registerUser($username, $email, $password)) {\n        echo \"Registration successful!\";\n    } else {\n        echo \"Username already exists.\";\n    }\n}\n\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    if (loginUser($username, $password)) {\n        session_start();\n        $_SESSION['username'] = $username;\n        \n        echo \"Login successful!\";\n    } else {\n        echo \"Incorrect username or password.\";\n    }\n}\n\nif (isLoggedIn()) {\n    echo \"You are currently logged in as \" . $_SESSION['username'];\n} else {\n    echo \"Please log in to access this page.\";\n}\n?>\n```"]}
