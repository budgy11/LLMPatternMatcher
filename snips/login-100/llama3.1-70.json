{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function using PHP, along with some basic security measures.\n\n**Note:** This is a simplified version and you should consider implementing more robust security features like hashing and salting for passwords in a production environment.\n\n**login.php**\n```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\nfunction login($username, $password) {\n    // Query to check user credentials\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $mysqli->query($query);\n\n    if ($result->num_rows == 1) {\n        // If user is found, return true and session variables\n        $row = $result->fetch_assoc();\n        $_SESSION['user_id'] = $row['id'];\n        $_SESSION['username'] = $row['username'];\n        return true;\n    } else {\n        // If user not found or password incorrect, return false\n        return false;\n    }\n}\n\n// Check if form has been submitted\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = md5($_POST['password']); // Use md5 for simplicity, consider using a more secure hashing function\n\n    // Call login function and check if user is logged in successfully\n    if (login($username, $password)) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n\n// Close connection\n$mysqli->close();\n\n?>\n```\n\n**index.html**\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Login Page</title>\n</head>\n<body>\n\n<form action=\"login.php\" method=\"post\">\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" name=\"login\" value=\"Login\">\n</form>\n\n</body>\n</html>\n```\n\n**dashboard.php**\n```php\n<?php\n\n// Check if user is logged in\nif (isset($_SESSION['user_id'])) {\n    echo 'Welcome, ' . $_SESSION['username'] . '!';\n\n} else {\n    header('Location: index.html');\n    exit();\n}\n\n?>\n```\nThis example demonstrates a basic login system using PHP and MySQL. When the form is submitted, it calls the `login` function which checks if the user credentials match those stored in the database.\n\n**Security Note:** This example uses `md5` for password hashing, which is not recommended as it's vulnerable to collisions. Consider using a more secure library like `password_hash()` and `password_verify()`.", "code_blocks": ["```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\nfunction login($username, $password) {\n    // Query to check user credentials\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $mysqli->query($query);\n\n    if ($result->num_rows == 1) {\n        // If user is found, return true and session variables\n        $row = $result->fetch_assoc();\n        $_SESSION['user_id'] = $row['id'];\n        $_SESSION['username'] = $row['username'];\n        return true;\n    } else {\n        // If user not found or password incorrect, return false\n        return false;\n    }\n}\n\n// Check if form has been submitted\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = md5($_POST['password']); // Use md5 for simplicity, consider using a more secure hashing function\n\n    // Call login function and check if user is logged in successfully\n    if (login($username, $password)) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n\n// Close connection\n$mysqli->close();\n\n?>\n```", null, "```php\n<?php\n\n// Check if user is logged in\nif (isset($_SESSION['user_id'])) {\n    echo 'Welcome, ' . $_SESSION['username'] . '!';\n\n} else {\n    header('Location: index.html');\n    exit();\n}\n\n?>\n```"]}
