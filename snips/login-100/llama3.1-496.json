{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function in PHP. This function will connect to your MySQL database and check if the provided username and password match with any record in the `users` table.\n\n**Note:** Make sure you have replaced `your_database_name`, `your_username`, `your_password` with your actual database credentials, and `localhost` with your actual server address if it's different. Also, make sure to replace `users` with the name of your users table.\n\n```php\n<?php\n\n// Database connection details\n$host = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database_name';\n\n// Create a database connection\n$conn = new mysqli($host, $username, $password, $dbname);\n\n// Check the connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the form data from the request\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // SQL query to select a user with matching username and password\n    $sql = \"SELECT * FROM users WHERE username='$username' AND password=MD5('$password')\";\n\n    // Execute the query\n    $result = $conn->query($sql);\n\n    // Check if there is a match\n    if ($result->num_rows > 0) {\n        // If a user with matching credentials exists, login and display a success message\n        while($row = $result->fetch_assoc()) {\n            echo \"Welcome, \" . $row[\"username\"] . \"! You have successfully logged in.\";\n            $_SESSION['logged_in'] = true;\n            $_SESSION['username'] = $row['username'];\n            // Redirect the user to another page\n            header(\"Location: dashboard.php\");\n        }\n    } else {\n        // If there is no match, display an error message\n        echo \"Invalid username or password!\";\n    }\n\n    // Close the connection\n    $conn->close();\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    login_user();\n} else {\n    // Display a login form if it's not submitted\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```\n\n**Example Use Case:**\n\nTo use this code, save it in a file named `login.php`. Then, create an HTML form with fields for the username and password. When you submit the form, it will call the `login_user` function to verify your credentials.\n\nHere's how you can use this code:\n\n```php\n// Create an index.html file and add the following code:\n<html>\n    <body>\n        <form action=\"login.php\" method=\"post\">\n            <label>Username:</label>\n            <input type=\"text\" name=\"username\"><br><br>\n            <label>Password:</label>\n            <input type=\"password\" name=\"password\"><br><br>\n            <input type=\"submit\" name=\"submit\" value=\"Login\">\n        </form>\n    </body>\n</html>\n```\n\nWhen you submit the form, it will redirect to `login.php` and call the `login_user` function. If your credentials are correct, it will display a success message and redirect you to another page named `dashboard.php`.", "code_blocks": ["```php\n<?php\n\n// Database connection details\n$host = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database_name';\n\n// Create a database connection\n$conn = new mysqli($host, $username, $password, $dbname);\n\n// Check the connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the form data from the request\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // SQL query to select a user with matching username and password\n    $sql = \"SELECT * FROM users WHERE username='$username' AND password=MD5('$password')\";\n\n    // Execute the query\n    $result = $conn->query($sql);\n\n    // Check if there is a match\n    if ($result->num_rows > 0) {\n        // If a user with matching credentials exists, login and display a success message\n        while($row = $result->fetch_assoc()) {\n            echo \"Welcome, \" . $row[\"username\"] . \"! You have successfully logged in.\";\n            $_SESSION['logged_in'] = true;\n            $_SESSION['username'] = $row['username'];\n            // Redirect the user to another page\n            header(\"Location: dashboard.php\");\n        }\n    } else {\n        // If there is no match, display an error message\n        echo \"Invalid username or password!\";\n    }\n\n    // Close the connection\n    $conn->close();\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    login_user();\n} else {\n    // Display a login form if it's not submitted\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```", "```php\n// Create an index.html file and add the following code:\n<html>\n    <body>\n        <form action=\"login.php\" method=\"post\">\n            <label>Username:</label>\n            <input type=\"text\" name=\"username\"><br><br>\n            <label>Password:</label>\n            <input type=\"password\" name=\"password\"><br><br>\n            <input type=\"submit\" name=\"submit\" value=\"Login\">\n        </form>\n    </body>\n</html>\n```"]}
