{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get user input from form submission\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for comparison\n    $hashed_password = md5($password);\n\n    // SQL query to select user data\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // User credentials are valid, login successful!\n        $_SESSION['username'] = $username;\n        header('Location: /dashboard');\n        exit();\n    } else {\n        // Invalid user credentials\n        echo \"Invalid username or password\";\n    }\n}\n\nif (isset($_POST['login'])) {\n    login_user();\n} else {\n    // Display login form\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n    <?php\n}\n\n$conn->close();\n\n?>\n```\nThis script uses the `mysqli` extension to connect to a MySQL database, and checks user credentials on form submission. If the login is successful, it sets the session variable `username` to the entered username, redirects the user to the `/dashboard` page, and exits.\n\n**Note:**\n\n* Make sure to replace `'your_host'`, `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n* This script uses MD5 hashing for password storage. You should use a more secure method like bcrypt or PBKDF2 instead.\n* The `$_SESSION['username']` variable is set on successful login, but you may want to add additional security measures (e.g., CSRF protection) in your production code.\n\nTo test this script, create an HTML file (`login.html`) with the following content:\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login</title>\n</head>\n<body>\n    <form action=\"login.php\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n</body>\n</html>\n```\nOpen the `login.php` file in your web browser and submit the form. If you've entered valid credentials, it should redirect you to the `/dashboard` page (which doesn't exist in this example, so just remove that line).\n\nRemember, this is a simplified example for demonstration purposes only. You should implement additional security measures, such as:\n\n* Using prepared statements instead of concatenating user input into SQL queries.\n* Hashing passwords securely using bcrypt or PBKDF2.\n* Implementing CSRF protection and authentication tokens to prevent attacks.\n\nAlways keep in mind that security best practices and code quality are essential when building production-ready applications.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get user input from form submission\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for comparison\n    $hashed_password = md5($password);\n\n    // SQL query to select user data\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // User credentials are valid, login successful!\n        $_SESSION['username'] = $username;\n        header('Location: /dashboard');\n        exit();\n    } else {\n        // Invalid user credentials\n        echo \"Invalid username or password\";\n    }\n}\n\nif (isset($_POST['login'])) {\n    login_user();\n} else {\n    // Display login form\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n    <?php\n}\n\n$conn->close();\n\n?>\n```", null]}
