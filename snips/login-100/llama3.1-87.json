{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare query to select user data\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    $stmt->bind_param(\"s\", $username);\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    // Fetch user data\n    $user_data = $result->fetch_assoc();\n\n    // Check if user exists and password matches\n    if ($user_data && password_verify($password, $user_data['password'])) {\n        // Login successful, set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['logged_in'] = true;\n        return true;\n    } else {\n        // Login failed, display error message\n        echo \"Invalid username or password\";\n        return false;\n    }\n}\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    login_user();\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\nThis code assumes that you have a MySQL database with a `users` table containing the user data. You'll need to replace the placeholders (`your_username`, `your_password`, etc.) with your actual database credentials.\n\nHere's how it works:\n\n1. The script connects to the database using the `mysqli` extension.\n2. When the login form is submitted, the `login_user()` function is called, which:\n\t* Retrieves the username and password from the request data.\n\t* Prepares a query to select user data based on the username.\n\t* Executes the query and fetches the user data.\n\t* Checks if the user exists and the password matches using `password_verify()`.\n\t* If login is successful, sets session variables for the username and logged-in status.\n3. The script displays the login form unless a form has been submitted (i.e., when it's time to check the credentials).\n4. Finally, the database connection is closed.\n\nNote that this code uses `password_verify()` to securely verify passwords, which was introduced in PHP 5.5. If you're using an earlier version of PHP, you'll need to use a different password hashing algorithm.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare query to select user data\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    $stmt->bind_param(\"s\", $username);\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    // Fetch user data\n    $user_data = $result->fetch_assoc();\n\n    // Check if user exists and password matches\n    if ($user_data && password_verify($password, $user_data['password'])) {\n        // Login successful, set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['logged_in'] = true;\n        return true;\n    } else {\n        // Login failed, display error message\n        echo \"Invalid username or password\";\n        return false;\n    }\n}\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    login_user();\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```"]}
