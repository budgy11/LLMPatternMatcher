{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function using PHP:\n```php\n<?php\n\n// Configuration settings\n$login_config = array(\n    'db_host' => 'localhost',\n    'db_user' => 'username',\n    'db_pass' => 'password',\n    'db_name' => 'database'\n);\n\n// Function to connect to the database\nfunction db_connect() {\n    global $login_config;\n    $conn = mysqli_connect($login_config['db_host'], $login_config['db_user'], $login_config['db_pass'], $login_config['db_name']);\n    if (!$conn) {\n        die('Could not connect: ' . mysqli_error());\n    }\n    return $conn;\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    global $login_config;\n    $conn = db_connect();\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 1) {\n        return true; // User logged in successfully\n    } else {\n        return false; // Incorrect login credentials\n    }\n}\n\n// Function to handle user login form submission\nfunction login_user() {\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n        if (check_login($username, $password)) {\n            // User logged in successfully\n            session_start();\n            $_SESSION['username'] = $username;\n            header('Location: index.php');\n            exit;\n        } else {\n            // Incorrect login credentials\n            echo 'Invalid username or password';\n        }\n    }\n}\n\n// Initialize the login function\nlogin_user();\n\n?>\n```\nThis code assumes you have a `users` table in your database with columns for `username` and `password`. You should replace the placeholder values in `$login_config` with your actual database credentials.\n\nHere's an explanation of how the code works:\n\n1. The `db_connect()` function connects to the database using the configuration settings.\n2. The `check_login()` function checks if the user has entered the correct login credentials by querying the `users` table.\n3. The `login_user()` function handles the form submission from the login page and calls `check_login()` to verify the user's credentials.\n4. If the user is logged in successfully, a session is started and the user is redirected to the `index.php` page.\n\nNote: This code uses the outdated `mysqli` extension. Consider using prepared statements with a more modern database library like PDO or MySQLi.\n\nAlso note that storing passwords in plain text (as shown in this example) is a security risk. You should store hashed versions of user passwords and hash new passwords before comparing them to stored hashes.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$login_config = array(\n    'db_host' => 'localhost',\n    'db_user' => 'username',\n    'db_pass' => 'password',\n    'db_name' => 'database'\n);\n\n// Function to connect to the database\nfunction db_connect() {\n    global $login_config;\n    $conn = mysqli_connect($login_config['db_host'], $login_config['db_user'], $login_config['db_pass'], $login_config['db_name']);\n    if (!$conn) {\n        die('Could not connect: ' . mysqli_error());\n    }\n    return $conn;\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    global $login_config;\n    $conn = db_connect();\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 1) {\n        return true; // User logged in successfully\n    } else {\n        return false; // Incorrect login credentials\n    }\n}\n\n// Function to handle user login form submission\nfunction login_user() {\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n        if (check_login($username, $password)) {\n            // User logged in successfully\n            session_start();\n            $_SESSION['username'] = $username;\n            header('Location: index.php');\n            exit;\n        } else {\n            // Incorrect login credentials\n            echo 'Invalid username or password';\n        }\n    }\n}\n\n// Initialize the login function\nlogin_user();\n\n?>\n```"]}
