{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n================================\n\nBelow is an example of a basic user login function written in PHP. This script uses a MySQL database to store usernames and passwords.\n\n### database.php (database connection file)\n\n```php\n<?php\n$host = 'localhost';\n$dbname = 'login_system';\n$username = 'root';\n$password = '';\n\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch(PDOException $e) {\n    echo \"Connection failed: \" . $e->getMessage();\n}\n\n?>\n```\n\n### login.php (user login file)\n\n```php\n<?php\nrequire_once 'database.php';\n\n// POST request from form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // SQL query to select username and password from database\n    $query = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $query->bindParam(':username', $username);\n    $query->execute();\n\n    if ($query->rowCount() > 0) {\n        // Get user data\n        $data = $query->fetch();\n        \n        // Verify password\n        if (password_verify($password, $data['password'])) {\n            $_SESSION['loggedin'] = true;\n            $_SESSION['username'] = $username;\n\n            echo \"Welcome, \" . $username . \"!\";\n        } else {\n            echo \"Incorrect password.\";\n        }\n    } else {\n        echo \"Username not found.\";\n    }\n}\n?>\n```\n\n### login.html (user input form)\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login</title>\n</head>\n<body>\n\n<form action=\"login.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n</body>\n</html>\n```\n\n### Explanation\n\nThis script assumes you have a MySQL database set up with a table called `users` that stores usernames and passwords. The password is stored hashed using the PHP `password_hash()` function.\n\nTo use this script:\n\n1. Save the database connection file (`database.php`) in a secure location.\n2. Create an HTML form (e.g., `login.html`) to input the user's username and password.\n3. Submit the form, which will send a POST request to the `login.php` file.\n4. In `login.php`, retrieve the user input using `$_POST[]`.\n5. Query the database for the user data using PDO prepared statements.\n6. Verify the password using PHP's built-in `password_verify()` function.\n\nRemember to replace the placeholders in `database.php` with your actual database credentials.", "code_blocks": ["```php\n<?php\n$host = 'localhost';\n$dbname = 'login_system';\n$username = 'root';\n$password = '';\n\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch(PDOException $e) {\n    echo \"Connection failed: \" . $e->getMessage();\n}\n\n?>\n```", "```php\n<?php\nrequire_once 'database.php';\n\n// POST request from form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // SQL query to select username and password from database\n    $query = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $query->bindParam(':username', $username);\n    $query->execute();\n\n    if ($query->rowCount() > 0) {\n        // Get user data\n        $data = $query->fetch();\n        \n        // Verify password\n        if (password_verify($password, $data['password'])) {\n            $_SESSION['loggedin'] = true;\n            $_SESSION['username'] = $username;\n\n            echo \"Welcome, \" . $username . \"!\";\n        } else {\n            echo \"Incorrect password.\";\n        }\n    } else {\n        echo \"Username not found.\";\n    }\n}\n?>\n```", null]}
