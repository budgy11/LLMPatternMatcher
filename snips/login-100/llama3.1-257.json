{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a basic user login system in PHP:\n\n**Database Setup**\n\nFirst, let's set up our database. We'll be using MySQL for this example.\n\n```sql\nCREATE TABLE users (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(50) NOT NULL UNIQUE,\n    password VARCHAR(255) NOT NULL\n);\n```\n\n**login.php file**\n```php\n<?php\n\n// Database credentials\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to hash and verify passwords\nfunction password_verify_hashed($password, $hashedPassword)\n{\n    return crypt($password, $hashedPassword) === $hashedPassword;\n}\n\n// Check if the user exists in the database\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n$stmt->bind_param(\"s\", $username);\n$stmt->execute();\n$result = $stmt->get_result();\n\nif ($result->num_rows > 0) {\n    while ($row = $result->fetch_assoc()) {\n        if (password_verify_hashed($password, $row['password'])) {\n            // Password is correct, let the user in\n            session_start();\n            $_SESSION['username'] = $username;\n            header(\"Location: index.php\");\n            exit;\n        }\n    }\n} else {\n    echo \"User not found.\";\n}\n\n// Close connection\n$conn->close();\n\n?>\n```\n\n**login_form.html (or your HTML form)**\n```html\n<form action=\"login.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\">Login</button>\n</form>\n```\n\n**index.php (optional, just a sample file to redirect to after login)**\n```php\n<?php\n\nsession_start();\n\nif (!isset($_SESSION['username'])) {\n    header(\"Location: login.html\");\n    exit;\n}\n\necho \"Hello, \".$_SESSION['username'].\"!\";\n\n?>\n```\nIn this example:\n\n1. The `login.php` script connects to the database and checks if the username exists.\n2. If the user exists, it uses the `password_verify_hashed()` function to verify the password against the hashed one in the database.\n3. If the password is correct, it starts a session and sets the `username` variable.\n4. The `login_form.html` file contains an HTML form that submits to `login.php`.\n5. The `index.php` file (optional) checks if the user has logged in and displays a greeting.\n\nRemember to replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials. \n\nNote: This is a basic example of how you can create a login system using PHP and MySQL. You should always store passwords securely, either by hashing them or using a more secure way like bcrypt.", "code_blocks": [null, "```php\n<?php\n\n// Database credentials\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to hash and verify passwords\nfunction password_verify_hashed($password, $hashedPassword)\n{\n    return crypt($password, $hashedPassword) === $hashedPassword;\n}\n\n// Check if the user exists in the database\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n$stmt->bind_param(\"s\", $username);\n$stmt->execute();\n$result = $stmt->get_result();\n\nif ($result->num_rows > 0) {\n    while ($row = $result->fetch_assoc()) {\n        if (password_verify_hashed($password, $row['password'])) {\n            // Password is correct, let the user in\n            session_start();\n            $_SESSION['username'] = $username;\n            header(\"Location: index.php\");\n            exit;\n        }\n    }\n} else {\n    echo \"User not found.\";\n}\n\n// Close connection\n$conn->close();\n\n?>\n```", null, "```php\n<?php\n\nsession_start();\n\nif (!isset($_SESSION['username'])) {\n    header(\"Location: login.html\");\n    exit;\n}\n\necho \"Hello, \".$_SESSION['username'].\"!\";\n\n?>\n```"]}
