{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function using PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration variables\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    // SQL query to select username and password from users table\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($sql);\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        // Get user data\n        $user_data = $result->fetch_assoc();\n        \n        // Create session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['id'] = $user_data['id'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to check if user is logged in\nfunction is_logged_in() {\n    if (isset($_SESSION['username']) && isset($_SESSION['id'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check for login form submission\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n// Check for logout\nif (isset($_GET['logout'])) {\n    session_destroy();\n    header('Location: index.php');\n    exit();\n}\n?>\n```\n**index.php**\n```php\n<?php\nrequire_once 'login.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login</title>\n</head>\n<body>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" name=\"login\" value=\"Login\">\n</form>\n\n<?php\nif (is_logged_in()) {\n    echo \"You are logged in as: \" . $_SESSION['username'];\n} else {\n    ?>\n    <?php } ?>\n```\nThis code creates a basic login system with two functions:\n\n1. `login_user($username, $password)`: This function takes the username and password as input, queries the database to verify the credentials, and returns `true` if the user exists and the password is correct.\n2. `is_logged_in()`: This function checks if a session variable for the user's ID and username is set.\n\nThe `index.php` file contains a simple login form that submits the username and password to the same PHP script using a POST request. If the user's credentials are valid, they are redirected to a dashboard page (`dashboard.php`). If the user clicks on the logout link, their session variables are destroyed, and they are redirected back to the login page.\n\nNote: This is a basic example and you should never store passwords in plain text. In a real-world application, you would use a secure password hashing algorithm like bcrypt or Argon2 to hash the password before storing it in the database.\n\nAlso, this code does not handle errors well and should be improved with proper error handling mechanisms.\n\nPlease modify the `login.php` file to match your actual database schema and credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    // SQL query to select username and password from users table\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($sql);\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        // Get user data\n        $user_data = $result->fetch_assoc();\n        \n        // Create session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['id'] = $user_data['id'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to check if user is logged in\nfunction is_logged_in() {\n    if (isset($_SESSION['username']) && isset($_SESSION['id'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check for login form submission\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n// Check for logout\nif (isset($_GET['logout'])) {\n    session_destroy();\n    header('Location: index.php');\n    exit();\n}\n?>\n```", "```php\n<?php\nrequire_once 'login.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login</title>\n</head>\n<body>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" name=\"login\" value=\"Login\">\n</form>\n\n<?php\nif (is_logged_in()) {\n    echo \"You are logged in as: \" . $_SESSION['username'];\n} else {\n    ?>\n    <?php } ?>\n```"]}
