{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function using PHP:\n\n**login.php**\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'myusername';\n$password = 'mypassword';\n\n// Create a new PDO instance\ntry {\n    $pdo = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo \"Error connecting to database: \" . $e->getMessage();\n    exit;\n}\n\n// Define the login function\nfunction login($email, $password) {\n    // Sanitize input\n    $email = htmlspecialchars($email);\n    $password = htmlspecialchars($password);\n\n    // Prepare SQL query\n    $stmt = $pdo->prepare(\"SELECT * FROM users WHERE email = :email AND password = :password\");\n    $stmt->bindParam(':email', $email);\n    $stmt->bindParam(':password', $password);\n\n    // Execute the query\n    $stmt->execute();\n\n    // Get the result\n    $result = $stmt->fetch();\n\n    // If a matching user is found, return their data\n    if ($result) {\n        return array(\n            'id' => $result['id'],\n            'email' => $result['email'],\n            'username' => $result['username']\n        );\n    } else {\n        return null;\n    }\n}\n\n// Handle login form submission\nif (isset($_POST['login'])) {\n    // Get the email and password from the form\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Login the user\n    $user_data = login($email, $password);\n\n    if ($user_data) {\n        // User is logged in, store their data in a session variable\n        $_SESSION['user_id'] = $user_data['id'];\n        $_SESSION['username'] = $user_data['username'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n}\n\n?>\n```\n**login.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login</title>\n</head>\n<body>\n    <h1>Login Form</h1>\n    <form action=\"login.php\" method=\"post\">\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\" name=\"login\">\n    </form>\n</body>\n</html>\n```\n**dashboard.php**\n```php\n<?php\n// Check if the user is logged in\nif (isset($_SESSION['user_id'])) {\n    echo \"Welcome, \" . $_SESSION['username'];\n} else {\n    header('Location: login.php');\n    exit;\n}\n?>\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Dashboard</title>\n</head>\n<body>\n    <!-- Dashboard content here -->\n</body>\n</html>\n```\nThis example assumes you have a `users` table in your database with the following columns:\n\n* `id` (primary key)\n* `email`\n* `password` (hashed with a secure algorithm like bcrypt)\n\nNote that this is just a basic example and you should implement additional security measures, such as:\n\n* Password hashing using a library like PHPass\n* CSRF protection\n* Input validation and sanitization\n* Secure password storage\n\nAlso, make sure to update the database connection settings to match your actual database configuration.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'myusername';\n$password = 'mypassword';\n\n// Create a new PDO instance\ntry {\n    $pdo = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo \"Error connecting to database: \" . $e->getMessage();\n    exit;\n}\n\n// Define the login function\nfunction login($email, $password) {\n    // Sanitize input\n    $email = htmlspecialchars($email);\n    $password = htmlspecialchars($password);\n\n    // Prepare SQL query\n    $stmt = $pdo->prepare(\"SELECT * FROM users WHERE email = :email AND password = :password\");\n    $stmt->bindParam(':email', $email);\n    $stmt->bindParam(':password', $password);\n\n    // Execute the query\n    $stmt->execute();\n\n    // Get the result\n    $result = $stmt->fetch();\n\n    // If a matching user is found, return their data\n    if ($result) {\n        return array(\n            'id' => $result['id'],\n            'email' => $result['email'],\n            'username' => $result['username']\n        );\n    } else {\n        return null;\n    }\n}\n\n// Handle login form submission\nif (isset($_POST['login'])) {\n    // Get the email and password from the form\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Login the user\n    $user_data = login($email, $password);\n\n    if ($user_data) {\n        // User is logged in, store their data in a session variable\n        $_SESSION['user_id'] = $user_data['id'];\n        $_SESSION['username'] = $user_data['username'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n}\n\n?>\n```", null, "```php\n<?php\n// Check if the user is logged in\nif (isset($_SESSION['user_id'])) {\n    echo \"Welcome, \" . $_SESSION['username'];\n} else {\n    header('Location: login.php');\n    exit;\n}\n?>\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Dashboard</title>\n</head>\n<body>\n    <!-- Dashboard content here -->\n</body>\n</html>\n```"]}
