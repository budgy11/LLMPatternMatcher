{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\n$database = array(\n  'host' => 'localhost',\n  'username' => 'your_username',\n  'password' => 'your_password',\n  'database' => 'your_database'\n);\n\n// Connect to database\n$conn = new mysqli($database['host'], $database['username'], $database['password'], $database['database']);\n\nif ($conn->connect_error) {\n  die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if user exists in database\nfunction checkUser($username, $password) {\n  global $conn;\n  $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n  $result = $conn->query($query);\n\n  if ($result->num_rows > 0) {\n    return true; // User exists\n  } else {\n    return false; // User does not exist\n  }\n}\n\n// Login function\nfunction login($username, $password) {\n  global $conn;\n  if (checkUser($username, $password)) {\n    // Get user ID from database\n    $query = \"SELECT id FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = $conn->query($query);\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Store session variables\n    $_SESSION['username'] = $username;\n    $_SESSION['user_id'] = $user_id;\n\n    return true; // Login successful\n  } else {\n    return false; // Login failed\n  }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (login($username, $password)) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Login failed. Please try again.\";\n  }\n}\n\n// Close connection\n$conn->close();\n?>\n```\n**index.php**\n```php\n<?php\n// Include login function\ninclude 'login.php';\n\n// Display login form\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <input type=\"submit\" name=\"login\" value=\"Login\">\n</form>\n\n<?php\n// Display message if login was successful or failed\nif (isset($_SESSION['username'])) {\n  echo \"Welcome, \" . $_SESSION['username'] . \"! You are now logged in.\";\n} else {\n  echo \"Not logged in. Please log in to access this page.\";\n}\n?>\n```\nThis code creates a basic user login system using PHP and MySQL. The `login.php` file contains the login function, which checks if the username and password are valid by querying the database. If they are, it stores the user's ID in a session variable and returns true to indicate that the login was successful.\n\nThe `index.php` file displays a simple login form that posts the username and password to the same page when submitted. If the login is successful, it displays a welcome message with the user's username. If the login fails, it displays an error message.\n\nNote: This code is for illustrative purposes only and should not be used in production without proper security measures (e.g., hashing passwords, validating user input).", "code_blocks": ["```php\n<?php\n// Configuration\n$database = array(\n  'host' => 'localhost',\n  'username' => 'your_username',\n  'password' => 'your_password',\n  'database' => 'your_database'\n);\n\n// Connect to database\n$conn = new mysqli($database['host'], $database['username'], $database['password'], $database['database']);\n\nif ($conn->connect_error) {\n  die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if user exists in database\nfunction checkUser($username, $password) {\n  global $conn;\n  $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n  $result = $conn->query($query);\n\n  if ($result->num_rows > 0) {\n    return true; // User exists\n  } else {\n    return false; // User does not exist\n  }\n}\n\n// Login function\nfunction login($username, $password) {\n  global $conn;\n  if (checkUser($username, $password)) {\n    // Get user ID from database\n    $query = \"SELECT id FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = $conn->query($query);\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Store session variables\n    $_SESSION['username'] = $username;\n    $_SESSION['user_id'] = $user_id;\n\n    return true; // Login successful\n  } else {\n    return false; // Login failed\n  }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (login($username, $password)) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Login failed. Please try again.\";\n  }\n}\n\n// Close connection\n$conn->close();\n?>\n```", "```php\n<?php\n// Include login function\ninclude 'login.php';\n\n// Display login form\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <input type=\"submit\" name=\"login\" value=\"Login\">\n</form>\n\n<?php\n// Display message if login was successful or failed\nif (isset($_SESSION['username'])) {\n  echo \"Welcome, \" . $_SESSION['username'] . \"! You are now logged in.\";\n} else {\n  echo \"Not logged in. Please log in to access this page.\";\n}\n?>\n```"]}
