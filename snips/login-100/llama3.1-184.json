{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Config file for database connection and other settings\nrequire 'config.php';\n\n// Check if form has been submitted\nif (isset($_POST['username']) && isset($_POST['password'])) {\n  // Get username and password from form\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Query database to check if user exists\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($conn, $query);\n\n  // Check if query was successful\n  if (mysqli_num_rows($result) > 0) {\n    // Get user data from result\n    $row = mysqli_fetch_assoc($result);\n    // Hashed password stored in database for security\n    $hashed_password = $row['password'];\n\n    // Compare hashed password with input password\n    if (password_verify($password, $hashed_password)) {\n      // If passwords match, log user in and set session variables\n      $_SESSION['username'] = $username;\n      $_SESSION['logged_in'] = true;\n\n      echo \"Login successful! You are now logged in.\";\n    } else {\n      echo \"Incorrect password. Please try again.\";\n    }\n  } else {\n    echo \"Username not found. Please try again.\";\n  }\n\n} // end if form has been submitted\n\n// Check if user is already logged in\nif (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] == true) {\n  echo \"You are already logged in.\";\n}\n?>\n```\n**config.php**\n```php\n<?php\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\n// Error reporting\nerror_reporting(E_ALL);\nini_set('display_errors', 'On');\n?>\n```\n**form.html**\n```html\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Login</title>\n  </head>\n  <body>\n    <h1>Login</h1>\n    <form action=\"login.php\" method=\"post\">\n      <label>Username:</label>\n      <input type=\"text\" name=\"username\"><br><br>\n      <label>Password:</label>\n      <input type=\"password\" name=\"password\"><br><br>\n      <button type=\"submit\">Login</button>\n    </form>\n  </body>\n</html>\n```\nHere's how the code works:\n\n1. The `login.php` file checks if a form has been submitted.\n2. If a form has been submitted, it retrieves the username and password from the form using `$_POST`.\n3. It queries the database to check if the user exists, using the provided username.\n4. If the query is successful, it compares the hashed password stored in the database with the input password using `password_verify()`.\n5. If the passwords match, it logs the user in and sets session variables (`$_SESSION['username']` and `$_SESSION['logged_in']`).\n6. If the user is already logged in, it displays a message indicating this.\n\nNote that this code uses the `mysqli` extension for database connectivity, which is recommended over `mysql` extension as it provides better security features. Additionally, it uses password hashing using `password_verify()` to securely store and compare passwords.\n\nAlso, make sure to replace `\"localhost\"`, `\"username\"`, `\"password\"`, and `\"database\"` in `config.php` with your actual database connection settings.", "code_blocks": ["```php\n<?php\n// Config file for database connection and other settings\nrequire 'config.php';\n\n// Check if form has been submitted\nif (isset($_POST['username']) && isset($_POST['password'])) {\n  // Get username and password from form\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Query database to check if user exists\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($conn, $query);\n\n  // Check if query was successful\n  if (mysqli_num_rows($result) > 0) {\n    // Get user data from result\n    $row = mysqli_fetch_assoc($result);\n    // Hashed password stored in database for security\n    $hashed_password = $row['password'];\n\n    // Compare hashed password with input password\n    if (password_verify($password, $hashed_password)) {\n      // If passwords match, log user in and set session variables\n      $_SESSION['username'] = $username;\n      $_SESSION['logged_in'] = true;\n\n      echo \"Login successful! You are now logged in.\";\n    } else {\n      echo \"Incorrect password. Please try again.\";\n    }\n  } else {\n    echo \"Username not found. Please try again.\";\n  }\n\n} // end if form has been submitted\n\n// Check if user is already logged in\nif (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] == true) {\n  echo \"You are already logged in.\";\n}\n?>\n```", "```php\n<?php\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\n// Error reporting\nerror_reporting(E_ALL);\nini_set('display_errors', 'On');\n?>\n```", null]}
