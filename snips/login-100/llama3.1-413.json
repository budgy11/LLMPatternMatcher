{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login system using PHP:\n\n**`login.php`**\n```php\n<?php\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Connect to database\n$mysqli = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n    exit();\n}\n\n// Define function to validate login credentials\nfunction validateLogin($username, $password) {\n    global $mysqli;\n\n    // Prepare SQL query to select user data\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ?\");\n\n    // Bind parameters\n    $stmt->bind_param('s', $username);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    // Check if user exists and password matches\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            if (password_verify($password, $row['password'])) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\n// Define function to login user\nfunction loginUser($username, $password) {\n    global $mysqli;\n\n    // Validate login credentials\n    if (validateLogin($username, $password)) {\n        // If valid, set session variables and redirect to home page\n        $_SESSION['username'] = $username;\n        header('Location: index.php');\n        exit();\n    } else {\n        // If invalid, display error message\n        echo \"Invalid username or password\";\n    }\n}\n?>\n```\n\n**`index.php`**\n```php\n<?php\nrequire_once 'login.php';\n\n// Check if user is logged in\nif (!isset($_SESSION['username'])) {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n\n    <?php\n} else {\n    // Display welcome message for logged-in user\n    echo \"Welcome, \".$_SESSION['username'].\"!\";\n}\n?>\n```\nThis code uses a simple password hashing algorithm (PHP's `password_hash()` and `password_verify()`) to securely store passwords in the database. The `validateLogin()` function checks the username and password against the stored values in the database. If valid, it sets session variables for the logged-in user and redirects them to the home page.\n\n**Note:**\n\n*   This is a simplified example and you should consider implementing additional security measures such as:\n    *   Using a secure connection (HTTPS) for your website.\n    *   Validating user input data on both client-side and server-side.\n    *   Implementing rate limiting and IP blocking to prevent brute-force attacks.\n    *   Storing passwords securely using a library like BCrypt or Argon2.\n*   Make sure to replace the placeholders (`$db_host`, `$db_username`, etc.) with your actual database credentials.", "code_blocks": ["```php\n<?php\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Connect to database\n$mysqli = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n    exit();\n}\n\n// Define function to validate login credentials\nfunction validateLogin($username, $password) {\n    global $mysqli;\n\n    // Prepare SQL query to select user data\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ?\");\n\n    // Bind parameters\n    $stmt->bind_param('s', $username);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    // Check if user exists and password matches\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            if (password_verify($password, $row['password'])) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\n// Define function to login user\nfunction loginUser($username, $password) {\n    global $mysqli;\n\n    // Validate login credentials\n    if (validateLogin($username, $password)) {\n        // If valid, set session variables and redirect to home page\n        $_SESSION['username'] = $username;\n        header('Location: index.php');\n        exit();\n    } else {\n        // If invalid, display error message\n        echo \"Invalid username or password\";\n    }\n}\n?>\n```", "```php\n<?php\nrequire_once 'login.php';\n\n// Check if user is logged in\nif (!isset($_SESSION['username'])) {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n\n    <?php\n} else {\n    // Display welcome message for logged-in user\n    echo \"Welcome, \".$_SESSION['username'].\"!\";\n}\n?>\n```"]}
