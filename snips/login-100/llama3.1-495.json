{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n```php\n<?php\n\n// Configuration settings\n$config = array(\n    'db_host' => 'localhost',\n    'db_name' => 'my_database',\n    'db_user' => 'my_username',\n    'db_password' => 'my_password'\n);\n\nfunction connect_to_db() {\n    // Connect to the database\n    $conn = mysqli_connect($config['db_host'], $config['db_user'], $config['db_password'], $config['db_name']);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\nfunction login_user($username, $password) {\n    // Connect to the database\n    $conn = connect_to_db();\n\n    // Check if username and password are set\n    if (empty($username) || empty($password)) {\n        echo 'Error: Username and password must be filled out.';\n        return false;\n    }\n\n    // Prepare query to check for valid user\n    $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ? AND password = ?\");\n    mysqli_stmt_bind_param($stmt, \"ss\", $username, md5($password));\n    mysqli_stmt_execute($stmt);\n\n    // Check if user is found\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) == 1) {\n        return true;\n    } else {\n        echo 'Error: Invalid username or password.';\n        return false;\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\nfunction register_user($username, $password) {\n    // Connect to the database\n    $conn = connect_to_db();\n\n    // Check if username is already taken\n    $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ?\");\n    mysqli_stmt_bind_param($stmt, \"s\", $username);\n    mysqli_stmt_execute($stmt);\n\n    // Check if user already exists\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) == 1) {\n        echo 'Error: Username is already taken.';\n        return false;\n    }\n\n    // Prepare query to insert new user\n    $stmt = mysqli_prepare($conn, \"INSERT INTO users (username, password) VALUES (?, ?)\");\n    mysqli_stmt_bind_param($stmt, \"ss\", $username, md5($password));\n    mysqli_stmt_execute($stmt);\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\nif (isset($_POST['login'])) {\n    if (login_user($username, $password)) {\n        echo 'Login successful!';\n    } else {\n        echo 'Error: Invalid username or password.';\n    }\n} elseif (isset($_POST['register'])) {\n    register_user($username, $password);\n}\n\n?>\n```\nThis code defines three functions:\n\n*   `connect_to_db()`: Establishes a connection to the database using the configuration settings.\n*   `login_user(username, password)`: Checks if the provided username and password match an existing user in the database. Returns `true` if login is successful, `false` otherwise.\n*   `register_user(username, password)`: Creates a new user with the given username and password.\n\nIn the example usage section, we demonstrate how to call these functions using POST requests. When the form is submitted with the \"login\" button, it calls the `login_user()` function with the provided username and password. If the login is successful, it displays a success message; otherwise, it shows an error message.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$config = array(\n    'db_host' => 'localhost',\n    'db_name' => 'my_database',\n    'db_user' => 'my_username',\n    'db_password' => 'my_password'\n);\n\nfunction connect_to_db() {\n    // Connect to the database\n    $conn = mysqli_connect($config['db_host'], $config['db_user'], $config['db_password'], $config['db_name']);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\nfunction login_user($username, $password) {\n    // Connect to the database\n    $conn = connect_to_db();\n\n    // Check if username and password are set\n    if (empty($username) || empty($password)) {\n        echo 'Error: Username and password must be filled out.';\n        return false;\n    }\n\n    // Prepare query to check for valid user\n    $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ? AND password = ?\");\n    mysqli_stmt_bind_param($stmt, \"ss\", $username, md5($password));\n    mysqli_stmt_execute($stmt);\n\n    // Check if user is found\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) == 1) {\n        return true;\n    } else {\n        echo 'Error: Invalid username or password.';\n        return false;\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\nfunction register_user($username, $password) {\n    // Connect to the database\n    $conn = connect_to_db();\n\n    // Check if username is already taken\n    $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ?\");\n    mysqli_stmt_bind_param($stmt, \"s\", $username);\n    mysqli_stmt_execute($stmt);\n\n    // Check if user already exists\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) == 1) {\n        echo 'Error: Username is already taken.';\n        return false;\n    }\n\n    // Prepare query to insert new user\n    $stmt = mysqli_prepare($conn, \"INSERT INTO users (username, password) VALUES (?, ?)\");\n    mysqli_stmt_bind_param($stmt, \"ss\", $username, md5($password));\n    mysqli_stmt_execute($stmt);\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\nif (isset($_POST['login'])) {\n    if (login_user($username, $password)) {\n        echo 'Login successful!';\n    } else {\n        echo 'Error: Invalid username or password.';\n    }\n} elseif (isset($_POST['register'])) {\n    register_user($username, $password);\n}\n\n?>\n```"]}
