{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login function in PHP:\n\n**users.php**\n```php\n<?php\n\n// Define the database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Check if POST request has been made\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        // Get the username and password from the form\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Query to check user credentials\n        $query = \"SELECT * FROM users WHERE username='$username' AND password=MD5('$password')\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            // Get the row of data from the result set\n            $row = $result->fetch_assoc();\n\n            // Create a session for the user\n            $_SESSION['username'] = $row['username'];\n            $_SESSION['logged_in'] = true;\n\n            return true;\n        } else {\n            return false;\n        }\n    } else {\n        return false; // If not a POST request, don't proceed\n    }\n}\n\nfunction logout_user() {\n    session_destroy();\n}\n\n// Call the login function if the user submits the form\nif (isset($_POST['login'])) {\n    $result = login_user();\n\n    if ($result) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n} ?>\n```\n**index.php**\n```php\n<?php\n\n// Include the users.php file\ninclude 'users.php';\n\n?>\n\n<!-- Login form -->\n<form action=\"\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\" name=\"login\">Login</button>\n</form>\n\n<?php\n// Check if the user is logged in\nif (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] == true) {\n    echo \"You are currently logged in as \" . $_SESSION['username'];\n} else {\n    // Display a message to login or register\n    echo \"Please login or register to access this page\";\n}\n?>\n```\nHere's how the code works:\n\n1. The `login_user()` function is called when the user submits the form with a POST request.\n2. It checks if there are any errors in connecting to the database.\n3. If the username and password match a row in the `users` table, it creates a session for the user by setting `$_SESSION['username']` and `$_SESSION['logged_in']`.\n4. The `logout_user()` function is called when the user clicks on the logout link.\n\n**Security notes:**\n\n* This code stores passwords in plain text. In a real-world application, you should store hashed versions of passwords using a library like PHPass.\n* This code uses MD5 to hash the password for verification. While it's not recommended to use MD5 for security reasons (it's been shown to be insecure), we're using it here only for demonstration purposes.\n* You should never hard-code sensitive information like database credentials or passwords in your code.\n\n**Remember:**\n\nThis is a basic example and you should consider implementing proper error handling, validation, and security measures when creating a production-ready login system.", "code_blocks": ["```php\n<?php\n\n// Define the database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Check if POST request has been made\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        // Get the username and password from the form\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Query to check user credentials\n        $query = \"SELECT * FROM users WHERE username='$username' AND password=MD5('$password')\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            // Get the row of data from the result set\n            $row = $result->fetch_assoc();\n\n            // Create a session for the user\n            $_SESSION['username'] = $row['username'];\n            $_SESSION['logged_in'] = true;\n\n            return true;\n        } else {\n            return false;\n        }\n    } else {\n        return false; // If not a POST request, don't proceed\n    }\n}\n\nfunction logout_user() {\n    session_destroy();\n}\n\n// Call the login function if the user submits the form\nif (isset($_POST['login'])) {\n    $result = login_user();\n\n    if ($result) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n} ?>\n```", "```php\n<?php\n\n// Include the users.php file\ninclude 'users.php';\n\n?>\n\n<!-- Login form -->\n<form action=\"\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\" name=\"login\">Login</button>\n</form>\n\n<?php\n// Check if the user is logged in\nif (isset($_SESSION['logged_in']) && $_SESSION['logged_in'] == true) {\n    echo \"You are currently logged in as \" . $_SESSION['username'];\n} else {\n    // Display a message to login or register\n    echo \"Please login or register to access this page\";\n}\n?>\n```"]}
