{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP and MySQL:\n\n**users.php**\n```php\n<?php\n\n// Configuration settings\n$database_host = 'localhost';\n$database_username = 'your_database_username';\n$database_password = 'your_database_password';\n$database_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($database_host, $database_username, $database_password, $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    global $conn;\n\n    // Prepare SQL query\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n\n    // Prepare statement\n    $stmt = $conn->prepare($sql);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    // If user exists and password is correct, return true\n    if ($result->num_rows > 0) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to register new user\nfunction register_user($username, $password) {\n    global $conn;\n\n    // Prepare SQL query\n    $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n\n    // Prepare statement\n    $stmt = $conn->prepare($sql);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n?>\n```\n**login.php**\n```php\n<?php\n\nrequire_once 'users.php';\n\n// Check if user is logged in\nif (isset($_SESSION['username'])) {\n    header('Location: dashboard.php');\n    exit;\n}\n\n// Handle login form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Check user login credentials\n    if (check_login($username, $password)) {\n        $_SESSION['username'] = $username;\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n?>\n\n<!-- Login form -->\n<form action=\"<?php echo $_SERVER[\"PHP_SELF\"]; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```\n**register.php**\n```php\n<?php\n\nrequire_once 'users.php';\n\n// Check if user is logged in\nif (isset($_SESSION['username'])) {\n    header('Location: dashboard.php');\n    exit;\n}\n\n// Handle registration form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Register new user\n    if (register_user($username, $password)) {\n        echo \"User created successfully\";\n    } else {\n        echo \"Error creating user\";\n    }\n}\n\n?>\n\n<!-- Registration form -->\n<form action=\"<?php echo $_SERVER[\"PHP_SELF\"]; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```\nThis code assumes you have a `users` table in your database with the following structure:\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  password VARCHAR(255)\n);\n```\nThe `check_login()` function takes two parameters: `$username` and `$password`. It checks if the user exists in the database and if the password is correct. If both conditions are true, it returns `true`.\n\nThe `register_user()` function takes two parameters: `$username` and `$password`. It inserts a new user into the database with the given username and password.\n\nIn the `login.php` file, we check if the user is already logged in by checking if there is a session variable set. If not, we handle the login form submission and call the `check_login()` function to verify the user's credentials.\n\nIn the `register.php` file, we also check if the user is already logged in. If not, we handle the registration form submission and call the `register_user()` function to create a new user.\n\nNote that this is a basic example and you should consider implementing additional security measures such as password hashing and salting.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$database_host = 'localhost';\n$database_username = 'your_database_username';\n$database_password = 'your_database_password';\n$database_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($database_host, $database_username, $database_password, $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    global $conn;\n\n    // Prepare SQL query\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n\n    // Prepare statement\n    $stmt = $conn->prepare($sql);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    // If user exists and password is correct, return true\n    if ($result->num_rows > 0) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to register new user\nfunction register_user($username, $password) {\n    global $conn;\n\n    // Prepare SQL query\n    $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n\n    // Prepare statement\n    $stmt = $conn->prepare($sql);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n?>\n```", "```php\n<?php\n\nrequire_once 'users.php';\n\n// Check if user is logged in\nif (isset($_SESSION['username'])) {\n    header('Location: dashboard.php');\n    exit;\n}\n\n// Handle login form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Check user login credentials\n    if (check_login($username, $password)) {\n        $_SESSION['username'] = $username;\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n?>\n\n<!-- Login form -->\n<form action=\"<?php echo $_SERVER[\"PHP_SELF\"]; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```", "```php\n<?php\n\nrequire_once 'users.php';\n\n// Check if user is logged in\nif (isset($_SESSION['username'])) {\n    header('Location: dashboard.php');\n    exit;\n}\n\n// Handle registration form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Register new user\n    if (register_user($username, $password)) {\n        echo \"User created successfully\";\n    } else {\n        echo \"Error creating user\";\n    }\n}\n\n?>\n\n<!-- Registration form -->\n<form action=\"<?php echo $_SERVER[\"PHP_SELF\"]; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```", null]}
