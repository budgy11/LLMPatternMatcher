{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function using PHP:\n```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check for errors\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the username and password from the form data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for security\n    $hashed_password = hash('sha256', $password);\n\n    // SQL query to select user from database where username and hashed password match\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // User exists, log them in\n        session_start();\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n\n        // Redirect to protected page (e.g. dashboard)\n        header(\"Location: dashboard.php\");\n    } else {\n        // Incorrect username or password\n        echo \"Incorrect username or password\";\n    }\n}\n\n// Check if the login form has been submitted\nif (isset($_POST['login'])) {\n    login_user();\n}\n?>\n```\n**Note:** This is a basic example and should not be used in production without proper security measures. In particular:\n\n* The database connection settings should be kept secret to prevent unauthorized access.\n* The password hashing function (`hash('sha256')`) is simple and can be easily broken by determined attackers. Consider using a more secure library like `password_hash()` instead.\n* This example does not handle cases where the user has forgotten their password or wants to reset it.\n\n**Example use case:**\n\nIn your HTML form, you would call the login function when the user submits the form:\n```html\n<form action=\"login.php\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\" name=\"login\">Login</button>\n</form>\n```\nThis would call the `login_user()` function when the form is submitted, which in turn checks the user's credentials against the database and logs them in if they are correct.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check for errors\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the username and password from the form data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for security\n    $hashed_password = hash('sha256', $password);\n\n    // SQL query to select user from database where username and hashed password match\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // User exists, log them in\n        session_start();\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n\n        // Redirect to protected page (e.g. dashboard)\n        header(\"Location: dashboard.php\");\n    } else {\n        // Incorrect username or password\n        echo \"Incorrect username or password\";\n    }\n}\n\n// Check if the login form has been submitted\nif (isset($_POST['login'])) {\n    login_user();\n}\n?>\n```", null]}
