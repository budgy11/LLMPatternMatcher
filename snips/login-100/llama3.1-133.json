{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**`login.php`**\n```php\n<?php\n\n// Configuration variables\n$username_db = \"your_database_username\";\n$password_db = \"your_database_password\";\n$database_name = \"your_database_name\";\n\n// Connect to the database\n$conn = new mysqli($username_db, $password_db, \"\", $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define variables for form data\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Check if the username and password are set\nif (empty($username) || empty($password)) {\n    echo \"Both username and password fields must be filled\";\n} else {\n\n    // Hash the password using a library like bcrypt\n    $hashed_password = crypt($password, '$2y$10$' . substr(md5(uniqid(mt_rand(), true)), 0, 22));\n\n    // Prepare and execute query to check if username exists and password matches\n    $sql = \"SELECT * FROM users WHERE username=? AND password=?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $hashed_password);\n\n    $result = $stmt->execute();\n    if (!$result) {\n        echo \"Error executing query: \" . $conn->error;\n    } else {\n\n        // If the username and password are correct\n        if ($result->num_rows > 0) {\n\n            // Get user data from the database\n            while ($row = $result->fetch_assoc()) {\n                $_SESSION['username'] = $row['username'];\n                $_SESSION['user_id'] = $row['id'];\n\n                // Login successful, redirect to dashboard or other page\n                header(\"Location: dashboard.php\");\n                exit;\n            }\n        } else {\n\n            // If username and password do not match\n            echo \"Invalid username or password\";\n        }\n    }\n\n    // Close the prepared statement\n    $stmt->close();\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n**`index.html`**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n<body>\n\n<form action=\"login.php\" method=\"post\">\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n</body>\n</html>\n```\nThis example uses the following libraries:\n\n* `mysqli` for database connection\n* `crypt` for password hashing (using bcrypt)\n* `md5` and `uniqid` for generating a salt\n\n**Note:**\n\n* This is just an example, you should use a more secure way to store passwords in your production environment.\n* This code assumes that the user table has columns named `username`, `password`, and `id`.\n* The password is hashed using bcrypt with a 22-character salt generated from `md5` and `uniqid`. You can adjust this to suit your specific needs.\n\nRemember to replace the placeholders in the configuration variables (`$username_db`, `$password_db`, `$database_name`) with your actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$username_db = \"your_database_username\";\n$password_db = \"your_database_password\";\n$database_name = \"your_database_name\";\n\n// Connect to the database\n$conn = new mysqli($username_db, $password_db, \"\", $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define variables for form data\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Check if the username and password are set\nif (empty($username) || empty($password)) {\n    echo \"Both username and password fields must be filled\";\n} else {\n\n    // Hash the password using a library like bcrypt\n    $hashed_password = crypt($password, '$2y$10$' . substr(md5(uniqid(mt_rand(), true)), 0, 22));\n\n    // Prepare and execute query to check if username exists and password matches\n    $sql = \"SELECT * FROM users WHERE username=? AND password=?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $hashed_password);\n\n    $result = $stmt->execute();\n    if (!$result) {\n        echo \"Error executing query: \" . $conn->error;\n    } else {\n\n        // If the username and password are correct\n        if ($result->num_rows > 0) {\n\n            // Get user data from the database\n            while ($row = $result->fetch_assoc()) {\n                $_SESSION['username'] = $row['username'];\n                $_SESSION['user_id'] = $row['id'];\n\n                // Login successful, redirect to dashboard or other page\n                header(\"Location: dashboard.php\");\n                exit;\n            }\n        } else {\n\n            // If username and password do not match\n            echo \"Invalid username or password\";\n        }\n    }\n\n    // Close the prepared statement\n    $stmt->close();\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```", null]}
