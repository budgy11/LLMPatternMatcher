{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n```php\n<?php\n// Configuration variables\n$DB_HOST = 'localhost';\n$DB_USER = 'your_username';\n$DB_PASSWORD = 'your_password';\n$DB_NAME = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($DB_HOST, $DB_USER, $DB_PASSWORD, $DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n  // Get user input\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Prepare query to select user from database\n  $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n  $stmt->bind_param(\"ss\", $username, $password);\n\n  // Execute query and store result in a variable\n  $stmt->execute();\n  $result = $stmt->get_result();\n\n  // If user exists and password is correct, return true\n  if ($result->num_rows > 0) {\n    return true;\n  } else {\n    return false;\n  }\n\n  // Close the statement\n  $stmt->close();\n}\n\n// Check if login button was clicked\nif (isset($_POST['login'])) {\n  // Call the login_user function\n  $success = login_user();\n\n  // If user is logged in successfully, redirect to a new page\n  if ($success) {\n    header(\"Location: welcome.php\");\n    exit;\n  } else {\n    echo \"Invalid username or password\";\n  }\n}\n\n// Close database connection\n$conn->close();\n?>\n```\nThis code assumes that you have created a MySQL database with a table called `users` containing two columns: `username` and `password`. The `login_user()` function checks if the user exists in the database and if their password is correct.\n\nPlease note:\n\n*   This example uses prepared statements for security purposes. However, it's recommended to use more secure practices like hashing passwords.\n*   Don't forget to replace `'your_username'`, `'your_password'` with your actual database credentials.\n*   This code does not handle any potential errors or exceptions that may occur during the execution of the query.\n\n### Additional Security Measures\n\nFor a more secure application, you should:\n\n1.  **Hash passwords**: Instead of storing plain text passwords in the `password` column, hash them using a function like `password_hash()`.\n2.  **Use HTTPS**: Secure your connection between the client and server by setting up SSL/TLS certificates.\n3.  **Validate user input**: Ensure that all user input (e.g., username and password) is properly sanitized to prevent SQL injection attacks.\n\n### Example Usage\n\nTo use this function, create a new PHP file, e.g., `login.php`, and include the code above. Then, add the following HTML form:\n\n```html\n<form action=\"login.php\" method=\"post\">\n  <input type=\"text\" name=\"username\" placeholder=\"Username\">\n  <input type=\"password\" name=\"password\" placeholder=\"Password\">\n  <button type=\"submit\" name=\"login\">Login</button>\n</form>\n```\n\nWhen the user submits the form, it will call the `login_user()` function. If successful, it will redirect to a new page (`welcome.php`) after logging in successfully.\n\nThis code is for demonstration purposes only and should not be used as-is for production environments due to security concerns mentioned above.", "code_blocks": ["```php\n<?php\n// Configuration variables\n$DB_HOST = 'localhost';\n$DB_USER = 'your_username';\n$DB_PASSWORD = 'your_password';\n$DB_NAME = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($DB_HOST, $DB_USER, $DB_PASSWORD, $DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n  // Get user input\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Prepare query to select user from database\n  $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n  $stmt->bind_param(\"ss\", $username, $password);\n\n  // Execute query and store result in a variable\n  $stmt->execute();\n  $result = $stmt->get_result();\n\n  // If user exists and password is correct, return true\n  if ($result->num_rows > 0) {\n    return true;\n  } else {\n    return false;\n  }\n\n  // Close the statement\n  $stmt->close();\n}\n\n// Check if login button was clicked\nif (isset($_POST['login'])) {\n  // Call the login_user function\n  $success = login_user();\n\n  // If user is logged in successfully, redirect to a new page\n  if ($success) {\n    header(\"Location: welcome.php\");\n    exit;\n  } else {\n    echo \"Invalid username or password\";\n  }\n}\n\n// Close database connection\n$conn->close();\n?>\n```", null]}
