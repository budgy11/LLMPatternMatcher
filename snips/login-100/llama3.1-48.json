{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**`login.php`**\n```php\n<?php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'myusername';\n$password = 'mypassword';\n\n// Connect to database\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n\n// Check if user is logged in\nif (isset($_SESSION['logged_in'])) {\n  echo \"You are already logged in.\";\n  exit;\n}\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n  // Get username and password from form\n  $username = $_POST[\"username\"];\n  $password = $_POST[\"password\"];\n\n  // Prepare SQL query to check user credentials\n  $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username AND password = :password\");\n  $stmt->bindParam(\":username\", $username);\n  $stmt->bindParam(\":password\", $password);\n\n  try {\n    // Execute SQL query\n    $stmt->execute();\n    $result = $stmt->fetch();\n\n    if ($result) {\n      // User credentials are valid, log them in\n      $_SESSION['logged_in'] = true;\n      $_SESSION['username'] = $username;\n\n      echo \"You have been logged in successfully.\";\n    } else {\n      echo \"Invalid username or password.\";\n    }\n  } catch (PDOException $e) {\n    echo \"Error: \" . $e->getMessage();\n  }\n}\n\n// Close database connection\n$conn = null;\n?>\n```\n**`index.php`**\n```php\n<?php\nrequire 'login.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Login</title>\n</head>\n<body>\n  <h1>Login</h1>\n\n  <?php if (isset($_SESSION['logged_in'])) : ?>\n    <p>Welcome, <?= $_SESSION['username']; ?>!</p>\n    <a href=\"logout.php\">Logout</a>\n  <?php else : ?>\n\n  <form action=\"\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n  </form>\n\n  <?php endif; ?>\n\n</body>\n</html>\n```\nThis example uses the `PDO` extension to connect to a MySQL database. It checks if the user is already logged in by checking for an existing `$_SESSION['logged_in']` variable. If not, it checks if the form has been submitted and then executes a SQL query to verify the username and password.\n\nIf the credentials are valid, it logs the user in by setting `$_SESSION['logged_in']` to true and stores their username in the session. If the credentials are invalid or there is an error executing the query, it displays an error message.\n\nNote that this example assumes you have already created a table named `users` with columns for `username` and `password`. You should replace the connection settings and SQL queries with your own.\n\nAlso, remember to use prepared statements to prevent SQL injection attacks!", "code_blocks": ["```php\n<?php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'myusername';\n$password = 'mypassword';\n\n// Connect to database\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n\n// Check if user is logged in\nif (isset($_SESSION['logged_in'])) {\n  echo \"You are already logged in.\";\n  exit;\n}\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n  // Get username and password from form\n  $username = $_POST[\"username\"];\n  $password = $_POST[\"password\"];\n\n  // Prepare SQL query to check user credentials\n  $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username AND password = :password\");\n  $stmt->bindParam(\":username\", $username);\n  $stmt->bindParam(\":password\", $password);\n\n  try {\n    // Execute SQL query\n    $stmt->execute();\n    $result = $stmt->fetch();\n\n    if ($result) {\n      // User credentials are valid, log them in\n      $_SESSION['logged_in'] = true;\n      $_SESSION['username'] = $username;\n\n      echo \"You have been logged in successfully.\";\n    } else {\n      echo \"Invalid username or password.\";\n    }\n  } catch (PDOException $e) {\n    echo \"Error: \" . $e->getMessage();\n  }\n}\n\n// Close database connection\n$conn = null;\n?>\n```", "```php\n<?php\nrequire 'login.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Login</title>\n</head>\n<body>\n  <h1>Login</h1>\n\n  <?php if (isset($_SESSION['logged_in'])) : ?>\n    <p>Welcome, <?= $_SESSION['username']; ?>!</p>\n    <a href=\"logout.php\">Logout</a>\n  <?php else : ?>\n\n  <form action=\"\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n  </form>\n\n  <?php endif; ?>\n\n</body>\n</html>\n```"]}
