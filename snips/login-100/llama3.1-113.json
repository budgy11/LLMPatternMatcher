{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Database connection settings\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n  // Get form data\n  if (isset($_POST[\"submit\"])) {\n    $email = $_POST[\"email\"];\n    $password = $_POST[\"password\"];\n\n    // SQL query to select user by email and password\n    $sql = \"SELECT * FROM users WHERE email = '$email' AND password = '$password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n      while ($row = $result->fetch_assoc()) {\n        // User found, start session and redirect to dashboard\n        $_SESSION[\"user_id\"] = $row[\"id\"];\n        header(\"Location: dashboard.php\");\n        exit();\n      }\n    } else {\n      echo \"Invalid email or password\";\n    }\n  }\n\n  // Close connection\n  $conn->close();\n}\n\n// Check if user is already logged in\nif (isset($_SESSION[\"user_id\"])) {\n  header(\"Location: dashboard.php\");\n  exit();\n}\n\n// Display login form\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"email\">Email:</label>\n  <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\" name=\"submit\">Login</button>\n</form>\n```\n**Note:**\n\n* This example assumes you have a `users` table in your database with columns for `id`, `email`, and `password`.\n* The password is stored in plain text, which is not recommended. You should use a secure hashing algorithm like bcrypt to store passwords securely.\n* This code does not handle cases where the user closes their browser or logs out manually. You may want to add additional functionality to handle these scenarios.\n\n**Example use case:**\n\n1. Create a new PHP file called `dashboard.php` with the following content:\n```php\n<?php\n// Check if user is logged in\nif (!isset($_SESSION[\"user_id\"])) {\n  header(\"Location: login.php\");\n  exit();\n}\n\n// Display dashboard content\n?>\n<h1>Dashboard</h1>\n<p>Welcome, <?php echo $_SESSION[\"user_id\"]; ?></p>\n```\n2. Create a new PHP file called `register.php` with the following content:\n```php\n<?php\n// Get form data\nif (isset($_POST[\"submit\"])) {\n  $email = $_POST[\"email\"];\n  $password = $_POST[\"password\"];\n\n  // SQL query to insert new user into database\n  $sql = \"INSERT INTO users (email, password) VALUES ('$email', '$password')\";\n  $conn->query($sql);\n\n  header(\"Location: login.php\");\n  exit();\n}\n\n// Display registration form\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"email\">Email:</label>\n  <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\" name=\"submit\">Register</button>\n</form>\n```\n3. Create a new PHP file called `config.php` with the following content:\n```php\n<?php\n// Database connection settings\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n// Connect to database\n$conn = new mysqli($servername, $username, $password, $dbname);\n```\nThis is a basic example of how you can implement user login functionality in PHP. Remember to secure your code by using prepared statements and secure hashing algorithms for storing passwords.", "code_blocks": ["```php\n<?php\n// Database connection settings\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n  // Get form data\n  if (isset($_POST[\"submit\"])) {\n    $email = $_POST[\"email\"];\n    $password = $_POST[\"password\"];\n\n    // SQL query to select user by email and password\n    $sql = \"SELECT * FROM users WHERE email = '$email' AND password = '$password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n      while ($row = $result->fetch_assoc()) {\n        // User found, start session and redirect to dashboard\n        $_SESSION[\"user_id\"] = $row[\"id\"];\n        header(\"Location: dashboard.php\");\n        exit();\n      }\n    } else {\n      echo \"Invalid email or password\";\n    }\n  }\n\n  // Close connection\n  $conn->close();\n}\n\n// Check if user is already logged in\nif (isset($_SESSION[\"user_id\"])) {\n  header(\"Location: dashboard.php\");\n  exit();\n}\n\n// Display login form\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"email\">Email:</label>\n  <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\" name=\"submit\">Login</button>\n</form>\n```", "```php\n<?php\n// Check if user is logged in\nif (!isset($_SESSION[\"user_id\"])) {\n  header(\"Location: login.php\");\n  exit();\n}\n\n// Display dashboard content\n?>\n<h1>Dashboard</h1>\n<p>Welcome, <?php echo $_SESSION[\"user_id\"]; ?></p>\n```", "```php\n<?php\n// Get form data\nif (isset($_POST[\"submit\"])) {\n  $email = $_POST[\"email\"];\n  $password = $_POST[\"password\"];\n\n  // SQL query to insert new user into database\n  $sql = \"INSERT INTO users (email, password) VALUES ('$email', '$password')\";\n  $conn->query($sql);\n\n  header(\"Location: login.php\");\n  exit();\n}\n\n// Display registration form\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"email\">Email:</label>\n  <input type=\"text\" id=\"email\" name=\"email\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\" name=\"submit\">Register</button>\n</form>\n```", "```php\n<?php\n// Database connection settings\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n// Connect to database\n$conn = new mysqli($servername, $username, $password, $dbname);\n```"]}
