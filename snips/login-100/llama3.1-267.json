{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how to create a basic user login function in PHP:\n\n**`login.php`:**\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Retrieve and sanitize the input values\n    $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);\n    $password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);\n\n    // Hash the password using a salt (optional, but recommended for security)\n    $salt = 'your_secret_salt_here'; // replace with your own secret salt\n    $hashedPassword = hash('sha256', $password . $salt);\n\n    // Query the database to check if the username and hashed password match\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n    $result = mysqli_query($conn, $query);\n    $user = mysqli_fetch_assoc($result);\n\n    // Check if the user was found and is active\n    if ($user && $user['active'] == 1) {\n        // Log in the user\n        $_SESSION['username'] = $username;\n        $_SESSION['logged_in'] = true;\n\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n} else {\n    // Display a login form if the page is not submitted\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <input type=\"text\" name=\"username\" placeholder=\"Username\">\n        <input type=\"password\" name=\"password\" placeholder=\"Password\">\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n?>\n```\n\n**`config.php`:**\n\n```php\n<?php\n// Configuration settings for the database connection\n$servername = \"your_host_here\";\n$username = \"your_username_here\";\n$password = \"your_password_here\";\n$dbname = \"your_database_name_here\";\n\n// Connect to the database\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\n// Check if the connection was successful\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```\n\n**`dashboard.php`:**\n\n```php\n<?php\nsession_start();\n\nif (!isset($_SESSION['logged_in']) || $_SESSION['logged_in'] != true) {\n    header('Location: login.php');\n    exit();\n}\n\n// Display a welcome message to the logged-in user\necho \"Welcome, \" . $_SESSION['username'] . \"!\";\n\n?>\n```\n\nThis example uses PHP's built-in `mysqli` extension for database connections. The code assumes that you have a table named `users` with columns `username`, `password`, and `active`. You should replace the placeholders (`your_host_here`, `your_username_here`, etc.) with your actual database credentials.\n\nNote: **Never store passwords in plain text**. Always hash them using a salt (e.g., using PHP's built-in `hash()` function). This example uses SHA-256 for hashing, but you may want to use a more secure algorithm like bcrypt or Argon2.\n\nAlso, be aware that this is a simplified example and should not be used in production without additional security measures, such as:\n\n* **Password hashing** (as mentioned above)\n* **CSRF protection**\n* **Input validation and sanitization** (the code already uses `filter_var()` for basic input filtering)\n* **Error handling and logging**\n\nRemember to follow proper security practices when implementing user authentication in your application.", "code_blocks": ["```php\n<?php\nrequire_once 'config.php';\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Retrieve and sanitize the input values\n    $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);\n    $password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);\n\n    // Hash the password using a salt (optional, but recommended for security)\n    $salt = 'your_secret_salt_here'; // replace with your own secret salt\n    $hashedPassword = hash('sha256', $password . $salt);\n\n    // Query the database to check if the username and hashed password match\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n    $result = mysqli_query($conn, $query);\n    $user = mysqli_fetch_assoc($result);\n\n    // Check if the user was found and is active\n    if ($user && $user['active'] == 1) {\n        // Log in the user\n        $_SESSION['username'] = $username;\n        $_SESSION['logged_in'] = true;\n\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n} else {\n    // Display a login form if the page is not submitted\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <input type=\"text\" name=\"username\" placeholder=\"Username\">\n        <input type=\"password\" name=\"password\" placeholder=\"Password\">\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n?>\n```", "```php\n<?php\n// Configuration settings for the database connection\n$servername = \"your_host_here\";\n$username = \"your_username_here\";\n$password = \"your_password_here\";\n$dbname = \"your_database_name_here\";\n\n// Connect to the database\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\n// Check if the connection was successful\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```", "```php\n<?php\nsession_start();\n\nif (!isset($_SESSION['logged_in']) || $_SESSION['logged_in'] != true) {\n    header('Location: login.php');\n    exit();\n}\n\n// Display a welcome message to the logged-in user\necho \"Welcome, \" . $_SESSION['username'] . \"!\";\n\n?>\n```"]}
