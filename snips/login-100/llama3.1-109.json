{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login function using PHP:\n\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Create database connection\nfunction createConnection() {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n    return $conn;\n}\n\n// Hashing password function (using SHA-256)\nfunction hashPassword($plainText) {\n    return sha256( $plainText );\n}\n\n// User login function\nfunction userLogin($username, $password) {\n    try {\n        // Create database connection\n        $conn = createConnection();\n\n        // Prepare SQL query to retrieve user data from database\n        $query = \"SELECT * FROM users WHERE username = :username\";\n        $stmt = $conn->prepare( $query );\n        $stmt->bindParam(':username', $username);\n\n        // Execute query and fetch result\n        $stmt->execute();\n        $result = $stmt->fetch();\n\n        if ($result) {\n            // Compare hashed password with input password\n            if (hashPassword($password) === $result['password']) {\n                // Login successful, return user data\n                return array(\n                    'username' => $result['username'],\n                    'email' => $result['email']\n                );\n            } else {\n                throw new Exception(\"Invalid username or password\");\n            }\n        } else {\n            throw new Exception(\"Username not found\");\n        }\n\n    } catch (PDOException $e) {\n        echo \"Database error: \" . $e->getMessage();\n    } catch (Exception $e) {\n        echo \"Error: \" . $e->getMessage();\n    } finally {\n        // Close database connection\n        unset($conn);\n    }\n}\n\n// Example usage:\n$username = 'john';\n$password = 'password123';\n\ntry {\n    $userData = userLogin($username, $password);\n\n    if ($userData) {\n        echo \"Login successful. Welcome, $userData[username]!\";\n    } else {\n        throw new Exception(\"Invalid login credentials\");\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage();\n}\n\n?>\n```\n\nThis code creates a simple user login function that:\n\n1. Connects to the MySQL database using PDO.\n2. Retrieves user data from the `users` table based on the input username.\n3. Compares the hashed password with the input password.\n4. Returns an array containing the user's data (username and email) if the login is successful.\n\nNote: This code uses SHA-256 to hash passwords, but it's recommended to use a more secure password hashing algorithm like bcrypt or PBKDF2 for production environments.\n\nYou can adapt this example to fit your specific database schema and requirements. Don't forget to replace the placeholder values (`$host`, `$dbname`, `$username`, and `$password`) with your actual database connection settings!", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Create database connection\nfunction createConnection() {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n    return $conn;\n}\n\n// Hashing password function (using SHA-256)\nfunction hashPassword($plainText) {\n    return sha256( $plainText );\n}\n\n// User login function\nfunction userLogin($username, $password) {\n    try {\n        // Create database connection\n        $conn = createConnection();\n\n        // Prepare SQL query to retrieve user data from database\n        $query = \"SELECT * FROM users WHERE username = :username\";\n        $stmt = $conn->prepare( $query );\n        $stmt->bindParam(':username', $username);\n\n        // Execute query and fetch result\n        $stmt->execute();\n        $result = $stmt->fetch();\n\n        if ($result) {\n            // Compare hashed password with input password\n            if (hashPassword($password) === $result['password']) {\n                // Login successful, return user data\n                return array(\n                    'username' => $result['username'],\n                    'email' => $result['email']\n                );\n            } else {\n                throw new Exception(\"Invalid username or password\");\n            }\n        } else {\n            throw new Exception(\"Username not found\");\n        }\n\n    } catch (PDOException $e) {\n        echo \"Database error: \" . $e->getMessage();\n    } catch (Exception $e) {\n        echo \"Error: \" . $e->getMessage();\n    } finally {\n        // Close database connection\n        unset($conn);\n    }\n}\n\n// Example usage:\n$username = 'john';\n$password = 'password123';\n\ntry {\n    $userData = userLogin($username, $password);\n\n    if ($userData) {\n        echo \"Login successful. Welcome, $userData[username]!\";\n    } else {\n        throw new Exception(\"Invalid login credentials\");\n    }\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage();\n}\n\n?>\n```"]}
