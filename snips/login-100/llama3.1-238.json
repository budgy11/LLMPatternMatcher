{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to login a user\nfunction login_user($username, $password) {\n    // Connect to the database\n    $conn = db_connect();\n\n    // Prepare the query\n    $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n\n    // Bind parameters and execute the query\n    $stmt = $conn->prepare($query);\n    $stmt->bind_param(\"ss\", $username, $password);\n    $stmt->execute();\n\n    // Fetch the result\n    $result = $stmt->get_result();\n    if ($result->num_rows > 0) {\n        // User found, return their details\n        $row = $result->fetch_assoc();\n        session_start();\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['user_id'] = $row['id'];\n\n        // Redirect to a secure page\n        header('Location: /secure-page.php');\n    } else {\n        // User not found, display an error message\n        echo \"Invalid username or password\";\n    }\n\n    // Close the database connection\n    $conn->close();\n}\n\n// Check if the login form has been submitted\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for security\n    $hashed_password = hash('sha256', $password);\n\n    // Login the user\n    login_user($username, $hashed_password);\n}\n?>\n```\n**login.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n<body>\n    <form action=\"login.php\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n</body>\n</html>\n```\nThis example uses the following:\n\n* The `db_connect()` function to connect to a MySQL database.\n* The `login_user()` function to login a user, which:\n\t+ Connects to the database\n\t+ Prepares and executes a query to retrieve the user's details\n\t+ Checks if the user exists and is valid (i.e., their password matches)\n\t+ If valid, starts a session and redirects the user to a secure page\n* The `login.html` form submits the username and password to the `login.php` script.\n\nNote that this example uses a simple hashing algorithm (`hash('sha256', $password)`) for security, but you should use a more secure method (e.g., bcrypt or Argon2) in a real-world application.", "code_blocks": ["```php\n<?php\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to login a user\nfunction login_user($username, $password) {\n    // Connect to the database\n    $conn = db_connect();\n\n    // Prepare the query\n    $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n\n    // Bind parameters and execute the query\n    $stmt = $conn->prepare($query);\n    $stmt->bind_param(\"ss\", $username, $password);\n    $stmt->execute();\n\n    // Fetch the result\n    $result = $stmt->get_result();\n    if ($result->num_rows > 0) {\n        // User found, return their details\n        $row = $result->fetch_assoc();\n        session_start();\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['user_id'] = $row['id'];\n\n        // Redirect to a secure page\n        header('Location: /secure-page.php');\n    } else {\n        // User not found, display an error message\n        echo \"Invalid username or password\";\n    }\n\n    // Close the database connection\n    $conn->close();\n}\n\n// Check if the login form has been submitted\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password for security\n    $hashed_password = hash('sha256', $password);\n\n    // Login the user\n    login_user($username, $hashed_password);\n}\n?>\n```", null]}
