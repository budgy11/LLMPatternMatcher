{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'mydatabase');\n\n// Function to connect to database\nfunction db_connect() {\n    $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\n// Function to query user data from database\nfunction get_user_data($username, $password) {\n    $conn = db_connect();\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 1) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to validate user input\nfunction validate_input($username, $password) {\n    // Check for empty inputs\n    if (empty($username) || empty($password)) {\n        return false;\n    }\n    \n    // Check for valid username and password length\n    if (strlen($username) < 3 || strlen($password) < 6) {\n        return false;\n    }\n    \n    return true;\n}\n\n// Function to handle login\nfunction login_user($username, $password) {\n    // Validate user input\n    if (!validate_input($username, $password)) {\n        echo \"Invalid username or password.\";\n        return;\n    }\n    \n    // Check user credentials against database data\n    if (get_user_data($username, $password)) {\n        session_start();\n        $_SESSION['username'] = $username;\n        header(\"Location: dashboard.php\");\n        exit();\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n// Handle form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = trim($_POST[\"username\"]);\n    $password = trim($_POST[\"password\"]);\n    \n    login_user($username, $password);\n}\n\n?>\n```\n\n**login_form.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Form</title>\n</head>\n<body>\n    <h2>Login Form</h2>\n    <form action=\"login.php\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\" required><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\" required><br><br>\n        <button type=\"submit\">Login</button>\n    </form>\n</body>\n</html>\n```\n\nIn this example, we have three main functions:\n\n*   `db_connect`: Establishes a connection to the database using the specified credentials.\n*   `get_user_data`: Queries the database for user data based on the provided username and password.\n*   `login_user`: Handles user input validation and checks against the database data. If valid, it starts a session with the user's credentials.\n\nTo use this example:\n\n1.  Create a new PHP file named `login.php` and copy the above code into it.\n2.  Create a new HTML file named `login_form.html` and copy the form code into it.\n3.  Modify the database configuration variables in `login.php` to match your actual database credentials.\n4.  Upload both files to your web server, ensuring that PHP is installed and configured correctly.\n\nWhen you submit the login form with valid credentials, you will be redirected to a dashboard page (`dashboard.php`, which should also be created). If the credentials are invalid or missing, an error message will be displayed.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'mydatabase');\n\n// Function to connect to database\nfunction db_connect() {\n    $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\n// Function to query user data from database\nfunction get_user_data($username, $password) {\n    $conn = db_connect();\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 1) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to validate user input\nfunction validate_input($username, $password) {\n    // Check for empty inputs\n    if (empty($username) || empty($password)) {\n        return false;\n    }\n    \n    // Check for valid username and password length\n    if (strlen($username) < 3 || strlen($password) < 6) {\n        return false;\n    }\n    \n    return true;\n}\n\n// Function to handle login\nfunction login_user($username, $password) {\n    // Validate user input\n    if (!validate_input($username, $password)) {\n        echo \"Invalid username or password.\";\n        return;\n    }\n    \n    // Check user credentials against database data\n    if (get_user_data($username, $password)) {\n        session_start();\n        $_SESSION['username'] = $username;\n        header(\"Location: dashboard.php\");\n        exit();\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n// Handle form submission\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $username = trim($_POST[\"username\"]);\n    $password = trim($_POST[\"password\"]);\n    \n    login_user($username, $password);\n}\n\n?>\n```", null]}
