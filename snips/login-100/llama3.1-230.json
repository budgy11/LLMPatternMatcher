{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration\n$config = array(\n    'db_host' => 'localhost',\n    'db_name' => 'mydatabase',\n    'db_user' => 'myuser',\n    'db_password' => 'mypassword'\n);\n\n// Connect to database\n$conn = new mysqli($config['db_host'], $config['db_user'], $config['db_password'], $config['db_name']);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    global $conn;\n    \n    // Prepare query\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    \n    // Bind parameters\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to check if username is available\nfunction check_username($username) {\n    global $conn;\n    \n    // Prepare query\n    $sql = \"SELECT * FROM users WHERE username = ?\";\n    \n    // Bind parameters\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\n// Main logic\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Check if username is available\n    if (!check_username($username)) {\n        echo \"Username already exists.\";\n    } else {\n        // Hash password (for security)\n        $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n        \n        // Insert user into database\n        $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n        $stmt = $conn->prepare($sql);\n        $stmt->bind_param(\"ss\", $username, $hashed_password);\n        $stmt->execute();\n        \n        // Login user\n        if (login_user($username, $password)) {\n            echo \"Login successful.\";\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n\n?>\n```\nThis code includes the following:\n\n* Configuration for database connection\n* Function to login user using prepared statement and parameter binding\n* Function to check if username is available\n* Main logic to handle form submission\n\nNote that this is a simple example and you should consider security best practices such as salting and hashing passwords, validating user input, etc.\n\n**Example use case:**\n\n1. Create a new file called `index.php` with the following code:\n```php\n<?php include 'login.php'; ?>\n<form action=\"\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```\n2. Create a new user with a valid username and password.\n3. Submit the form to login as the user.\n\nThis is just an example, you should adapt it to your specific needs and follow security best practices.", "code_blocks": ["```php\n<?php\n\n// Configuration\n$config = array(\n    'db_host' => 'localhost',\n    'db_name' => 'mydatabase',\n    'db_user' => 'myuser',\n    'db_password' => 'mypassword'\n);\n\n// Connect to database\n$conn = new mysqli($config['db_host'], $config['db_user'], $config['db_password'], $config['db_name']);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    global $conn;\n    \n    // Prepare query\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    \n    // Bind parameters\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to check if username is available\nfunction check_username($username) {\n    global $conn;\n    \n    // Prepare query\n    $sql = \"SELECT * FROM users WHERE username = ?\";\n    \n    // Bind parameters\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists\n    if ($result->num_rows > 0) {\n        return false;\n    } else {\n        return true;\n    }\n}\n\n// Main logic\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Check if username is available\n    if (!check_username($username)) {\n        echo \"Username already exists.\";\n    } else {\n        // Hash password (for security)\n        $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n        \n        // Insert user into database\n        $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n        $stmt = $conn->prepare($sql);\n        $stmt->bind_param(\"ss\", $username, $hashed_password);\n        $stmt->execute();\n        \n        // Login user\n        if (login_user($username, $password)) {\n            echo \"Login successful.\";\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n\n?>\n```", "```php\n<?php include 'login.php'; ?>\n<form action=\"\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```"]}
