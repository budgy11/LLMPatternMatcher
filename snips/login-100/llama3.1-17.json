{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n/**\n * User Login Function\n *\n * @author Your Name\n */\n\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get input from form\n    if (isset($_POST['username']) && isset($_POST['password'])) {\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Query database for user\n        $query = \"SELECT * FROM users WHERE username='$username' AND password=SHA1('$password')\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            while ($row = $result->fetch_assoc()) {\n                if (md5($_POST['username']) === $row['salt'] && md5($_POST['password']) === $row['hash']) {\n                    return true;\n                }\n            }\n        } else {\n            // If no match is found, return false\n            return false;\n        }\n\n        return false;\n\n    } else {\n        echo \"Error: Please enter username and password\";\n    }\n}\n\n// Check if user is logged in\nif (isset($_SESSION['logged_in'])) {\n    header('Location: protected.php');\n} elseif (login_user()) {\n    $_SESSION['logged_in'] = true;\n    header('Location: protected.php');\n} else {\n    echo \"Invalid username or password\";\n}\n?>\n```\n\n**Note:** This example uses a very basic form of password hashing. In a real-world application, you should use a more secure method such as bcrypt.\n\nAlso note that this is just an example and you should modify it to fit your specific needs. You may want to add additional security features such as IP blocking or CAPTCHA verification.\n\n**login.html**\n```html\n<form action=\"login.php\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\"><br>\n    <input type=\"password\" name=\"password\" placeholder=\"Password\"><br>\n    <button type=\"submit\">Login</button>\n</form>\n```\n\n**protected.php**\n```php\n<?php\nif (isset($_SESSION['logged_in'])) {\n    echo \"Welcome, \" . $_SESSION['username'] . \"! You are now logged in.\";\n} else {\n    header('Location: login.html');\n}\n?>\n```\nThis code creates a simple user login system using PHP. When the user submits their username and password through the `login.php` page, it queries the database to see if the credentials match any stored records. If they do, it sets a session variable indicating that the user is logged in and redirects them to the `protected.php` page.", "code_blocks": ["```php\n<?php\n/**\n * User Login Function\n *\n * @author Your Name\n */\n\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get input from form\n    if (isset($_POST['username']) && isset($_POST['password'])) {\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Query database for user\n        $query = \"SELECT * FROM users WHERE username='$username' AND password=SHA1('$password')\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            while ($row = $result->fetch_assoc()) {\n                if (md5($_POST['username']) === $row['salt'] && md5($_POST['password']) === $row['hash']) {\n                    return true;\n                }\n            }\n        } else {\n            // If no match is found, return false\n            return false;\n        }\n\n        return false;\n\n    } else {\n        echo \"Error: Please enter username and password\";\n    }\n}\n\n// Check if user is logged in\nif (isset($_SESSION['logged_in'])) {\n    header('Location: protected.php');\n} elseif (login_user()) {\n    $_SESSION['logged_in'] = true;\n    header('Location: protected.php');\n} else {\n    echo \"Invalid username or password\";\n}\n?>\n```", null, "```php\n<?php\nif (isset($_SESSION['logged_in'])) {\n    echo \"Welcome, \" . $_SESSION['username'] . \"! You are now logged in.\";\n} else {\n    header('Location: login.html');\n}\n?>\n```"]}
