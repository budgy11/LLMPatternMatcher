{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login system using PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Validate input\n    if (empty($username) || empty($password)) {\n        echo \"Please enter both username and password.\";\n    } else {\n        // Hash the password for comparison with stored hash\n        $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n        // Query database to check user credentials\n        $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            // User exists and password is correct, log them in\n            session_start();\n            $_SESSION['username'] = $username;\n            header('Location: welcome.php');\n            exit();\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```\n**index.php**\n```php\n<?php include 'login.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n<body>\n\n<form action=\"\" method=\"post\">\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n</body>\n</html>\n```\n**welcome.php**\n```php\n<?php\nsession_start();\n\nif (isset($_SESSION['username'])) {\n    echo \"Welcome, \" . $_SESSION['username'] . \"!\";\n} else {\n    header('Location: index.php');\n}\n?>\n```\nHere's a brief explanation of how this works:\n\n1. The `login.php` script connects to the database and checks if the user has submitted the login form.\n2. If the form has been submitted, it retrieves the username and password from the request data.\n3. It then hashes the password using PHP's built-in `password_hash()` function and queries the database to check for a matching username and password combination.\n4. If a match is found, it starts a session and logs the user in by setting their username in the session array.\n5. The script redirects the user to the welcome page (`welcome.php`).\n6. On the welcome page, the `welcome.php` script checks if there's an active session for the user. If there is, it displays a greeting message with the username.\n\n**Important notes:**\n\n* This example uses a simple password hashing scheme (md5 or sha1). For production use, consider using a more secure hash like bcrypt.\n* Always keep your database credentials and passwords secure.\n* This example assumes you have the necessary permissions to execute SQL queries. In production environments, ensure proper access control is implemented.\n\nI hope this helps! Let me know if you have any questions or need further clarification.", "code_blocks": ["```php\n<?php\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Get user input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Validate input\n    if (empty($username) || empty($password)) {\n        echo \"Please enter both username and password.\";\n    } else {\n        // Hash the password for comparison with stored hash\n        $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n        // Query database to check user credentials\n        $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n        $result = $conn->query($query);\n\n        if ($result->num_rows > 0) {\n            // User exists and password is correct, log them in\n            session_start();\n            $_SESSION['username'] = $username;\n            header('Location: welcome.php');\n            exit();\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```", "```php\n<?php include 'login.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n<body>\n\n<form action=\"\" method=\"post\">\n    Username: <input type=\"text\" name=\"username\"><br><br>\n    Password: <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n</body>\n</html>\n```", "```php\n<?php\nsession_start();\n\nif (isset($_SESSION['username'])) {\n    echo \"Welcome, \" . $_SESSION['username'] . \"!\";\n} else {\n    header('Location: index.php');\n}\n?>\n```"]}
