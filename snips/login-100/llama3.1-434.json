{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n  // Configuration settings\n  define('DB_HOST', 'localhost');\n  define('DB_USERNAME', 'your_username');\n  define('DB_PASSWORD', 'your_password');\n  define('DB_NAME', 'your_database');\n\n  // Database connection\n  $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n  }\n\n  function login_user($username, $password) {\n    global $conn;\n\n    // Prepare the SQL query\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n\n    // Execute the query\n    $result = mysqli_query($conn, $query);\n\n    if (mysqli_num_rows($result) > 0) {\n      // User exists and password is correct\n      while ($row = mysqli_fetch_assoc($result)) {\n        // Create a session for the user\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['logged_in'] = true;\n        return true;\n      }\n    } else {\n      // User does not exist or password is incorrect\n      return false;\n    }\n\n    mysqli_close($conn);\n  }\n\n  if (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (!empty($username) && !empty($password)) {\n      // Validate the username and password\n      if (ctype_alnum($username) && ctype_alnum($password)) {\n        // Hash the password for security (optional)\n        $hashed_password = hash('sha256', $password);\n\n        if ($hashed_password !== $_POST['password']) {\n          echo \"Password mismatch\";\n          return;\n        }\n\n        // Attempt to log in\n        if (login_user($username, $password)) {\n          header(\"Location: dashboard.php\");\n          exit();\n        } else {\n          echo \"Invalid username or password\";\n        }\n      } else {\n        echo \"Invalid username or password format\";\n      }\n    } else {\n      echo \"Please enter a valid username and password\";\n    }\n  }\n\n  // Include the HTML form\n  include 'login_form.html';\n?>\n```\n**login_form.html**\n```html\n<form action=\"login.php\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <input type=\"submit\" value=\"Login\">\n</form>\n```\nThis code assumes you have a MySQL database with a table named `users` containing the columns `username` and `password`. You'll need to modify the configuration settings at the top of the PHP file to match your own database setup.\n\n**Important Security Notes:**\n\n1. **Hashing passwords**: The code above uses simple hashing (SHA-256) for demonstration purposes only. In a production environment, you should use a secure password hashing library like bcrypt or Argon2.\n2. **SQL injection prevention**: The code does not use prepared statements to prevent SQL injection attacks. You should always use prepared statements when interacting with user input data.\n3. **Data validation**: This example assumes that the username and password are valid alphanumeric strings. In a real-world application, you'll want to add more robust validation rules.\n\nRemember to test this code on a local development environment before deploying it to production!", "code_blocks": ["```php\n<?php\n  // Configuration settings\n  define('DB_HOST', 'localhost');\n  define('DB_USERNAME', 'your_username');\n  define('DB_PASSWORD', 'your_password');\n  define('DB_NAME', 'your_database');\n\n  // Database connection\n  $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n  }\n\n  function login_user($username, $password) {\n    global $conn;\n\n    // Prepare the SQL query\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n\n    // Execute the query\n    $result = mysqli_query($conn, $query);\n\n    if (mysqli_num_rows($result) > 0) {\n      // User exists and password is correct\n      while ($row = mysqli_fetch_assoc($result)) {\n        // Create a session for the user\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['logged_in'] = true;\n        return true;\n      }\n    } else {\n      // User does not exist or password is incorrect\n      return false;\n    }\n\n    mysqli_close($conn);\n  }\n\n  if (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (!empty($username) && !empty($password)) {\n      // Validate the username and password\n      if (ctype_alnum($username) && ctype_alnum($password)) {\n        // Hash the password for security (optional)\n        $hashed_password = hash('sha256', $password);\n\n        if ($hashed_password !== $_POST['password']) {\n          echo \"Password mismatch\";\n          return;\n        }\n\n        // Attempt to log in\n        if (login_user($username, $password)) {\n          header(\"Location: dashboard.php\");\n          exit();\n        } else {\n          echo \"Invalid username or password\";\n        }\n      } else {\n        echo \"Invalid username or password format\";\n      }\n    } else {\n      echo \"Please enter a valid username and password\";\n    }\n  }\n\n  // Include the HTML form\n  include 'login_form.html';\n?>\n```", null]}
