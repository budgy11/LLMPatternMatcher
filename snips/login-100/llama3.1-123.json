{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n====================================\n\nHere's an example of a basic user login function using PHP. This code includes input validation, password hashing, and database interaction.\n\n**Database Schema (Assuming MySQL)**\n------------------------------------\n\n```sql\nCREATE TABLE users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  username VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n```\n\n**Login Function (`login.php` file)**\n--------------------------------------\n\n```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n  // Prepare query\n  $sql = \"SELECT * FROM users WHERE username = ?\";\n\n  // Execute query with prepared statement\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"s\", $username);\n\n  // Get result\n  if ($stmt->execute()) {\n    $result = $stmt->get_result();\n  } else {\n    echo \"Error executing query: \" . $conn->error;\n    return false;\n  }\n\n  // Fetch user data\n  $user_data = $result->fetch_assoc();\n\n  // Check password\n  if (password_verify($password, $user_data['password'])) {\n    session_start();\n    $_SESSION['username'] = $username;\n    $_SESSION['logged_in'] = true;\n\n    return true;\n  } else {\n    echo \"Invalid username or password\";\n    return false;\n  }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```\n\n**Example Usage (index.php file)**\n---------------------------------\n\n```php\n<?php\n\nrequire_once 'login.php';\n\nif (isset($_POST['username']) && isset($_POST['password'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (login($username, $password)) {\n    header('Location: dashboard.php');\n    exit;\n  } else {\n    echo \"Invalid login attempt\";\n  }\n}\n\n?>\n\n<form action=\"\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <input type=\"submit\" value=\"Login\">\n</form>\n```\n\n**Notes:**\n\n1. This code assumes you're using MySQL as your database management system.\n2. Passwords are stored hashed (using `password_hash()` and `password_verify()`) for security reasons.\n3. Always validate user input data to prevent SQL injection attacks.\n\nRemember to replace the placeholders (`username`, `password`, etc.) with actual values from your configuration file or environment variables.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n  // Prepare query\n  $sql = \"SELECT * FROM users WHERE username = ?\";\n\n  // Execute query with prepared statement\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"s\", $username);\n\n  // Get result\n  if ($stmt->execute()) {\n    $result = $stmt->get_result();\n  } else {\n    echo \"Error executing query: \" . $conn->error;\n    return false;\n  }\n\n  // Fetch user data\n  $user_data = $result->fetch_assoc();\n\n  // Check password\n  if (password_verify($password, $user_data['password'])) {\n    session_start();\n    $_SESSION['username'] = $username;\n    $_SESSION['logged_in'] = true;\n\n    return true;\n  } else {\n    echo \"Invalid username or password\";\n    return false;\n  }\n}\n\n// Close connection\n$conn->close();\n\n?>\n```", "```php\n<?php\n\nrequire_once 'login.php';\n\nif (isset($_POST['username']) && isset($_POST['password'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (login($username, $password)) {\n    header('Location: dashboard.php');\n    exit;\n  } else {\n    echo \"Invalid login attempt\";\n  }\n}\n\n?>\n\n<form action=\"\" method=\"post\">\n  <label for=\"username\">Username:</label>\n  <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n  <label for=\"password\">Password:</label>\n  <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n  <input type=\"submit\" value=\"Login\">\n</form>\n```"]}
