{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login function in PHP:\n\n**Note:** This is just a basic example, and you should always use prepared statements to prevent SQL injection attacks.\n\n```php\n// db.php (database connection file)\n<?php\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction get_user($email, $password) {\n  global $conn;\n  $sql = \"SELECT * FROM users WHERE email=? AND password=?\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"ss\", $email, $password);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_assoc();\n}\n\n$conn->close();\n?>\n```\n\n```php\n// login.php (login function file)\n<?php\nrequire 'db.php';\n\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if ($user = get_user($email, password_hash($password, PASSWORD_DEFAULT))) {\n        // Login successful, create session and redirect to dashboard\n        session_start();\n        $_SESSION['id'] = $user['id'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n} else {\n    echo \"Only POST requests are allowed\";\n}\n?>\n```\n\n```php\n// index.php (login form file)\n<?php\nrequire 'db.php';\n\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n  require 'login.php';\n}\n\n?>\n\n<form method=\"post\" action=\"<?php $_SERVER['PHP_SELF']; ?>\">\n    <input type=\"email\" name=\"email\" placeholder=\"Email\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\">Login</button>\n</form>\n```\n\n**How it works:**\n\n1. The `get_user` function is called with the provided email and password.\n2. If a user exists with that email and password, their data is fetched from the database using prepared statements to prevent SQL injection attacks.\n3. In the login form file (`index.php`), if a POST request is made, it calls the `login.php` file which executes the `get_user` function with the provided email and password (hashed before being sent).\n4. If the user exists, they are redirected to the dashboard with their session ID stored.\n\n**Remember:** This example uses prepared statements for security, but in a production environment you should also use a secure method of storing passwords (e.g., bcrypt), not the built-in `password_hash` function.", "code_blocks": ["```php\n// db.php (database connection file)\n<?php\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction get_user($email, $password) {\n  global $conn;\n  $sql = \"SELECT * FROM users WHERE email=? AND password=?\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"ss\", $email, $password);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_assoc();\n}\n\n$conn->close();\n?>\n```", "```php\n// login.php (login function file)\n<?php\nrequire 'db.php';\n\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if ($user = get_user($email, password_hash($password, PASSWORD_DEFAULT))) {\n        // Login successful, create session and redirect to dashboard\n        session_start();\n        $_SESSION['id'] = $user['id'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n} else {\n    echo \"Only POST requests are allowed\";\n}\n?>\n```", "```php\n// index.php (login form file)\n<?php\nrequire 'db.php';\n\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n  require 'login.php';\n}\n\n?>\n\n<form method=\"post\" action=\"<?php $_SERVER['PHP_SELF']; ?>\">\n    <input type=\"email\" name=\"email\" placeholder=\"Email\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\">Login</button>\n</form>\n```"]}
