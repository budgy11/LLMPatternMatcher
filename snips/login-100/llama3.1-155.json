{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login system in PHP:\n\n**Note:** This is a simplified example and not suitable for production use without proper security measures (e.g., hashing passwords, validating user input).\n\n### `users.php`\n```php\n<?php\n\n// Configuration\nconst DB_HOST = 'localhost';\nconst DB_NAME = 'mydatabase';\nconst DB_USER = 'myuser';\nconst DB_PASSWORD = 'mypassword';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to register user\nfunction registerUser($username, $password) {\n    // Hash password\n    $hashedPassword = hash('sha256', $password);\n\n    // Insert into database\n    $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $hashedPassword);\n    $stmt->execute();\n\n    return true;\n}\n\n// Function to login user\nfunction loginUser($username, $password) {\n    // Query database for matching username and password\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, hash('sha256', $password));\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    if ($result->num_rows == 1) {\n        return true; // User authenticated\n    } else {\n        return false; // User not authenticated\n    }\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n\n### `login.php`\n```php\n<?php\n\nrequire_once 'users.php';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (loginUser($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n} else {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```\n\n### Explanation:\n\n1. The `users.php` file defines a basic database connection and two functions: `registerUser()` and `loginUser()`.\n2. The `registerUser()` function hashes the user's password using SHA-256 before inserting it into the database.\n3. The `loginUser()` function queries the database for matching username and password, returning true if authenticated.\n4. In `login.php`, a simple form is presented to users to enter their credentials.\n5. When the login button is clicked, the `loginUser()` function is called with the submitted username and password.\n\n**Important:** This example uses SHA-256 hashing, which may not be secure for production use (e.g., it's vulnerable to rainbow table attacks). For a real-world application, consider using stronger hashing algorithms like Argon2 or PBKDF2. Additionally, ensure proper error handling and input validation to prevent SQL injection vulnerabilities.", "code_blocks": ["```php\n<?php\n\n// Configuration\nconst DB_HOST = 'localhost';\nconst DB_NAME = 'mydatabase';\nconst DB_USER = 'myuser';\nconst DB_PASSWORD = 'mypassword';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to register user\nfunction registerUser($username, $password) {\n    // Hash password\n    $hashedPassword = hash('sha256', $password);\n\n    // Insert into database\n    $sql = \"INSERT INTO users (username, password) VALUES (?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, $hashedPassword);\n    $stmt->execute();\n\n    return true;\n}\n\n// Function to login user\nfunction loginUser($username, $password) {\n    // Query database for matching username and password\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ss\", $username, hash('sha256', $password));\n    $stmt->execute();\n    $result = $stmt->get_result();\n\n    if ($result->num_rows == 1) {\n        return true; // User authenticated\n    } else {\n        return false; // User not authenticated\n    }\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```", "```php\n<?php\n\nrequire_once 'users.php';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (loginUser($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n} else {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```"]}
