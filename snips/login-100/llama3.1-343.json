{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login system in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create database connection\n$mysqli = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($mysqli->connect_error) {\n    die('Connection failed: ' . $mysqli->connect_error);\n}\n\n// Define function to validate user input\nfunction validate_input($data) {\n    global $mysqli;\n    // Remove special characters and convert to lowercase\n    $cleaned_data = strtolower(trim($data));\n    return $cleaned_data;\n}\n\n// Function to login user\nfunction login_user() {\n    global $mysqli;\n    if (isset($_POST['username']) && isset($_POST['password'])) {\n        $username = validate_input($_POST['username']);\n        $password = validate_input($_POST['password']);\n\n        // Hash password for security\n        $hashed_password = hash('sha256', $password);\n\n        // Query database to check user credentials\n        $query = \"SELECT * FROM users WHERE username='$username' AND password='$hashed_password'\";\n        $result = $mysqli->query($query);\n\n        if ($result->num_rows > 0) {\n            while ($row = $result->fetch_assoc()) {\n                $_SESSION['user_id'] = $row['id'];\n                $_SESSION['username'] = $row['username'];\n\n                // Redirect user to dashboard\n                header('Location: dashboard.php');\n                exit;\n            }\n        } else {\n            echo 'Invalid username or password';\n        }\n    }\n}\n\n// Initialize session\nsession_start();\n\n// Login user if form submitted\nif (isset($_POST['login'])) {\n    login_user();\n}\n?>\n```\n\n**index.html**\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Login</title>\n</head>\n<body>\n    <form action=\"login.php\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\" name=\"login\">Login</button>\n    </form>\n</body>\n</html>\n```\n\n**Note:**\n\n1.  This is a basic example and should not be used in production without proper security measures, such as hashing passwords with a library like `password_hash()` instead of using `hash()`.\n2.  The code does not handle user registration, password recovery, or other advanced features.\n3.  It's recommended to use prepared statements for database queries for better security.\n\n**Step-by-Step Example:**\n\n1.  Create an HTML form (index.html) with fields for username and password.\n2.  Set the `action` attribute of the form to point to `login.php`.\n3.  In `login.php`, define the configuration settings, create a database connection, and define functions for validating user input and logging in the user.\n4.  Use `session_start()` at the top of `login.php` to initialize the session.\n5.  Check if the login form has been submitted (i.e., `$_POST['login']` is set).\n6.  If the form has been submitted, call the `login_user()` function.\n7.  In `login_user()`, check for user input, hash the password, and query the database to verify user credentials.\n\nThis example demonstrates a basic login system using PHP. You can expand upon this code to include additional features like user registration, password recovery, or advanced security measures.", "code_blocks": ["```php\n<?php\n// Configuration settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create database connection\n$mysqli = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($mysqli->connect_error) {\n    die('Connection failed: ' . $mysqli->connect_error);\n}\n\n// Define function to validate user input\nfunction validate_input($data) {\n    global $mysqli;\n    // Remove special characters and convert to lowercase\n    $cleaned_data = strtolower(trim($data));\n    return $cleaned_data;\n}\n\n// Function to login user\nfunction login_user() {\n    global $mysqli;\n    if (isset($_POST['username']) && isset($_POST['password'])) {\n        $username = validate_input($_POST['username']);\n        $password = validate_input($_POST['password']);\n\n        // Hash password for security\n        $hashed_password = hash('sha256', $password);\n\n        // Query database to check user credentials\n        $query = \"SELECT * FROM users WHERE username='$username' AND password='$hashed_password'\";\n        $result = $mysqli->query($query);\n\n        if ($result->num_rows > 0) {\n            while ($row = $result->fetch_assoc()) {\n                $_SESSION['user_id'] = $row['id'];\n                $_SESSION['username'] = $row['username'];\n\n                // Redirect user to dashboard\n                header('Location: dashboard.php');\n                exit;\n            }\n        } else {\n            echo 'Invalid username or password';\n        }\n    }\n}\n\n// Initialize session\nsession_start();\n\n// Login user if form submitted\nif (isset($_POST['login'])) {\n    login_user();\n}\n?>\n```", null]}
