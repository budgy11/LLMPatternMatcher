{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how to create a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"mydatabase\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to validate user credentials\nfunction login_user($email, $password) {\n    // SQL query to select user from database\n    $sql = \"SELECT * FROM users WHERE email = '$email' AND password = '$password'\";\n    \n    // Execute the query\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // Login successful, return user details\n        while ($row = $result->fetch_assoc()) {\n            return array(\n                'id' => $row['id'],\n                'name' => $row['name']\n            );\n        }\n    } else {\n        // Login failed, return false\n        return false;\n    }\n\n    // Close connection\n    $conn->close();\n}\n\n// Function to register new user\nfunction register_user($email, $password) {\n    // SQL query to insert new user into database\n    $sql = \"INSERT INTO users (email, password)\n            VALUES ('$email', '$password')\";\n\n    // Execute the query\n    if ($conn->query($sql) === TRUE) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Main logic to handle login and registration\nif (isset($_POST['login'])) {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    $user_data = login_user($email, $password);\n\n    if ($user_data !== false) {\n        session_start();\n        $_SESSION['id'] = $user_data['id'];\n        $_SESSION['name'] = $user_data['name'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n} elseif (isset($_POST['register'])) {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if (register_user($email, $password)) {\n        echo \"User registered successfully!\";\n    } else {\n        echo \"Failed to register user.\";\n    }\n}\n\n// Close connection\n$conn->close();\n?>\n```\n\n**index.php**\n```php\n<?php\ninclude 'login.php';\n?>\n\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n\n<body>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Email: <input type=\"email\" name=\"email\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Email: <input type=\"email\" name=\"email\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"register\" value=\"Register\">\n    </form>\n\n    <?php\n    if (isset($_GET['error'])) {\n        echo $_GET['error'];\n    }\n    ?>\n</body>\n</html>\n```\n\n**dashboard.php**\n```php\n<?php\nsession_start();\n\nif (isset($_SESSION['id']) && isset($_SESSION['name'])) {\n    echo \"Welcome, \".$_SESSION['name']. \"!\";\n} else {\n    header('Location: index.php');\n    exit;\n}\n?>\n```\nThis code creates a simple login system with user registration functionality. The `login_user` function checks if the email and password combination exists in the database, while the `register_user` function inserts new users into the database.\n\nRemember to replace the placeholders (`$servername`, `$username`, `$password`, etc.) with your actual database credentials.", "code_blocks": ["```php\n<?php\n// Configuration\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"mydatabase\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to validate user credentials\nfunction login_user($email, $password) {\n    // SQL query to select user from database\n    $sql = \"SELECT * FROM users WHERE email = '$email' AND password = '$password'\";\n    \n    // Execute the query\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // Login successful, return user details\n        while ($row = $result->fetch_assoc()) {\n            return array(\n                'id' => $row['id'],\n                'name' => $row['name']\n            );\n        }\n    } else {\n        // Login failed, return false\n        return false;\n    }\n\n    // Close connection\n    $conn->close();\n}\n\n// Function to register new user\nfunction register_user($email, $password) {\n    // SQL query to insert new user into database\n    $sql = \"INSERT INTO users (email, password)\n            VALUES ('$email', '$password')\";\n\n    // Execute the query\n    if ($conn->query($sql) === TRUE) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Main logic to handle login and registration\nif (isset($_POST['login'])) {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    $user_data = login_user($email, $password);\n\n    if ($user_data !== false) {\n        session_start();\n        $_SESSION['id'] = $user_data['id'];\n        $_SESSION['name'] = $user_data['name'];\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid email or password\";\n    }\n} elseif (isset($_POST['register'])) {\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if (register_user($email, $password)) {\n        echo \"User registered successfully!\";\n    } else {\n        echo \"Failed to register user.\";\n    }\n}\n\n// Close connection\n$conn->close();\n?>\n```", "```php\n<?php\ninclude 'login.php';\n?>\n\n<html>\n<head>\n    <title>Login Page</title>\n</head>\n\n<body>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Email: <input type=\"email\" name=\"email\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Email: <input type=\"email\" name=\"email\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"register\" value=\"Register\">\n    </form>\n\n    <?php\n    if (isset($_GET['error'])) {\n        echo $_GET['error'];\n    }\n    ?>\n</body>\n</html>\n```", "```php\n<?php\nsession_start();\n\nif (isset($_SESSION['id']) && isset($_SESSION['name'])) {\n    echo \"Welcome, \".$_SESSION['name']. \"!\";\n} else {\n    header('Location: index.php');\n    exit;\n}\n?>\n```"]}
