{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a basic user login function using PHP. This example includes input validation, password hashing and verification.\n\n### **login.php**\n\n```php\n<?php\nrequire 'config.php'; // Database connection configuration file\n\n// Check if form has been submitted\nif (isset($_POST['submit'])) {\n    // Get user input data from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Input validation\n    if (empty($username) || empty($password)) {\n        echo \"Both username and password are required.\";\n    } else {\n        // Hash the password for verification\n        $hashedPassword = hash('sha256', $password);\n\n        // Query to retrieve user from database\n        $query = \"SELECT * FROM users WHERE username='$username'\";\n        $result = mysqli_query($conn, $query);\n        if (mysqli_num_rows($result) > 0) {\n            // Retrieve the hashed password from the query result\n            while ($row = mysqli_fetch_assoc($result)) {\n                $storedHashedPassword = $row['password'];\n\n                // Verify the input password with the stored hash\n                if ($hashedPassword == $storedHashedPassword) {\n                    // Login successful, proceed to authenticated area\n                    header('Location: dashboard.php');\n                    exit;\n                } else {\n                    echo \"Invalid username or password.\";\n                }\n            }\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n?>\n\n<!-- Display form for user login -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\" name=\"submit\">Login</button>\n</form>\n```\n\n### **config.php**\n\n```php\n<?php\n// Database connection configuration file\n\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"mydatabase\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n\n### **Important**\n\n- The password should be hashed using a secure algorithm (like `sha256` used here).\n- The `config.php` file contains sensitive information like database credentials. Make sure to store it securely.\n- This is a basic example and may need adjustments for production use.\n- Consider using prepared statements instead of concatenating SQL queries.\n\n### **Example Use Case**\n\nTo test the login function:\n\n1.  Create a user with username `testuser` and password `password123`.\n2.  Visit `http://localhost/login.php` in your web browser.\n3.  Enter the username and password, then submit the form to test the login functionality.\n\nRemember to replace placeholders with actual values for production use.", "code_blocks": ["```php\n<?php\nrequire 'config.php'; // Database connection configuration file\n\n// Check if form has been submitted\nif (isset($_POST['submit'])) {\n    // Get user input data from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Input validation\n    if (empty($username) || empty($password)) {\n        echo \"Both username and password are required.\";\n    } else {\n        // Hash the password for verification\n        $hashedPassword = hash('sha256', $password);\n\n        // Query to retrieve user from database\n        $query = \"SELECT * FROM users WHERE username='$username'\";\n        $result = mysqli_query($conn, $query);\n        if (mysqli_num_rows($result) > 0) {\n            // Retrieve the hashed password from the query result\n            while ($row = mysqli_fetch_assoc($result)) {\n                $storedHashedPassword = $row['password'];\n\n                // Verify the input password with the stored hash\n                if ($hashedPassword == $storedHashedPassword) {\n                    // Login successful, proceed to authenticated area\n                    header('Location: dashboard.php');\n                    exit;\n                } else {\n                    echo \"Invalid username or password.\";\n                }\n            }\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    }\n}\n?>\n\n<!-- Display form for user login -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\" name=\"submit\">Login</button>\n</form>\n```", "```php\n<?php\n// Database connection configuration file\n\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"mydatabase\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```"]}
