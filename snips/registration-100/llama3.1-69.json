{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a user registration function written in PHP. This function takes in user input, validates it, and then inserts the new user into a database.\n\n```php\n<?php\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'users_database');\n\nfunction connect_to_db() {\n    $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\nfunction register_user($username, $email, $password) {\n    // Check for empty fields\n    if (empty($username) || empty($email) || empty($password)) {\n        echo \"Please fill in all fields.\";\n        return false;\n    }\n\n    // Validate email\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email address.\";\n        return false;\n    }\n\n    // Hash password\n    $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n    // Create database connection\n    $conn = connect_to_db();\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n    mysqli_query($conn, $query);\n    if (!mysqliaffectedrows($conn)) {\n        echo \"Error inserting new user into database.\";\n        return false;\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n\n    // Return true to indicate successful registration\n    return true;\n}\n\n// Example usage:\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if (register_user($username, $email, $password)) {\n        echo \"Registration successful!\";\n    } else {\n        echo \"Error registering user.\";\n    }\n}\n?>\n```\n\nThis code uses the `mysqli` extension to interact with a MySQL database. Make sure to replace the placeholders (`DB_HOST`, `DB_USERNAME`, etc.) with your actual database credentials.\n\n**Example Usage:**\n\nCreate an HTML form for users to fill out:\n\n```html\n<form action=\"\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"email\" name=\"email\" placeholder=\"Email address\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\" name=\"register\">Register</button>\n</form>\n```\n\nWhen a user submits the form, this PHP code will be executed. If the registration is successful, it will echo \"Registration successful!\". Otherwise, it will display an error message.\n\nRemember to handle errors and exceptions properly in your production code. This example serves as a basic illustration of how to create a user registration function in PHP.", "code_blocks": ["```php\n<?php\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'users_database');\n\nfunction connect_to_db() {\n    $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_connect_error());\n    }\n    return $conn;\n}\n\nfunction register_user($username, $email, $password) {\n    // Check for empty fields\n    if (empty($username) || empty($email) || empty($password)) {\n        echo \"Please fill in all fields.\";\n        return false;\n    }\n\n    // Validate email\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email address.\";\n        return false;\n    }\n\n    // Hash password\n    $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n    // Create database connection\n    $conn = connect_to_db();\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$hashed_password')\";\n    mysqli_query($conn, $query);\n    if (!mysqliaffectedrows($conn)) {\n        echo \"Error inserting new user into database.\";\n        return false;\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n\n    // Return true to indicate successful registration\n    return true;\n}\n\n// Example usage:\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    if (register_user($username, $email, $password)) {\n        echo \"Registration successful!\";\n    } else {\n        echo \"Error registering user.\";\n    }\n}\n?>\n```", null]}
