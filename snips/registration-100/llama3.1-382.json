{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of how you could create a simple user registration system in PHP. This will include validation for username, email, password, and confirm password.\n\n```php\n<?php\n\n// Configuration for database connection\n$host = 'localhost';\n$dbname = 'registration_system';\n$username = 'your_username';\n$password = 'your_password';\n\n// Establishing the database connection\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo \"Connection failed: \" . $e->getMessage();\n}\n\nfunction register_user() {\n    global $conn;\n\n    // Get posted values from the form\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n        // Sanitize input data\n        $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);\n        $email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);\n        $password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);\n        $confirm_password = filter_var($_POST['confirm_password'], FILTER_SANITIZE_STRING);\n\n        // Check for errors\n        if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n            echo \"Please fill in all the fields.\";\n            return;\n        }\n\n        // Validate password and confirm password match\n        if ($password !== $confirm_password) {\n            echo \"Passwords do not match\";\n            return;\n        }\n\n        // Check for existing user\n        $stmt = $conn->prepare(\"SELECT * FROM users WHERE username=:username OR email=:email\");\n        $stmt->bindParam(':username', $username);\n        $stmt->bindParam(':email', $email);\n        $stmt->execute();\n\n        if ($stmt->rowCount() > 0) {\n            echo \"Username or Email already exists.\";\n            return;\n        }\n\n        // Create a new user\n        try {\n            // Hash the password before storing in database\n            $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n            // Insert into users table\n            $stmt = $conn->prepare(\"INSERT INTO users (username, email, password) VALUES (:username, :email, :password)\");\n            $stmt->bindParam(':username', $username);\n            $stmt->bindParam(':email', $email);\n            $stmt->bindParam(':password', $hashed_password);\n\n            if ($stmt->execute()) {\n                echo \"User successfully registered.\";\n            } else {\n                throw new Exception('Failed to register user');\n            }\n        } catch (Exception $e) {\n            echo 'Error registering user: ' . $e->getMessage();\n        }\n    }\n}\n\n?>\n```\n\nHere's an example of how you could call the function with some basic HTML form:\n\n```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Register</title>\n</head>\n<body>\n    <form action=\"\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n\n        <label for=\"confirm_password\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n\n        <input type=\"submit\" value=\"Register\">\n    </form>\n\n    <?php register_user(); ?>\n</body>\n</html>\n```\n\nPlease make sure to replace `'localhost'`, `'your_username'` and `'your_password'` with your own database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration for database connection\n$host = 'localhost';\n$dbname = 'registration_system';\n$username = 'your_username';\n$password = 'your_password';\n\n// Establishing the database connection\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo \"Connection failed: \" . $e->getMessage();\n}\n\nfunction register_user() {\n    global $conn;\n\n    // Get posted values from the form\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n        // Sanitize input data\n        $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);\n        $email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);\n        $password = filter_var($_POST['password'], FILTER_SANITIZE_STRING);\n        $confirm_password = filter_var($_POST['confirm_password'], FILTER_SANITIZE_STRING);\n\n        // Check for errors\n        if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n            echo \"Please fill in all the fields.\";\n            return;\n        }\n\n        // Validate password and confirm password match\n        if ($password !== $confirm_password) {\n            echo \"Passwords do not match\";\n            return;\n        }\n\n        // Check for existing user\n        $stmt = $conn->prepare(\"SELECT * FROM users WHERE username=:username OR email=:email\");\n        $stmt->bindParam(':username', $username);\n        $stmt->bindParam(':email', $email);\n        $stmt->execute();\n\n        if ($stmt->rowCount() > 0) {\n            echo \"Username or Email already exists.\";\n            return;\n        }\n\n        // Create a new user\n        try {\n            // Hash the password before storing in database\n            $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n            // Insert into users table\n            $stmt = $conn->prepare(\"INSERT INTO users (username, email, password) VALUES (:username, :email, :password)\");\n            $stmt->bindParam(':username', $username);\n            $stmt->bindParam(':email', $email);\n            $stmt->bindParam(':password', $hashed_password);\n\n            if ($stmt->execute()) {\n                echo \"User successfully registered.\";\n            } else {\n                throw new Exception('Failed to register user');\n            }\n        } catch (Exception $e) {\n            echo 'Error registering user: ' . $e->getMessage();\n        }\n    }\n}\n\n?>\n```", "```php\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Register</title>\n</head>\n<body>\n    <form action=\"\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n\n        <label for=\"confirm_password\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n\n        <input type=\"submit\" value=\"Register\">\n    </form>\n\n    <?php register_user(); ?>\n</body>\n</html>\n```"]}
