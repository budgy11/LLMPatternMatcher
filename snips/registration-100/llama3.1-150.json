{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a simple user registration function written in PHP. This function will validate the user input, check for existing users with the same email address, and store the new user's data in a database.\n\n### Database Setup (for demonstration purposes)\n\nFor this example, we'll assume you have a MySQL database set up. You should replace `localhost`, `root`, and `password` with your actual database credentials.\n\n```sql\nCREATE TABLE users (\n    id INT AUTO_INCREMENT,\n    name VARCHAR(255),\n    email VARCHAR(255) UNIQUE,\n    password_hash VARCHAR(255),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### PHP Code\n\n```php\n<?php\n// Configuration settings (replace with your database credentials)\n$DB_HOST = 'localhost';\n$DB_USERNAME = 'root';\n$DB_PASSWORD = 'password';\n$DB_NAME = 'your_database_name';\n\nfunction dbConnect() {\n    $conn = new mysqli($GLOBALS['DB_HOST'], $GLOBALS['DB_USERNAME'], $GLOBALS['DB_PASSWORD'], $GLOBALS['DB_NAME']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\nfunction dbDisconnect($conn) {\n    $conn->close();\n}\n\n// Function to register a new user\nfunction createUser($name, $email, $password) {\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password)) {\n        return array('error' => 'All fields are required.');\n    }\n\n    // Check for existing users with the same email address\n    $conn = dbConnect();\n    $sql = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        return array('error' => 'Email already exists.');\n    }\n\n    // Hash the password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $sql = \"INSERT INTO users (name, email, password_hash) VALUES ('$name', '$email', '$passwordHash')\";\n    if ($conn->query($sql)) {\n        return array('success' => 'User created successfully.');\n    } else {\n        return array('error' => 'Failed to create user.');\n    }\n\n    dbDisconnect($conn);\n}\n\n// Example usage\n$name = $_POST['name'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = createUser($name, $email, $password);\n\nif ($result['success']) {\n    echo \"User created successfully!\";\n} elseif ($result['error']) {\n    echo \"Error: \" . $result['error'];\n}\n?>\n```\n\n### Important Security Notes:\n\n*   **Always validate user input** to prevent SQL injection attacks.\n*   **Never store plain text passwords**. Use a password hashing library like `password_hash` and `password_verify`.\n*   **Use prepared statements or parameterized queries** instead of concatenating user input into your SQL queries.\n\nThis example provides basic functionality for creating users in your database. You should adapt it according to your specific requirements, including handling errors and adding more validation rules as necessary.", "code_blocks": [null, "```php\n<?php\n// Configuration settings (replace with your database credentials)\n$DB_HOST = 'localhost';\n$DB_USERNAME = 'root';\n$DB_PASSWORD = 'password';\n$DB_NAME = 'your_database_name';\n\nfunction dbConnect() {\n    $conn = new mysqli($GLOBALS['DB_HOST'], $GLOBALS['DB_USERNAME'], $GLOBALS['DB_PASSWORD'], $GLOBALS['DB_NAME']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\nfunction dbDisconnect($conn) {\n    $conn->close();\n}\n\n// Function to register a new user\nfunction createUser($name, $email, $password) {\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password)) {\n        return array('error' => 'All fields are required.');\n    }\n\n    // Check for existing users with the same email address\n    $conn = dbConnect();\n    $sql = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        return array('error' => 'Email already exists.');\n    }\n\n    // Hash the password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $sql = \"INSERT INTO users (name, email, password_hash) VALUES ('$name', '$email', '$passwordHash')\";\n    if ($conn->query($sql)) {\n        return array('success' => 'User created successfully.');\n    } else {\n        return array('error' => 'Failed to create user.');\n    }\n\n    dbDisconnect($conn);\n}\n\n// Example usage\n$name = $_POST['name'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = createUser($name, $email, $password);\n\nif ($result['success']) {\n    echo \"User created successfully!\";\n} elseif ($result['error']) {\n    echo \"Error: \" . $result['error'];\n}\n?>\n```"]}
