{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a simple user registration function in PHP:\n\n**`register_user.php`**\n```php\n<?php\n\n// Configuration\nconst DB_HOST = 'localhost';\nconst DB_USER = 'your_username';\nconst DB_PASSWORD = 'your_password';\nconst DB_NAME = 'your_database';\n\n// Function to connect to the database\nfunction db_connect() {\n  $conn = new PDO('mysql:host=' . DB_HOST . ';dbname=' . DB_NAME, DB_USER, DB_PASSWORD);\n  return $conn;\n}\n\n// Function to register a user\nfunction register_user($username, $email, $password) {\n  // Validate input data\n  if (empty($username) || empty($email) || empty($password)) {\n    throw new Exception('All fields are required.');\n  }\n\n  // Hash password\n  $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n  try {\n    // Connect to the database\n    $conn = db_connect();\n\n    // Prepare and execute query\n    $stmt = $conn->prepare('INSERT INTO users (username, email, password) VALUES (?, ?, ?)');\n    $stmt->execute([$username, $email, $hashed_password]);\n\n    // Commit changes and close connection\n    $conn->commit();\n    $conn = null;\n\n  } catch (PDOException $e) {\n    throw new Exception('Database error: ' . $e->getMessage());\n  }\n}\n\n?>\n```\n\n**`register.php`**\n```php\n<?php\n\nrequire_once 'register_user.php';\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n  try {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Call the register function\n    register_user($username, $email, $password);\n\n    echo 'User registered successfully!';\n  } catch (Exception $e) {\n    echo 'Error: ' . $e->getMessage();\n  }\n} else {\n  ?>\n  <html>\n    <body>\n      <h1>Register</h1>\n      <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Register</button>\n      </form>\n    </body>\n  </html>\n  <?php\n}\n?>\n```\n\nThis example uses the following files:\n\n* `register_user.php`: contains the `db_connect()` function and the `register_user()` function, which handles user registration.\n* `register.php`: contains the form that users will fill out to register. When submitted, it calls the `register_user()` function.\n\nThe `register_user()` function does the following:\n\n1. Validates input data (checks if all fields are filled).\n2. Hashes the password using the `password_hash()` function.\n3. Connects to the database using PDO.\n4. Prepares and executes an SQL query to insert a new user into the `users` table.\n5. Commits changes and closes the connection.\n\nThe `register.php` file contains a simple form with fields for username, email, and password. When submitted, it calls the `register_user()` function and displays a success message or error message if there's an issue.", "code_blocks": ["```php\n<?php\n\n// Configuration\nconst DB_HOST = 'localhost';\nconst DB_USER = 'your_username';\nconst DB_PASSWORD = 'your_password';\nconst DB_NAME = 'your_database';\n\n// Function to connect to the database\nfunction db_connect() {\n  $conn = new PDO('mysql:host=' . DB_HOST . ';dbname=' . DB_NAME, DB_USER, DB_PASSWORD);\n  return $conn;\n}\n\n// Function to register a user\nfunction register_user($username, $email, $password) {\n  // Validate input data\n  if (empty($username) || empty($email) || empty($password)) {\n    throw new Exception('All fields are required.');\n  }\n\n  // Hash password\n  $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n\n  try {\n    // Connect to the database\n    $conn = db_connect();\n\n    // Prepare and execute query\n    $stmt = $conn->prepare('INSERT INTO users (username, email, password) VALUES (?, ?, ?)');\n    $stmt->execute([$username, $email, $hashed_password]);\n\n    // Commit changes and close connection\n    $conn->commit();\n    $conn = null;\n\n  } catch (PDOException $e) {\n    throw new Exception('Database error: ' . $e->getMessage());\n  }\n}\n\n?>\n```", "```php\n<?php\n\nrequire_once 'register_user.php';\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n  try {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Call the register function\n    register_user($username, $email, $password);\n\n    echo 'User registered successfully!';\n  } catch (Exception $e) {\n    echo 'Error: ' . $e->getMessage();\n  }\n} else {\n  ?>\n  <html>\n    <body>\n      <h1>Register</h1>\n      <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Register</button>\n      </form>\n    </body>\n  </html>\n  <?php\n}\n?>\n```"]}
