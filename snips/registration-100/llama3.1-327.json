{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a basic user registration function written in PHP. This function will handle user input, validate data, and store the new user's information in a database.\n\n**Note:** For this example to work, you need to have MySQL installed on your server and a database created with a table named `users`. The fields used are `id` (primary key), `username`, `email`, `password`, and `created_at`.\n\n### Database Setup\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL UNIQUE,\n  password VARCHAR(255) NOT NULL,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### PHP Function\n\n```php\n<?php\n\n// Configuration\nrequire_once 'config.php'; // This file should contain your database connection settings\n\nfunction registerUser($username, $email, $password) {\n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('error' => 'All fields are required.');\n    }\n\n    // Check for unique email\n    $stmt = $GLOBALS['mysqli']->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $stmt->bind_param(\"s\", $email);\n    $stmt->execute();\n    if ($stmt->get_result()->fetch_assoc()) {\n        return array('error' => 'Email already in use.');\n    }\n\n    // Hash password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $insertUser = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $GLOBALS['mysqli']->prepare($insertUser);\n    $stmt->bind_param(\"sss\", $username, $email, $passwordHash);\n    if (!$stmt->execute()) {\n        return array('error' => 'Database error.');\n    }\n\n    // Return success message\n    return array('success' => true, 'message' => 'Registration successful!');\n}\n\n// Example usage:\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = registerUser($username, $email, $password);\necho json_encode($result);\n\n?>\n```\n\n### Configuration File (`config.php`)\n\n```php\n<?php\n\n$mysqli = new mysqli('your_host', 'your_username', 'your_password', 'your_database');\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n?>\n```\n\nThis is a basic implementation. You should adapt it to your needs and add additional validation, error handling, and security measures as necessary.\n\n### Example Use Case\n\nTo use this function, simply make an HTTP POST request with the `username`, `email`, and `password` in JSON format. The response will be in JSON format as well.\n\n```bash\ncurl -X POST \\\n  http://example.com/register.php \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"username\": \"newuser\", \"email\": \"newuser@example.com\", \"password\": \"password\"}'\n```\n\nThis should output a JSON response indicating success or error.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\nrequire_once 'config.php'; // This file should contain your database connection settings\n\nfunction registerUser($username, $email, $password) {\n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('error' => 'All fields are required.');\n    }\n\n    // Check for unique email\n    $stmt = $GLOBALS['mysqli']->prepare(\"SELECT * FROM users WHERE email = ?\");\n    $stmt->bind_param(\"s\", $email);\n    $stmt->execute();\n    if ($stmt->get_result()->fetch_assoc()) {\n        return array('error' => 'Email already in use.');\n    }\n\n    // Hash password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $insertUser = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $GLOBALS['mysqli']->prepare($insertUser);\n    $stmt->bind_param(\"sss\", $username, $email, $passwordHash);\n    if (!$stmt->execute()) {\n        return array('error' => 'Database error.');\n    }\n\n    // Return success message\n    return array('success' => true, 'message' => 'Registration successful!');\n}\n\n// Example usage:\n$username = $_POST['username'];\n$email = $_POST['email'];\n$password = $_POST['password'];\n\n$result = registerUser($username, $email, $password);\necho json_encode($result);\n\n?>\n```", "```php\n<?php\n\n$mysqli = new mysqli('your_host', 'your_username', 'your_password', 'your_database');\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n?>\n```", null]}
