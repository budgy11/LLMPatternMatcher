{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nThis example provides a basic user registration function that includes input validation, password hashing, and database insertion.\n\n### Requirements:\n\n*   PHP 7.2 or later\n*   MySQLi extension\n*   A MySQL database with a `users` table containing the following columns:\n    *   `id` (primary key)\n    *   `username`\n    *   `email`\n    *   `password`\n\n### Code:\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\nfunction registerUser($username, $email, $password) {\n    // Input validation\n    if (empty($username)) {\n        throw new Exception(\"Username is required\");\n    }\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        throw new Exception(\"Invalid email address\");\n    }\n    if ($password === '') {\n        throw new Exception(\"Password is required\");\n    }\n\n    // Hash the password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Connect to database\n    $mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($mysqli->connect_error) {\n        throw new Exception(\"Database connection failed: \" . $mysqli->connect_error);\n    }\n\n    // Insert user into database\n    $sql = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($sql);\n    $stmt->bind_param('sss', $username, $email, $hashedPassword);\n    if (!$stmt->execute()) {\n        throw new Exception(\"Failed to insert user: \" . $mysqli->error);\n    }\n\n    // Close database connection\n    $mysqli->close();\n\n    return true;\n}\n\n// Example usage:\ntry {\n    registerUser('johnDoe', 'johndoe@example.com', 'password123');\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage();\n}\n```\n### Explanation:\n\n1.  The `registerUser` function takes three arguments: `$username`, `$email`, and `$password`.\n2.  It performs basic input validation for the username, email address, and password.\n3.  If all inputs are valid, it hashes the password using PHP's built-in `password_hash` function.\n4.  The code then establishes a connection to the database using MySQLi extension.\n5.  An SQL query is prepared with placeholders for the input values, and the statement is executed with bound parameters.\n6.  If any errors occur during execution, an exception is thrown with an error message.\n7.  Finally, the database connection is closed.\n\n**Note:** This code snippet uses password hashing to securely store user passwords. Make sure you have PHP's `password` extension enabled and use a secure hash algorithm (such as `PASSWORD_DEFAULT`) for optimal security.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\nfunction registerUser($username, $email, $password) {\n    // Input validation\n    if (empty($username)) {\n        throw new Exception(\"Username is required\");\n    }\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        throw new Exception(\"Invalid email address\");\n    }\n    if ($password === '') {\n        throw new Exception(\"Password is required\");\n    }\n\n    // Hash the password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Connect to database\n    $mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($mysqli->connect_error) {\n        throw new Exception(\"Database connection failed: \" . $mysqli->connect_error);\n    }\n\n    // Insert user into database\n    $sql = \"INSERT INTO users (username, email, password) VALUES (?, ?, ?)\";\n    $stmt = $mysqli->prepare($sql);\n    $stmt->bind_param('sss', $username, $email, $hashedPassword);\n    if (!$stmt->execute()) {\n        throw new Exception(\"Failed to insert user: \" . $mysqli->error);\n    }\n\n    // Close database connection\n    $mysqli->close();\n\n    return true;\n}\n\n// Example usage:\ntry {\n    registerUser('johnDoe', 'johndoe@example.com', 'password123');\n} catch (Exception $e) {\n    echo \"Error: \" . $e->getMessage();\n}\n```"]}
