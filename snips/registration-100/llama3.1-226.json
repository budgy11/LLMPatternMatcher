{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nThe following code creates a simple user registration system with input validation and password hashing.\n\n### `register.php`\n\n```php\n<?php\n\n// Configuration variables\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Establish database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n    // Get user input\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirmPassword = $_POST['confirm_password'];\n\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password) || empty($confirmPassword)) {\n        echo 'Error: All fields are required.';\n        return false;\n    }\n\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo 'Error: Invalid email address.';\n        return false;\n    }\n\n    if ($password !== $confirmPassword) {\n        echo 'Error: Passwords do not match.';\n        return false;\n    }\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Prepare SQL query to insert user data into database\n    $sql = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n\n    if ($stmt->execute()) {\n        echo 'User registered successfully!';\n    } else {\n        echo 'Error: Registration failed.';\n    }\n\n    // Close database connection\n    $conn->close();\n}\n\nif (isset($_POST['register'])) {\n    registerUser();\n} else {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" name=\"name\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <label for=\"confirm_password\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n        <input type=\"submit\" name=\"register\" value=\"Register\">\n    </form>\n    <?php\n}\n\n?>\n```\n\n### Explanation\n\n1.  **Configuration Variables**: Replace `your_username`, `your_password`, and `your_database` with your actual database credentials.\n2.  **Database Connection**: Establish a connection to the MySQL database using the provided configuration variables.\n3.  **User Input Validation**:\n    *   Check if all input fields are filled (name, email, password, confirm password).\n    *   Validate the email address format using `filter_var`.\n    *   Verify that the password and confirmation password match.\n4.  **Password Hashing**: Use the `password_hash` function to securely store passwords in the database.\n5.  **SQL Query**: Prepare an SQL query with a parameterized statement to prevent SQL injection attacks.\n6.  **Registration Form**:\n    *   Display a registration form if the user has not submitted it yet.\n    *   Submit the form data using `$_POST`.\n7.  **User Registration**:\n\n    If all validation checks pass and the user submits the form, call the `registerUser` function to insert the user's data into the database.\n\n### Example Use Case\n\nTo use this code, simply create a new PHP file named `register.php` in your project directory. Update the configuration variables at the top with your actual database credentials.\n\n1.  Open the `register.php` file in your web browser.\n2.  Fill out the registration form with a valid email address and password.\n3.  Submit the form to register as a new user.\n\nNote: Make sure you have PHP installed on your server or local machine, along with the necessary dependencies (e.g., MySQLi extension). This code assumes a basic understanding of PHP and database concepts.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Establish database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n    // Get user input\n    $name = $_POST['name'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n    $confirmPassword = $_POST['confirm_password'];\n\n    // Validate input data\n    if (empty($name) || empty($email) || empty($password) || empty($confirmPassword)) {\n        echo 'Error: All fields are required.';\n        return false;\n    }\n\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo 'Error: Invalid email address.';\n        return false;\n    }\n\n    if ($password !== $confirmPassword) {\n        echo 'Error: Passwords do not match.';\n        return false;\n    }\n\n    // Hash password\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Prepare SQL query to insert user data into database\n    $sql = \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"sss\", $name, $email, $hashedPassword);\n\n    if ($stmt->execute()) {\n        echo 'User registered successfully!';\n    } else {\n        echo 'Error: Registration failed.';\n    }\n\n    // Close database connection\n    $conn->close();\n}\n\nif (isset($_POST['register'])) {\n    registerUser();\n} else {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label for=\"name\">Name:</label>\n        <input type=\"text\" id=\"name\" name=\"name\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <label for=\"confirm_password\">Confirm Password:</label>\n        <input type=\"password\" id=\"confirm_password\" name=\"confirm_password\"><br><br>\n        <input type=\"submit\" name=\"register\" value=\"Register\">\n    </form>\n    <?php\n}\n\n?>\n```"]}
