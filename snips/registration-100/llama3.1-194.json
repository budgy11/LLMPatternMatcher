{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a simple user registration function in PHP:\n\n```php\n<?php\n\n// Configuration variables\n$host = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($host, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to register a user\nfunction register_user() {\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        // Get the posted data\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n        $confirm_password = $_POST['confirm_password'];\n\n        // Validate the input data\n        if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n            echo \"Please fill in all fields.\";\n            return;\n        }\n\n        if ($password !== $confirm_password) {\n            echo \"Passwords do not match.\";\n            return;\n        }\n\n        // Check if the username is already taken\n        $sql = \"SELECT * FROM users WHERE username = '$username'\";\n        $result = $conn->query($sql);\n\n        if ($result->num_rows > 0) {\n            echo \"Username already exists.\";\n            return;\n        }\n\n        // Hash the password\n        $password = password_hash($password, PASSWORD_DEFAULT);\n\n        // Insert the user data into the database\n        $sql = \"INSERT INTO users (username, email, password)\n                VALUES ('$username', '$email', '$password')\";\n        if ($conn->query($sql) === TRUE) {\n            echo \"User created successfully.\";\n        } else {\n            echo \"Error creating user: \" . $conn->error;\n        }\n\n        // Close the database connection\n        $conn->close();\n    }\n}\n\n?>\n```\n\nYou can use this function in your PHP script like so:\n\n```php\nregister_user();\n\n// The following code is for the registration form.\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Email:</label>\n    <input type=\"email\" name=\"email\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <label>Confirm Password:</label>\n    <input type=\"password\" name=\"confirm_password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```\n\nThis script creates a simple user registration form. When the form is submitted, it checks if all fields are filled in, if the password matches the confirm password, and if the username already exists in the database. If everything is valid, it inserts the user data into the database using hashed passwords.\n\nPlease note that this is a basic example. In a real-world application, you would want to add more validation checks (e.g., email address format), error handling (e.g., display error messages on the form instead of echoing them directly), and security measures (e.g., prepared statements for SQL queries).", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$host = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($host, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to register a user\nfunction register_user() {\n    if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n        // Get the posted data\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n        $confirm_password = $_POST['confirm_password'];\n\n        // Validate the input data\n        if (empty($username) || empty($email) || empty($password) || empty($confirm_password)) {\n            echo \"Please fill in all fields.\";\n            return;\n        }\n\n        if ($password !== $confirm_password) {\n            echo \"Passwords do not match.\";\n            return;\n        }\n\n        // Check if the username is already taken\n        $sql = \"SELECT * FROM users WHERE username = '$username'\";\n        $result = $conn->query($sql);\n\n        if ($result->num_rows > 0) {\n            echo \"Username already exists.\";\n            return;\n        }\n\n        // Hash the password\n        $password = password_hash($password, PASSWORD_DEFAULT);\n\n        // Insert the user data into the database\n        $sql = \"INSERT INTO users (username, email, password)\n                VALUES ('$username', '$email', '$password')\";\n        if ($conn->query($sql) === TRUE) {\n            echo \"User created successfully.\";\n        } else {\n            echo \"Error creating user: \" . $conn->error;\n        }\n\n        // Close the database connection\n        $conn->close();\n    }\n}\n\n?>\n```", "```php\nregister_user();\n\n// The following code is for the registration form.\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Email:</label>\n    <input type=\"email\" name=\"email\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <label>Confirm Password:</label>\n    <input type=\"password\" name=\"confirm_password\"><br><br>\n    <input type=\"submit\" value=\"Register\">\n</form>\n```"]}
