{"prompt": "Create a user registration function using php", "llm_output": "Here is an example of a simple user registration function in PHP:\n\n**`register_user.php`**\n```php\n<?php\n\n// Configuration settings\n$required_fields = array('username', 'email', 'password');\n$db_host = 'localhost';\n$db_username = 'your_db_username';\n$db_password = 'your_db_password';\n$db_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction validate_fields($data) {\n    // Validate username and email fields\n    if (!filter_var($data['email'], FILTER_VALIDATE_EMAIL)) {\n        return false;\n    }\n    \n    // Check if username already exists in database\n    $query = \"SELECT * FROM users WHERE username = '$data[username]'\";\n    $result = $conn->query($query);\n    if ($result->num_rows > 0) {\n        return false;\n    }\n    \n    // Validate password field (at least 8 characters long)\n    if (strlen($data['password']) < 8) {\n        return false;\n    }\n    \n    return true;\n}\n\nfunction register_user($data) {\n    global $conn;\n    \n    // Check if all required fields are filled\n    if (!array_intersect_key(array_flip($required_fields), $data)) {\n        echo \"Please fill out all fields\";\n        exit();\n    }\n    \n    // Validate user input\n    if (!validate_fields($data)) {\n        echo \"Invalid email or username\";\n        exit();\n    }\n    \n    // Hash password for storage\n    $password_hash = password_hash($data['password'], PASSWORD_DEFAULT);\n    \n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$data[username]', '$data[email]', '$password_hash')\";\n    if (!$conn->query($query)) {\n        echo \"Error registering user\";\n        exit();\n    }\n    \n    // Send confirmation email (example)\n    mail($data['email'], 'Account Confirmation', 'Welcome to our website!');\n}\n\n// Handle POST request\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    register_user($_POST);\n}\n\n?>\n```\nThis script defines two functions: `validate_fields()` checks if the user input is valid (username and email are in correct format, username does not exist, password has at least 8 characters), and `register_user()` inserts a new user into the database.\n\n**How to use this code**\n\n1. Create an HTML form with the following fields:\n\t* Username\n\t* Email\n\t* Password\n2. Send a POST request from your HTML form to this script (e.g., by using AJAX)\n3. If all input is valid, the user will be registered and a confirmation email sent\n\n**Note**: This code assumes that you have already created a `users` table in your database with columns for `username`, `email`, and `password`. You should also replace the placeholders (`your_db_username`, etc.) with your actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$required_fields = array('username', 'email', 'password');\n$db_host = 'localhost';\n$db_username = 'your_db_username';\n$db_password = 'your_db_password';\n$db_name = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction validate_fields($data) {\n    // Validate username and email fields\n    if (!filter_var($data['email'], FILTER_VALIDATE_EMAIL)) {\n        return false;\n    }\n    \n    // Check if username already exists in database\n    $query = \"SELECT * FROM users WHERE username = '$data[username]'\";\n    $result = $conn->query($query);\n    if ($result->num_rows > 0) {\n        return false;\n    }\n    \n    // Validate password field (at least 8 characters long)\n    if (strlen($data['password']) < 8) {\n        return false;\n    }\n    \n    return true;\n}\n\nfunction register_user($data) {\n    global $conn;\n    \n    // Check if all required fields are filled\n    if (!array_intersect_key(array_flip($required_fields), $data)) {\n        echo \"Please fill out all fields\";\n        exit();\n    }\n    \n    // Validate user input\n    if (!validate_fields($data)) {\n        echo \"Invalid email or username\";\n        exit();\n    }\n    \n    // Hash password for storage\n    $password_hash = password_hash($data['password'], PASSWORD_DEFAULT);\n    \n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$data[username]', '$data[email]', '$password_hash')\";\n    if (!$conn->query($query)) {\n        echo \"Error registering user\";\n        exit();\n    }\n    \n    // Send confirmation email (example)\n    mail($data['email'], 'Account Confirmation', 'Welcome to our website!');\n}\n\n// Handle POST request\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    register_user($_POST);\n}\n\n?>\n```"]}
