{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a user registration function in PHP. This function will create a new user in your database, hash the password with bcrypt, and sanitize input to prevent SQL injection.\n\nFirst, you'll need to set up a database connection. Here's an example:\n\n```php\n// config.php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n```\n\nNext, you'll need to include the `config.php` file in your registration script.\n\n```php\n// register.php\nrequire_once 'config.php';\n\nfunction registerUser($email, $username, $password) {\n    // Sanitize input\n    $email = mysqli_real_escape_string($conn, $email);\n    $username = mysqli_real_escape_string($conn, $username);\n\n    // Hash password with bcrypt\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert user into database\n    $sql = \"INSERT INTO users (email, username, password) VALUES ('$email', '$username', '$hashedPassword')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Check for POST request\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Get post data\n    $email = $_POST['email'];\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Register user\n    registerUser($email, $username, $password);\n} else {\n    echo 'Invalid request method';\n}\n```\n\nRemember to replace `localhost`, `root`, and the database name with your actual MySQL details.\n\nThis code does not include any security measures such as CSRF tokens or email validation. It's recommended you add these to protect against common web vulnerabilities.\n\n```php\n// Example of how to implement email validation using filter_var function\nif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    echo 'Invalid email';\n} else {\n    registerUser($email, $username, $password);\n}\n```\n\nAlso, please note that this is a basic example and should not be used in production as is. \n\nRemember to use prepared statements for query execution which is more secure than concatenating variables directly into SQL queries.\n\n```php\n$stmt = $conn->prepare(\"INSERT INTO users (email, username, password) VALUES (?, ?, ?)\");\n$stmt->bind_param(\"sss\", $email, $username, $hashedPassword);\n```\n\nThis will prevent SQL injection attacks.", "code_blocks": ["```php\n// config.php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"users\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n```", "```php\n// register.php\nrequire_once 'config.php';\n\nfunction registerUser($email, $username, $password) {\n    // Sanitize input\n    $email = mysqli_real_escape_string($conn, $email);\n    $username = mysqli_real_escape_string($conn, $username);\n\n    // Hash password with bcrypt\n    $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert user into database\n    $sql = \"INSERT INTO users (email, username, password) VALUES ('$email', '$username', '$hashedPassword')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Check for POST request\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Get post data\n    $email = $_POST['email'];\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Register user\n    registerUser($email, $username, $password);\n} else {\n    echo 'Invalid request method';\n}\n```", "```php\n// Example of how to implement email validation using filter_var function\nif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n    echo 'Invalid email';\n} else {\n    registerUser($email, $username, $password);\n}\n```", "```php\n$stmt = $conn->prepare(\"INSERT INTO users (email, username, password) VALUES (?, ?, ?)\");\n$stmt->bind_param(\"sss\", $email, $username, $hashedPassword);\n```"]}
