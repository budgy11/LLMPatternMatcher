{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a simple user registration function in PHP. This function will validate the input data, hash and store the password securely.\n\n```php\n<?php\n\n// Database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'root';\n$dbPassword = '';\n$dbName = 'your_database_name';\n\n// Create a database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check the connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n    // Input validation and sanitization\n    if (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n\n        // Sanitize input data\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate email and username\n        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            if (strlen($username) > 2 && strlen($username) < 32) {\n\n                // Hash password\n                $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n                // Prepare SQL query to insert user data into database\n                $sql = \"INSERT INTO users (username, email, password)\n                    VALUES (?, ?, ?)\";\n\n                // Bind parameters\n                if ($stmt = mysqli_prepare($conn, $sql)) {\n                    mysqli_stmt_bind_param($stmt, 'sss', $username, $email, $hashedPassword);\n\n                    // Execute query\n                    if (mysqli_stmt_execute($stmt)) {\n                        echo \"User registered successfully!\";\n                    } else {\n                        echo \"Error registering user: \" . mysqli_error($conn);\n                    }\n\n                    // Close prepared statement\n                    mysqli_stmt_close($stmt);\n                }\n            } else {\n                echo \"Username must be between 3 and 32 characters long.\";\n            }\n        } else {\n            echo \"Invalid email address.\";\n        }\n    } else {\n        echo \"Missing required fields: username, email, password\";\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\n?>\n```\n\n**How to Use**\n---------------\n\nTo use the above function in a form submission scenario:\n\n1. Create an HTML form with `username`, `email` and `password` input fields.\n2. Add the following PHP code after your HTML form:\n```php\n<?php registerUser(); ?>\n```\n3. In the `registerUser()` function, replace `'your_database_name'` with the name of your actual database.\n\nNote: Make sure to enable password hashing by using the `password_hash()` function and ensure you're using a secure password storage mechanism (e.g., bcrypt).", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'root';\n$dbPassword = '';\n$dbName = 'your_database_name';\n\n// Create a database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check the connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction registerUser() {\n    // Input validation and sanitization\n    if (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n\n        // Sanitize input data\n        $username = $_POST['username'];\n        $email = $_POST['email'];\n        $password = $_POST['password'];\n\n        // Validate email and username\n        if (filter_var($email, FILTER_VALIDATE_EMAIL)) {\n            if (strlen($username) > 2 && strlen($username) < 32) {\n\n                // Hash password\n                $hashedPassword = password_hash($password, PASSWORD_DEFAULT);\n\n                // Prepare SQL query to insert user data into database\n                $sql = \"INSERT INTO users (username, email, password)\n                    VALUES (?, ?, ?)\";\n\n                // Bind parameters\n                if ($stmt = mysqli_prepare($conn, $sql)) {\n                    mysqli_stmt_bind_param($stmt, 'sss', $username, $email, $hashedPassword);\n\n                    // Execute query\n                    if (mysqli_stmt_execute($stmt)) {\n                        echo \"User registered successfully!\";\n                    } else {\n                        echo \"Error registering user: \" . mysqli_error($conn);\n                    }\n\n                    // Close prepared statement\n                    mysqli_stmt_close($stmt);\n                }\n            } else {\n                echo \"Username must be between 3 and 32 characters long.\";\n            }\n        } else {\n            echo \"Invalid email address.\";\n        }\n    } else {\n        echo \"Missing required fields: username, email, password\";\n    }\n\n    // Close database connection\n    mysqli_close($conn);\n}\n\n?>\n```", "```php\n<?php registerUser(); ?>\n```"]}
