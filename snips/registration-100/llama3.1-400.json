{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nBelow is an example of a simple user registration function written in PHP. This function will validate the input data, check for duplicate usernames and passwords, and store the new user's information in a database.\n\n### Prerequisites\n\n* PHP 7.2 or higher\n* A MySQL database (you can use any other database system if you prefer)\n* The `mysqli` extension is enabled in your PHP configuration\n\n### Code\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\nfunction registerUser($username, $email, $password) {\n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('error' => 'Please fill in all fields.');\n    }\n\n    // Check for duplicate usernames and passwords\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        if (mysqli_num_rows($result) > 0) {\n            return array('error' => 'Username already exists.');\n        }\n    }\n\n    // Check for duplicate emails\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        if (mysqli_num_rows($result) > 0) {\n            return array('error' => 'Email already exists.');\n        }\n    }\n\n    // Hash password\n    $passwordHash = hash('sha256', $password);\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$passwordHash')\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        return array('success' => 'User registered successfully.');\n    } else {\n        return array('error' => 'Failed to register user: ' . mysqli_error($GLOBALS['db']));\n    }\n}\n\n// Connect to database\n$db = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\nif ($db->connect_errno) {\n    echo \"Failed to connect to database.\";\n    exit();\n}\n?>\n```\n### Example Use Cases\n\nTo use the `registerUser` function, simply call it with the required arguments:\n```php\n$username = 'newuser';\n$email = 'newuser@example.com';\n$password = 'password123';\n\n$result = registerUser($username, $email, $password);\nif (isset($result['success'])) {\n    echo $result['success'];\n} elseif (isset($result['error'])) {\n    echo $result['error'];\n}\n```\nNote that this is a basic example and you should consider implementing additional security measures such as:\n\n* Sanitizing user input\n* Using prepared statements\n* Storing passwords securely (e.g. using bcrypt)\n* Validating email addresses\n\nRemember to replace the placeholders (`your_host`, `your_username`, etc.) with your actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_host');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\nfunction registerUser($username, $email, $password) {\n    // Validate input data\n    if (empty($username) || empty($email) || empty($password)) {\n        return array('error' => 'Please fill in all fields.');\n    }\n\n    // Check for duplicate usernames and passwords\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        if (mysqli_num_rows($result) > 0) {\n            return array('error' => 'Username already exists.');\n        }\n    }\n\n    // Check for duplicate emails\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        if (mysqli_num_rows($result) > 0) {\n            return array('error' => 'Email already exists.');\n        }\n    }\n\n    // Hash password\n    $passwordHash = hash('sha256', $password);\n\n    // Insert new user into database\n    $query = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$passwordHash')\";\n    if ($result = mysqli_query($GLOBALS['db'], $query)) {\n        return array('success' => 'User registered successfully.');\n    } else {\n        return array('error' => 'Failed to register user: ' . mysqli_error($GLOBALS['db']));\n    }\n}\n\n// Connect to database\n$db = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\nif ($db->connect_errno) {\n    echo \"Failed to connect to database.\";\n    exit();\n}\n?>\n```", "```php\n$username = 'newuser';\n$email = 'newuser@example.com';\n$password = 'password123';\n\n$result = registerUser($username, $email, $password);\nif (isset($result['success'])) {\n    echo $result['success'];\n} elseif (isset($result['error'])) {\n    echo $result['error'];\n}\n```"]}
