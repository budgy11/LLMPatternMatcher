{"prompt": "Create a user registration function using php", "llm_output": "Here's an example of a simple user registration function in PHP:\n\n**register.php**\n```php\n<?php\n// Configuration settings\n$requiredFields = array('username', 'email', 'password');\n$dbHost = 'localhost';\n$dbUsername = 'your_database_username';\n$dbPassword = 'your_database_password';\n$dbName = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to validate user input\nfunction validateInput($data) {\n    foreach ($requiredFields as $field) {\n        if (!isset($data[$field]) || empty($data[$field])) {\n            return false;\n        }\n    }\n    return true;\n}\n\n// Function to register new user\nfunction registerUser($username, $email, $password) {\n    // Check if username already exists\n    $sql = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        return array('error' => 'Username already taken');\n    }\n\n    // Hash password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $sql = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$passwordHash')\";\n    if ($conn->query($sql)) {\n        return array('success' => 'User registered successfully');\n    } else {\n        return array('error' => 'Failed to register user');\n    }\n}\n\n// Handle form submission\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Validate input\n    if (!validateInput(array('username' => $username, 'email' => $email, 'password' => $password))) {\n        return array('error' => 'Please fill out all required fields');\n    }\n\n    // Register user\n    $result = registerUser($username, $email, $password);\n    if ($result['success']) {\n        echo \"You have been registered successfully!\";\n    } else {\n        echo \"Error: \" . $result['error'];\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```\n\n**index.php**\n```php\n<?php\ninclude 'register.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Register</title>\n</head>\n<body>\n    <h1>Register</h1>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\" name=\"register\">Register</button>\n    </form>\n\n    <?php if (isset($_POST['register'])) { ?>\n        <?php echo $result; ?>\n    <?php } ?>\n</body>\n</html>\n```\nThis example uses a simple form to collect user input and then calls the `registerUser()` function to register the new user. The function checks for errors, hashes the password, and inserts the new user into the database.\n\nPlease note that this is a basic example and you should consider implementing additional security measures such as:\n\n* Input validation and sanitization\n* Password hashing using more secure algorithms (e.g., bcrypt)\n* Authentication and authorization mechanisms\n* Error handling and logging", "code_blocks": ["```php\n<?php\n// Configuration settings\n$requiredFields = array('username', 'email', 'password');\n$dbHost = 'localhost';\n$dbUsername = 'your_database_username';\n$dbPassword = 'your_database_password';\n$dbName = 'your_database_name';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to validate user input\nfunction validateInput($data) {\n    foreach ($requiredFields as $field) {\n        if (!isset($data[$field]) || empty($data[$field])) {\n            return false;\n        }\n    }\n    return true;\n}\n\n// Function to register new user\nfunction registerUser($username, $email, $password) {\n    // Check if username already exists\n    $sql = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        return array('error' => 'Username already taken');\n    }\n\n    // Hash password\n    $passwordHash = password_hash($password, PASSWORD_DEFAULT);\n\n    // Insert new user into database\n    $sql = \"INSERT INTO users (username, email, password) VALUES ('$username', '$email', '$passwordHash')\";\n    if ($conn->query($sql)) {\n        return array('success' => 'User registered successfully');\n    } else {\n        return array('error' => 'Failed to register user');\n    }\n}\n\n// Handle form submission\nif (isset($_POST['register'])) {\n    $username = $_POST['username'];\n    $email = $_POST['email'];\n    $password = $_POST['password'];\n\n    // Validate input\n    if (!validateInput(array('username' => $username, 'email' => $email, 'password' => $password))) {\n        return array('error' => 'Please fill out all required fields');\n    }\n\n    // Register user\n    $result = registerUser($username, $email, $password);\n    if ($result['success']) {\n        echo \"You have been registered successfully!\";\n    } else {\n        echo \"Error: \" . $result['error'];\n    }\n}\n\n// Close database connection\n$conn->close();\n?>\n```", "```php\n<?php\ninclude 'register.php';\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Register</title>\n</head>\n<body>\n    <h1>Register</h1>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\" name=\"register\">Register</button>\n    </form>\n\n    <?php if (isset($_POST['register'])) { ?>\n        <?php echo $result; ?>\n    <?php } ?>\n</body>\n</html>\n```"]}
