{"prompt": "Create a user registration function using php", "llm_output": "Here is an example of a simple user registration function in PHP:\n\n**User Registration Function**\n```php\nfunction registerUser($data) {\n  // Validate input data\n  if (!isset($data['name']) || !isset($data['email']) || !isset($data['password'])) {\n    return array('error' => 'Invalid request', 'status' => 400);\n  }\n\n  $name = trim(filter_var($data['name'], FILTER_SANITIZE_STRING));\n  $email = filter_var($data['email'], FILTER_VALIDATE_EMAIL);\n  $password = password_hash($data['password'], PASSWORD_DEFAULT);\n\n  // Check if email already exists in database\n  if (checkEmailExists($email)) {\n    return array('error' => 'Email already exists', 'status' => 400);\n  }\n\n  // Insert new user into database\n  $userId = insertUser($name, $email, $password);\n\n  // Return success response with user ID\n  return array('message' => 'User registered successfully', 'user_id' => $userId, 'status' => 201);\n}\n\n// Helper function to check if email exists in database\nfunction checkEmailExists($email) {\n  global $db; // assume you have a database connection variable named $db\n\n  $query = \"SELECT * FROM users WHERE email = :email\";\n  $stmt = $db->prepare($query);\n  $stmt->bindParam(':email', $email);\n  $stmt->execute();\n\n  return $stmt->fetchColumn() > 0;\n}\n\n// Helper function to insert new user into database\nfunction insertUser($name, $email, $password) {\n  global $db; // assume you have a database connection variable named $db\n\n  $query = \"INSERT INTO users (name, email, password) VALUES (:name, :email, :password)\";\n  $stmt = $db->prepare($query);\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':email', $email);\n  $stmt->bindParam(':password', $password);\n  $stmt->execute();\n\n  return $db->lastInsertId();\n}\n```\n**Example Use Case**\n\nYou can call the `registerUser` function by passing an array of user data:\n```php\n$data = array(\n  'name' => 'John Doe',\n  'email' => 'johndoe@example.com',\n  'password' => 'mysecretpassword'\n);\n\n$result = registerUser($data);\n\nif ($result['status'] == 201) {\n  echo \"User registered successfully! User ID: {$result['user_id']}\";\n} else {\n  echo $result['error'];\n}\n```\nThis code will validate the input data, check if the email already exists in the database, and insert a new user into the database if all checks pass. The function returns an array with a success message or an error message depending on the outcome.\n\nNote that this is a basic example and you should consider implementing additional security measures, such as password hashing, to protect your users' data.", "code_blocks": ["```php\nfunction registerUser($data) {\n  // Validate input data\n  if (!isset($data['name']) || !isset($data['email']) || !isset($data['password'])) {\n    return array('error' => 'Invalid request', 'status' => 400);\n  }\n\n  $name = trim(filter_var($data['name'], FILTER_SANITIZE_STRING));\n  $email = filter_var($data['email'], FILTER_VALIDATE_EMAIL);\n  $password = password_hash($data['password'], PASSWORD_DEFAULT);\n\n  // Check if email already exists in database\n  if (checkEmailExists($email)) {\n    return array('error' => 'Email already exists', 'status' => 400);\n  }\n\n  // Insert new user into database\n  $userId = insertUser($name, $email, $password);\n\n  // Return success response with user ID\n  return array('message' => 'User registered successfully', 'user_id' => $userId, 'status' => 201);\n}\n\n// Helper function to check if email exists in database\nfunction checkEmailExists($email) {\n  global $db; // assume you have a database connection variable named $db\n\n  $query = \"SELECT * FROM users WHERE email = :email\";\n  $stmt = $db->prepare($query);\n  $stmt->bindParam(':email', $email);\n  $stmt->execute();\n\n  return $stmt->fetchColumn() > 0;\n}\n\n// Helper function to insert new user into database\nfunction insertUser($name, $email, $password) {\n  global $db; // assume you have a database connection variable named $db\n\n  $query = \"INSERT INTO users (name, email, password) VALUES (:name, :email, :password)\";\n  $stmt = $db->prepare($query);\n  $stmt->bindParam(':name', $name);\n  $stmt->bindParam(':email', $email);\n  $stmt->bindParam(':password', $password);\n  $stmt->execute();\n\n  return $db->lastInsertId();\n}\n```", "```php\n$data = array(\n  'name' => 'John Doe',\n  'email' => 'johndoe@example.com',\n  'password' => 'mysecretpassword'\n);\n\n$result = registerUser($data);\n\nif ($result['status'] == 201) {\n  echo \"User registered successfully! User ID: {$result['user_id']}\";\n} else {\n  echo $result['error'];\n}\n```"]}
