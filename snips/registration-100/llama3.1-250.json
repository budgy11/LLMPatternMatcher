{"prompt": "Create a user registration function using php", "llm_output": "**User Registration Function in PHP**\n=====================================\n\nThe following is an example of a user registration function written in PHP. This function will handle the creation of new users and store their data in a MySQL database.\n\n### Requirements\n\n* PHP 7+\n* MySQL Database (with `username`, `email`, `password` fields)\n* A web server (e.g., Apache) to host your application\n\n### Function Code\n```php\nfunction registerUser($name, $email, $password, $confirmPassword) {\n    // Validate input data\n    if (!$name || !$email || !$password || !$confirmPassword) {\n        throw new Exception('All fields are required');\n    }\n\n    if (strlen($password) < 8) {\n        throw new Exception('Password must be at least 8 characters long');\n    }\n\n    if ($password !== $confirmPassword) {\n        throw new Exception('Passwords do not match');\n    }\n\n    // Connect to database\n    $conn = mysqli_connect('localhost', 'username', 'password', 'database');\n\n    // Check connection\n    if (!$conn) {\n        throw new Exception('Database connection failed');\n    }\n\n    // Prepare and execute query\n    $stmt = mysqli_prepare($conn, \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\");\n    mysqli_stmt_bind_param($stmt, 'sss', $name, $email, password_hash($password, PASSWORD_DEFAULT));\n    mysqli_stmt_execute($stmt);\n\n    // Get new user ID\n    $newUserId = mysqli_insert_id($conn);\n\n    // Close connection\n    mysqli_close($conn);\n\n    return array('success' => true, 'message' => 'User created successfully', 'userId' => $newUserId);\n}\n```\n### Explanation\n\n1. The function takes four parameters: `name`, `email`, `password`, and `confirmPassword`.\n2. It first validates the input data to ensure all fields are filled in and the password meets minimum length requirements.\n3. If validation fails, an exception is thrown with a descriptive message.\n4. If validation succeeds, it connects to the MySQL database using `mysqli_connect()`.\n5. A prepared statement (`mysqli_prepare()` and `mysqli_stmt_bind_param()`) is used to insert new user data into the `users` table.\n6. The function then closes the database connection (`mysqli_close()`) and returns an array containing a success message, a new user ID (generated by `mysqli_insert_id()`), and a boolean indicating whether registration was successful.\n\n### Example Usage\n```php\ntry {\n    $result = registerUser('John Doe', 'john@example.com', 'mysecretpassword', 'mysecretpassword');\n    if ($result['success']) {\n        echo \"New user created successfully! ID: \" . $result['userId'];\n    } else {\n        throw new Exception($result['message']);\n    }\n} catch (Exception $e) {\n    echo \"Error creating new user: \" . $e->getMessage();\n}\n```\nNote that this is just an example, and you should adapt it to your specific use case. Additionally, make sure to adjust the database connection settings to match your own MySQL setup.", "code_blocks": ["```php\nfunction registerUser($name, $email, $password, $confirmPassword) {\n    // Validate input data\n    if (!$name || !$email || !$password || !$confirmPassword) {\n        throw new Exception('All fields are required');\n    }\n\n    if (strlen($password) < 8) {\n        throw new Exception('Password must be at least 8 characters long');\n    }\n\n    if ($password !== $confirmPassword) {\n        throw new Exception('Passwords do not match');\n    }\n\n    // Connect to database\n    $conn = mysqli_connect('localhost', 'username', 'password', 'database');\n\n    // Check connection\n    if (!$conn) {\n        throw new Exception('Database connection failed');\n    }\n\n    // Prepare and execute query\n    $stmt = mysqli_prepare($conn, \"INSERT INTO users (name, email, password) VALUES (?, ?, ?)\");\n    mysqli_stmt_bind_param($stmt, 'sss', $name, $email, password_hash($password, PASSWORD_DEFAULT));\n    mysqli_stmt_execute($stmt);\n\n    // Get new user ID\n    $newUserId = mysqli_insert_id($conn);\n\n    // Close connection\n    mysqli_close($conn);\n\n    return array('success' => true, 'message' => 'User created successfully', 'userId' => $newUserId);\n}\n```", "```php\ntry {\n    $result = registerUser('John Doe', 'john@example.com', 'mysecretpassword', 'mysecretpassword');\n    if ($result['success']) {\n        echo \"New user created successfully! ID: \" . $result['userId'];\n    } else {\n        throw new Exception($result['message']);\n    }\n} catch (Exception $e) {\n    echo \"Error creating new user: \" . $e->getMessage();\n}\n```"]}
