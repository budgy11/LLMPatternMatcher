{"prompt": "Create a purchase functionality using php", "llm_output": "**Purchase Functionality in PHP**\n=====================================\n\nThis example demonstrates a basic purchase functionality using PHP. It includes a form to enter customer details and product information, as well as processing the order.\n\n**Database Schema (simplified)**\n------------------------------\n\n```sql\nCREATE TABLE customers (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255),\n  email VARCHAR(255)\n);\n\nCREATE TABLE products (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n\nCREATE TABLE orders (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  customer_id INT,\n  product_id INT,\n  quantity INT,\n  total DECIMAL(10,2),\n  FOREIGN KEY (customer_id) REFERENCES customers(id),\n  FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n\n**PHP Code**\n------------\n\n### `includes` directory\nCreate a new directory called `includes` and add the following files:\n\n#### **config.php**\n\n```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n\n#### **functions.php**\n\n```php\n<?php\nfunction getCustomer($id) {\n  global $conn;\n  $sql = \"SELECT * FROM customers WHERE id = '$id'\";\n  $result = $conn->query($sql);\n  return $result->fetch_assoc();\n}\n\nfunction getProduct($id) {\n  global $conn;\n  $sql = \"SELECT * FROM products WHERE id = '$id'\";\n  $result = $conn->query($sql);\n  return $result->fetch_assoc();\n}\n\nfunction addOrder() {\n  global $conn;\n  $customer_id = $_POST['customer_id'];\n  $product_id = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  $sql = \"INSERT INTO orders (customer_id, product_id, quantity)\n          VALUES ('$customer_id', '$product_id', '$quantity')\";\n  if ($conn->query($sql) === TRUE) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction processPayment() {\n  global $conn;\n  // Implement payment processing logic here\n}\n?>\n```\n\n### **index.php**\n\n```php\n<?php\ninclude 'includes/config.php';\ninclude 'includes/functions.php';\n\nif (isset($_POST['submit'])) {\n  // Process form data\n  $customer_id = $_POST['customer_id'];\n  $product_id = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  // Add order to database\n  if (addOrder()) {\n    echo \"Order added successfully!\";\n  } else {\n    echo \"Error adding order.\";\n  }\n} else {\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"customer_id\">Customer ID:</label>\n  <input type=\"text\" id=\"customer_id\" name=\"customer_id\"><br><br>\n\n  <label for=\"product_id\">Product ID:</label>\n  <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n\n  <label for=\"quantity\">Quantity:</label>\n  <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n\n  <button type=\"submit\" name=\"submit\">Add Order</button>\n</form>\n<?php } ?>\n```\n\nThis code creates a basic purchase functionality with the following features:\n\n1. User can enter customer details and product information.\n2. When user submits the form, the order is added to the database.\n3. Payment processing logic is not implemented in this example.\n\nNote: This is a simplified example and you should implement proper validation and security measures for your production environment. Additionally, the payment processing logic is not implemented here; you can use external services like Stripe or PayPal for that purpose.", "code_blocks": [null, "```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```", "```php\n<?php\nfunction getCustomer($id) {\n  global $conn;\n  $sql = \"SELECT * FROM customers WHERE id = '$id'\";\n  $result = $conn->query($sql);\n  return $result->fetch_assoc();\n}\n\nfunction getProduct($id) {\n  global $conn;\n  $sql = \"SELECT * FROM products WHERE id = '$id'\";\n  $result = $conn->query($sql);\n  return $result->fetch_assoc();\n}\n\nfunction addOrder() {\n  global $conn;\n  $customer_id = $_POST['customer_id'];\n  $product_id = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  $sql = \"INSERT INTO orders (customer_id, product_id, quantity)\n          VALUES ('$customer_id', '$product_id', '$quantity')\";\n  if ($conn->query($sql) === TRUE) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction processPayment() {\n  global $conn;\n  // Implement payment processing logic here\n}\n?>\n```", "```php\n<?php\ninclude 'includes/config.php';\ninclude 'includes/functions.php';\n\nif (isset($_POST['submit'])) {\n  // Process form data\n  $customer_id = $_POST['customer_id'];\n  $product_id = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  // Add order to database\n  if (addOrder()) {\n    echo \"Order added successfully!\";\n  } else {\n    echo \"Error adding order.\";\n  }\n} else {\n?>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n  <label for=\"customer_id\">Customer ID:</label>\n  <input type=\"text\" id=\"customer_id\" name=\"customer_id\"><br><br>\n\n  <label for=\"product_id\">Product ID:</label>\n  <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n\n  <label for=\"quantity\">Quantity:</label>\n  <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n\n  <button type=\"submit\" name=\"submit\">Add Order</button>\n</form>\n<?php } ?>\n```"]}
