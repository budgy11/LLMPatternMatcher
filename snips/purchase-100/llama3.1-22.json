{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how you can create a simple purchase cart functionality in PHP:\n\n**cart.php**\n```php\n<?php\n// Initialize cart array if it doesn't exist\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addItemToCart($item_id, $quantity) {\n    global $db;\n    \n    // Check if item already exists in cart\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        if ($cart_item['id'] == $item_id) {\n            // If it does, increment quantity\n            $cart_item['quantity'] += $quantity;\n            return;\n        }\n    }\n\n    // If not, add new item to cart\n    $_SESSION['cart'][] = array(\n        'id' => $item_id,\n        'name' => $item_name,\n        'price' => $item_price,\n        'quantity' => $quantity\n    );\n}\n\n// Function to display cart contents\nfunction displayCart() {\n    global $db;\n    \n    echo '<table border=\"1\">';\n    echo '<tr><th>Item</th><th>Price</th><th>Quantity</th><th>Total</th></tr>';\n    \n    // Loop through each item in cart\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        $item = get_item($db, $cart_item['id']);\n        echo '<tr>';\n        echo '<td>' . $item['name'] . '</td>';\n        echo '<td>$' . number_format($item['price'], 2) . '</td>';\n        echo '<td>' . $cart_item['quantity'] . '</td>';\n        echo '<td>$' . number_format($cart_item['price'] * $cart_item['quantity'], 2) . '</td>';\n        echo '</tr>';\n    }\n    \n    // Calculate total cost of all items in cart\n    $total = array_sum(array_map(function($item) { return $item['price'] * $item['quantity']; }, $_SESSION['cart']));\n    echo '<tr><th colspan=\"3\">Total:</th><td>$' . number_format($total, 2) . '</td></tr>';\n    \n    echo '</table>';\n}\n\n// Function to remove item from cart\nfunction removeItemFromCart($item_id) {\n    global $db;\n    \n    // Find the index of the item in cart and unset it\n    foreach (array_keys($_SESSION['cart']) as $i) {\n        if ($_SESSION['cart'][$i]['id'] == $item_id) {\n            unset($_SESSION['cart'][$i]);\n        }\n    }\n}\n\n// Function to update quantity of item in cart\nfunction updateQuantity($item_id, $new_quantity) {\n    global $db;\n    \n    // Find the item in cart and update its quantity\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        if ($cart_item['id'] == $item_id) {\n            $cart_item['quantity'] = $new_quantity;\n            return;\n        }\n    }\n}\n\n// Function to checkout (empty cart)\nfunction checkout() {\n    global $db;\n    \n    // Empty the cart\n    unset($_SESSION['cart']);\n}\n```\n**index.php**\n```php\n<?php\nrequire_once 'cart.php';\n\nif (isset($_POST['add_to_cart'])) {\n    addItemToCart($_POST['item_id'], $_POST['quantity']);\n}\n\nif (isset($_GET['remove_item'])) {\n    removeItemFromCart($_GET['remove_item']);\n}\n\nif (isset($_POST['update_quantity'])) {\n    updateQuantity($_POST['item_id'], $_POST['new_quantity']);\n}\n\n// Display cart contents\ndisplayCart();\n\n?>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"add_to_cart\" value=\"1\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"item_id\"><br><br>\n    <label>Quantity:</label>\n    <input type=\"number\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<form action=\"index.php\" method=\"get\">\n    <input type=\"hidden\" name=\"remove_item\" value=\"\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"remove_item\"><br><br>\n    <input type=\"submit\" value=\"Remove Item\">\n</form>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"update_quantity\" value=\"1\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"item_id\"><br><br>\n    <label>New Quantity:</label>\n    <input type=\"number\" name=\"new_quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"checkout\" value=\"1\">\n    <input type=\"submit\" value=\"Checkout\">\n</form>\n```\nThis example uses a cart array stored in the session to keep track of items added to the cart. The `addItemToCart` function adds an item to the cart if it doesn't already exist, and increments its quantity otherwise. The `displayCart` function displays the contents of the cart, including each item's price, quantity, and total cost. The `removeItemFromCart` function removes an item from the cart by finding its index in the array and unsetting it. The `updateQuantity` function updates the quantity of a specific item in the cart.\n\nNote that this is just a basic example and you should add error checking and validation to make sure the user can't add invalid items or quantities to the cart. Also, this example assumes you have a database table called \"items\" with columns for id, name, and price, and that you've created a function `get_item` to retrieve an item from the database by its ID.\n\nYou'll also need to create a database connection using PDO (PHP Data Objects) or another library.", "code_blocks": ["```php\n<?php\n// Initialize cart array if it doesn't exist\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addItemToCart($item_id, $quantity) {\n    global $db;\n    \n    // Check if item already exists in cart\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        if ($cart_item['id'] == $item_id) {\n            // If it does, increment quantity\n            $cart_item['quantity'] += $quantity;\n            return;\n        }\n    }\n\n    // If not, add new item to cart\n    $_SESSION['cart'][] = array(\n        'id' => $item_id,\n        'name' => $item_name,\n        'price' => $item_price,\n        'quantity' => $quantity\n    );\n}\n\n// Function to display cart contents\nfunction displayCart() {\n    global $db;\n    \n    echo '<table border=\"1\">';\n    echo '<tr><th>Item</th><th>Price</th><th>Quantity</th><th>Total</th></tr>';\n    \n    // Loop through each item in cart\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        $item = get_item($db, $cart_item['id']);\n        echo '<tr>';\n        echo '<td>' . $item['name'] . '</td>';\n        echo '<td>$' . number_format($item['price'], 2) . '</td>';\n        echo '<td>' . $cart_item['quantity'] . '</td>';\n        echo '<td>$' . number_format($cart_item['price'] * $cart_item['quantity'], 2) . '</td>';\n        echo '</tr>';\n    }\n    \n    // Calculate total cost of all items in cart\n    $total = array_sum(array_map(function($item) { return $item['price'] * $item['quantity']; }, $_SESSION['cart']));\n    echo '<tr><th colspan=\"3\">Total:</th><td>$' . number_format($total, 2) . '</td></tr>';\n    \n    echo '</table>';\n}\n\n// Function to remove item from cart\nfunction removeItemFromCart($item_id) {\n    global $db;\n    \n    // Find the index of the item in cart and unset it\n    foreach (array_keys($_SESSION['cart']) as $i) {\n        if ($_SESSION['cart'][$i]['id'] == $item_id) {\n            unset($_SESSION['cart'][$i]);\n        }\n    }\n}\n\n// Function to update quantity of item in cart\nfunction updateQuantity($item_id, $new_quantity) {\n    global $db;\n    \n    // Find the item in cart and update its quantity\n    foreach ($_SESSION['cart'] as &$cart_item) {\n        if ($cart_item['id'] == $item_id) {\n            $cart_item['quantity'] = $new_quantity;\n            return;\n        }\n    }\n}\n\n// Function to checkout (empty cart)\nfunction checkout() {\n    global $db;\n    \n    // Empty the cart\n    unset($_SESSION['cart']);\n}\n```", "```php\n<?php\nrequire_once 'cart.php';\n\nif (isset($_POST['add_to_cart'])) {\n    addItemToCart($_POST['item_id'], $_POST['quantity']);\n}\n\nif (isset($_GET['remove_item'])) {\n    removeItemFromCart($_GET['remove_item']);\n}\n\nif (isset($_POST['update_quantity'])) {\n    updateQuantity($_POST['item_id'], $_POST['new_quantity']);\n}\n\n// Display cart contents\ndisplayCart();\n\n?>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"add_to_cart\" value=\"1\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"item_id\"><br><br>\n    <label>Quantity:</label>\n    <input type=\"number\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<form action=\"index.php\" method=\"get\">\n    <input type=\"hidden\" name=\"remove_item\" value=\"\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"remove_item\"><br><br>\n    <input type=\"submit\" value=\"Remove Item\">\n</form>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"update_quantity\" value=\"1\">\n    <label>Item ID:</label>\n    <input type=\"text\" name=\"item_id\"><br><br>\n    <label>New Quantity:</label>\n    <input type=\"number\" name=\"new_quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<form action=\"index.php\" method=\"post\">\n    <input type=\"hidden\" name=\"checkout\" value=\"1\">\n    <input type=\"submit\" value=\"Checkout\">\n</form>\n```"]}
