{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of how you can create a simple purchase functionality in PHP:\n\n**Database Schema**\n```sql\nCREATE TABLE products (\n  id INT PRIMARY KEY,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n\nCREATE TABLE orders (\n  id INT PRIMARY KEY,\n  customer_name VARCHAR(255),\n  order_date DATE\n);\n\nCREATE TABLE order_items (\n  id INT PRIMARY KEY,\n  order_id INT,\n  product_id INT,\n  quantity INT,\n  FOREIGN KEY (order_id) REFERENCES orders(id),\n  FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n**PHP Code**\n\nWe will use PHP to create a simple web application that allows users to browse and purchase products.\n\n**index.php**\n```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve all products from database\n$stmt = $conn->prepare(\"SELECT * FROM products\");\n$stmt->execute();\n$products = $stmt->fetchAll();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Purchase</title>\n</head>\n<body>\n\n  <!-- Display product list -->\n  <?php foreach ($products as $product) { ?>\n    <div class=\"product\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <button>Add to Cart</button>\n    </div>\n  <?php } ?>\n\n  <!-- Display cart contents -->\n  <div class=\"cart\">\n    <h2>Cart Contents:</h2>\n    <?php if (isset($_SESSION['cart'])) { ?>\n      <?php foreach ($_SESSION['cart'] as $item) { ?>\n        <p><?php echo $item['product_name']; ?> x <?php echo $item['quantity']; ?></p>\n      <?php } ?>\n    <?php } else { ?>\n      <p>No items in cart.</p>\n    <?php } ?>\n  </div>\n\n  <!-- Add product to cart functionality -->\n  <script>\n    document.querySelectorAll('.add-to-cart').forEach(button => {\n      button.addEventListener('click', () => {\n        const productId = button.dataset.productId;\n        const quantity = prompt(\"Enter quantity:\");\n        const productName = document.querySelector(`[data-product-id=\"${productId}\"]`).textContent;\n\n        if (quantity !== null) {\n          // Add product to cart\n          const cart = <?php echo json_encode($_SESSION['cart']); ?>;\n          cart.push({product_name: productName, quantity: quantity});\n          $_SESSION['cart'] = cart;\n          window.location.href = 'index.php';\n        }\n      });\n    });\n  </script>\n\n</body>\n</html>\n```\n**order_process.php**\n```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve cart contents from session\n$cart = $_SESSION['cart'];\n\n// Insert order into orders table\n$stmt = $conn->prepare(\"INSERT INTO orders (customer_name, order_date) VALUES (:customer_name, :order_date)\");\n$stmt->execute(array(\n  ':customer_name' => $_POST['customer_name'],\n  ':order_date' => date('Y-m-d')\n));\n$order_id = $conn->lastInsertId();\n\n// Insert order items into order_items table\nforeach ($cart as $item) {\n  $stmt = $conn->prepare(\"INSERT INTO order_items (order_id, product_id, quantity) VALUES (:order_id, :product_id, :quantity)\");\n  $stmt->execute(array(\n    ':order_id' => $order_id,\n    ':product_id' => $item['product_id'],\n    ':quantity' => $item['quantity']\n  ));\n}\n\n// Clear cart contents from session\n$_SESSION['cart'] = array();\n\n?>\n```\n**index.php (updated)**\n```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve all products from database\n$stmt = $conn->prepare(\"SELECT * FROM products\");\n$stmt->execute();\n$products = $stmt->fetchAll();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Purchase</title>\n</head>\n<body>\n\n  <!-- Display product list -->\n  <?php foreach ($products as $product) { ?>\n    <div class=\"product\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <button class=\"add-to-cart\" data-product-id=\"<?php echo $product['id']; ?>\">Add to Cart</button>\n    </div>\n  <?php } ?>\n\n  <!-- Display cart contents -->\n  <div class=\"cart\">\n    <h2>Cart Contents:</h2>\n    <?php if (isset($_SESSION['cart'])) { ?>\n      <?php foreach ($_SESSION['cart'] as $item) { ?>\n        <p><?php echo $item['product_name']; ?> x <?php echo $item['quantity']; ?></p>\n      <?php } ?>\n    <?php } else { ?>\n      <p>No items in cart.</p>\n    <?php } ?>\n  </div>\n\n  <!-- Process order form -->\n  <form action=\"order_process.php\" method=\"post\">\n    <input type=\"text\" name=\"customer_name\" placeholder=\"Customer Name\">\n    <button type=\"submit\">Place Order</button>\n  </form>\n\n</body>\n</html>\n```\nThis is a basic example of how you can create a purchase functionality using PHP. It includes the following features:\n\n* A database schema to store products, orders, and order items.\n* A PHP script to connect to the database and retrieve product information.\n* An HTML page to display the product list and cart contents.\n* A JavaScript script to add products to the cart and update the cart contents.\n* A PHP script to process the order form submission and insert the order into the database.\n\nNote that this is a simplified example and you may want to add additional features such as user authentication, payment processing, and error handling.", "code_blocks": [null, "```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve all products from database\n$stmt = $conn->prepare(\"SELECT * FROM products\");\n$stmt->execute();\n$products = $stmt->fetchAll();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Purchase</title>\n</head>\n<body>\n\n  <!-- Display product list -->\n  <?php foreach ($products as $product) { ?>\n    <div class=\"product\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <button>Add to Cart</button>\n    </div>\n  <?php } ?>\n\n  <!-- Display cart contents -->\n  <div class=\"cart\">\n    <h2>Cart Contents:</h2>\n    <?php if (isset($_SESSION['cart'])) { ?>\n      <?php foreach ($_SESSION['cart'] as $item) { ?>\n        <p><?php echo $item['product_name']; ?> x <?php echo $item['quantity']; ?></p>\n      <?php } ?>\n    <?php } else { ?>\n      <p>No items in cart.</p>\n    <?php } ?>\n  </div>\n\n  <!-- Add product to cart functionality -->\n  <script>\n    document.querySelectorAll('.add-to-cart').forEach(button => {\n      button.addEventListener('click', () => {\n        const productId = button.dataset.productId;\n        const quantity = prompt(\"Enter quantity:\");\n        const productName = document.querySelector(`[data-product-id=\"${productId}\"]`).textContent;\n\n        if (quantity !== null) {\n          // Add product to cart\n          const cart = <?php echo json_encode($_SESSION['cart']); ?>;\n          cart.push({product_name: productName, quantity: quantity});\n          $_SESSION['cart'] = cart;\n          window.location.href = 'index.php';\n        }\n      });\n    });\n  </script>\n\n</body>\n</html>\n```", "```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve cart contents from session\n$cart = $_SESSION['cart'];\n\n// Insert order into orders table\n$stmt = $conn->prepare(\"INSERT INTO orders (customer_name, order_date) VALUES (:customer_name, :order_date)\");\n$stmt->execute(array(\n  ':customer_name' => $_POST['customer_name'],\n  ':order_date' => date('Y-m-d')\n));\n$order_id = $conn->lastInsertId();\n\n// Insert order items into order_items table\nforeach ($cart as $item) {\n  $stmt = $conn->prepare(\"INSERT INTO order_items (order_id, product_id, quantity) VALUES (:order_id, :product_id, :quantity)\");\n  $stmt->execute(array(\n    ':order_id' => $order_id,\n    ':product_id' => $item['product_id'],\n    ':quantity' => $item['quantity']\n  ));\n}\n\n// Clear cart contents from session\n$_SESSION['cart'] = array();\n\n?>\n```", "```php\n<?php\n\n// Connect to database\n$conn = new PDO('mysql:host=localhost;dbname=example', 'username', 'password');\n\n// Retrieve all products from database\n$stmt = $conn->prepare(\"SELECT * FROM products\");\n$stmt->execute();\n$products = $stmt->fetchAll();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Purchase</title>\n</head>\n<body>\n\n  <!-- Display product list -->\n  <?php foreach ($products as $product) { ?>\n    <div class=\"product\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <button class=\"add-to-cart\" data-product-id=\"<?php echo $product['id']; ?>\">Add to Cart</button>\n    </div>\n  <?php } ?>\n\n  <!-- Display cart contents -->\n  <div class=\"cart\">\n    <h2>Cart Contents:</h2>\n    <?php if (isset($_SESSION['cart'])) { ?>\n      <?php foreach ($_SESSION['cart'] as $item) { ?>\n        <p><?php echo $item['product_name']; ?> x <?php echo $item['quantity']; ?></p>\n      <?php } ?>\n    <?php } else { ?>\n      <p>No items in cart.</p>\n    <?php } ?>\n  </div>\n\n  <!-- Process order form -->\n  <form action=\"order_process.php\" method=\"post\">\n    <input type=\"text\" name=\"customer_name\" placeholder=\"Customer Name\">\n    <button type=\"submit\">Place Order</button>\n  </form>\n\n</body>\n</html>\n```"]}
