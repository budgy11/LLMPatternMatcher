{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a simple purchase functionality using PHP, including HTML and MySQL for database interaction. This code snippet includes the following features:\n\n1. **User Registration**: To register new users.\n2. **Login**: To authenticate existing users.\n3. **Product List**: Displaying products available for purchase.\n4. **Purchase Order**: Allowing users to place orders.\n\n**Database Setup:**\n\nCreate a database and a table named `users` with the following structure:\n\n```sql\nCREATE TABLE users (\n    id INT AUTO_INCREMENT,\n    username VARCHAR(255) NOT NULL,\n    email VARCHAR(255) NOT NULL,\n    password VARCHAR(255) NOT NULL,\n    PRIMARY KEY (id)\n);\n```\n\nAnd another table named `products` for product data:\n\n```sql\nCREATE TABLE products (\n    id INT AUTO_INCREMENT,\n    name VARCHAR(255) NOT NULL,\n    description TEXT,\n    price DECIMAL(10,2),\n    stock INT,\n    PRIMARY KEY (id)\n);\n```\n\n**PHP Code:**\n\n### `config.php`\n\nThis file contains configuration settings for the database connection.\n\n```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'database_name');\n\nfunction connectToDatabase() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n?>\n```\n\n### `register.php` (Registration Form)\n\n```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_register.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\">Register</button>\n</form>\n\n<?php\nif (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n    // Register user logic here\n}\n?>\n```\n\n### `login.php` (Login Form)\n\n```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_login.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\">Login</button>\n</form>\n\n<?php\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    // Login logic here\n}\n?>\n```\n\n### `products.php` (Product List)\n\n```php\n<?php include 'config.php'; ?>\n\n<table>\n    <tr>\n        <th>Name</th>\n        <th>Price</th>\n        <th>Stock</th>\n    </tr>\n\n<?php\n$conn = connectToDatabase();\n$query = \"SELECT * FROM products\";\n$result = $conn->query($query);\n\nwhile ($row = mysqli_fetch_assoc($result)) {\n    echo \"<tr>\";\n    echo \"<td>\" . $row['name'] . \"</td>\";\n    echo \"<td>\" . $row['price'] . \"</td>\";\n    echo \"<td>\" . $row['stock'] . \"</td>\";\n    echo \"</tr>\";\n}\n\n$conn->close();\n?>\n</table>\n```\n\n### `process_register.php` and `process_login.php`\n\nThese files handle the logic for user registration and login, respectively.\n\n```php\n<?php include 'config.php'; ?>\n\n// process_register.php\n\nif (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n    $conn = connectToDatabase();\n    $query = \"INSERT INTO users (username, email, password) VALUES ('\" . $_POST['username'] . \"', '\" . $_POST['email'] . \"', '\" . $_POST['password'] . \"')\";\n    $result = $conn->query($query);\n    if ($result) {\n        echo \"User registered successfully!\";\n    } else {\n        echo \"Error registering user\";\n    }\n    $conn->close();\n}\n\n// process_login.php\n\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $conn = connectToDatabase();\n    $query = \"SELECT * FROM users WHERE username='\" . $_POST['username'] . \"' AND password='\" . $_POST['password'] . \"'\";\n    $result = $conn->query($query);\n    if ($result->num_rows > 0) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n    $conn->close();\n}\n?>\n```\n\n### `order.php` (Place Order)\n\n```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_order.php\" method=\"post\">\n    <label for=\"product_id\">Select Product:</label>\n    <select id=\"product_id\" name=\"product_id\">\n        <?php\n        $conn = connectToDatabase();\n        $query = \"SELECT * FROM products\";\n        $result = $conn->query($query);\n        \n        while ($row = mysqli_fetch_assoc($result)) {\n            echo \"<option value='\" . $row['id'] . \"'>\" . $row['name'] . \"</option>\";\n        }\n        \n        $conn->close();\n        ?>\n    </select><br><br>\n    <button type=\"submit\">Place Order</button>\n</form>\n\n<?php\nif (isset($_POST['product_id'])) {\n    // Logic for placing order here\n}\n?>\n```\n\n### `process_order.php`\n\n```php\n<?php include 'config.php'; ?>\n\nif (isset($_POST['product_id'])) {\n    $conn = connectToDatabase();\n    $query = \"INSERT INTO orders (user_id, product_id) VALUES ('\" . $_SESSION['user_id'] . \"', '\" . $_POST['product_id'] . \"')\"; // Assuming user is logged in\n    $result = $conn->query($query);\n    \n    if ($result) {\n        echo \"Order placed successfully!\";\n    } else {\n        echo \"Error placing order\";\n    }\n    \n    $conn->close();\n}\n?>\n```\n\nThis code snippet covers basic user registration, login functionality, product listing, and ordering system. Please adjust the database schema and PHP code according to your actual needs and database setup. Always ensure you're handling sensitive information (like passwords) securely.", "code_blocks": [null, null, "```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'database_name');\n\nfunction connectToDatabase() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n?>\n```", "```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_register.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\">Register</button>\n</form>\n\n<?php\nif (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n    // Register user logic here\n}\n?>\n```", "```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_login.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\">Login</button>\n</form>\n\n<?php\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    // Login logic here\n}\n?>\n```", "```php\n<?php include 'config.php'; ?>\n\n<table>\n    <tr>\n        <th>Name</th>\n        <th>Price</th>\n        <th>Stock</th>\n    </tr>\n\n<?php\n$conn = connectToDatabase();\n$query = \"SELECT * FROM products\";\n$result = $conn->query($query);\n\nwhile ($row = mysqli_fetch_assoc($result)) {\n    echo \"<tr>\";\n    echo \"<td>\" . $row['name'] . \"</td>\";\n    echo \"<td>\" . $row['price'] . \"</td>\";\n    echo \"<td>\" . $row['stock'] . \"</td>\";\n    echo \"</tr>\";\n}\n\n$conn->close();\n?>\n</table>\n```", "```php\n<?php include 'config.php'; ?>\n\n// process_register.php\n\nif (isset($_POST['username']) && isset($_POST['email']) && isset($_POST['password'])) {\n    $conn = connectToDatabase();\n    $query = \"INSERT INTO users (username, email, password) VALUES ('\" . $_POST['username'] . \"', '\" . $_POST['email'] . \"', '\" . $_POST['password'] . \"')\";\n    $result = $conn->query($query);\n    if ($result) {\n        echo \"User registered successfully!\";\n    } else {\n        echo \"Error registering user\";\n    }\n    $conn->close();\n}\n\n// process_login.php\n\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $conn = connectToDatabase();\n    $query = \"SELECT * FROM users WHERE username='\" . $_POST['username'] . \"' AND password='\" . $_POST['password'] . \"'\";\n    $result = $conn->query($query);\n    if ($result->num_rows > 0) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n    $conn->close();\n}\n?>\n```", "```php\n<?php include 'config.php'; ?>\n\n<form action=\"process_order.php\" method=\"post\">\n    <label for=\"product_id\">Select Product:</label>\n    <select id=\"product_id\" name=\"product_id\">\n        <?php\n        $conn = connectToDatabase();\n        $query = \"SELECT * FROM products\";\n        $result = $conn->query($query);\n        \n        while ($row = mysqli_fetch_assoc($result)) {\n            echo \"<option value='\" . $row['id'] . \"'>\" . $row['name'] . \"</option>\";\n        }\n        \n        $conn->close();\n        ?>\n    </select><br><br>\n    <button type=\"submit\">Place Order</button>\n</form>\n\n<?php\nif (isset($_POST['product_id'])) {\n    // Logic for placing order here\n}\n?>\n```", "```php\n<?php include 'config.php'; ?>\n\nif (isset($_POST['product_id'])) {\n    $conn = connectToDatabase();\n    $query = \"INSERT INTO orders (user_id, product_id) VALUES ('\" . $_SESSION['user_id'] . \"', '\" . $_POST['product_id'] . \"')\"; // Assuming user is logged in\n    $result = $conn->query($query);\n    \n    if ($result) {\n        echo \"Order placed successfully!\";\n    } else {\n        echo \"Error placing order\";\n    }\n    \n    $conn->close();\n}\n?>\n```"]}
