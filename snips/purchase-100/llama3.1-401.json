{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality using PHP, HTML, and MySQL. This example includes user registration, login, product listing, cart functionality, and checkout.\n\n**Database Setup**\n\nFirst, create a database named `store` with the following tables:\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  password VARCHAR(255)\n);\n\nCREATE TABLE products (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n\nCREATE TABLE carts (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  user_id INT,\n  product_id INT\n);\n```\n\n**PHP Files**\n\nCreate the following PHP files:\n\n**`config.php`**\n\n```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'store');\n\n$connection = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($connection->connect_error) {\n    die(\"Connection failed: \" . $connection->connect_error);\n}\n?>\n```\n\n**`register.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n\n    $query = \"INSERT INTO users (username, password) VALUES ('$username', '$password')\";\n    $result = $connection->query($query);\n\n    if ($result) {\n        echo \"User created successfully!\";\n    } else {\n        echo \"Error creating user\";\n    }\n}\n?>\n```\n\n**`login.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $connection->query($query);\n\n    if ($result && password_verify($password, $result->fetch_assoc()['password'])) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n?>\n```\n\n**`index.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Display products\n$query = \"SELECT * FROM products\";\n$result = $connection->query($query);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Store</title>\n</head>\n<body>\n\n<h1>Products:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n            <button>Add to cart</button>\n        </li>\n    <?php } ?>\n</ul>\n\n</body>\n</html>\n```\n\n**`cart.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Get user ID from session\n$user_id = $_SESSION['user_id'];\n\n// Display products in cart\n$query = \"SELECT * FROM carts WHERE user_id = '$user_id'\";\n$result = $connection->query($query);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cart</title>\n</head>\n<body>\n\n<h1>Cart:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n            <button>Remove</button>\n        </li>\n    <?php } ?>\n</ul>\n\n<h2>Total:</h2>\n\n</body>\n</html>\n```\n\n**`checkout.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Get user ID from session\n$user_id = $_SESSION['user_id'];\n\n// Display products in cart\n$query = \"SELECT * FROM carts WHERE user_id = '$user_id'\";\n$result = $connection->query($query);\n\n$total = 0;\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Checkout</title>\n</head>\n<body>\n\n<h1>Checkout:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n        </li>\n    <?php } ?>\n</ul>\n\n<h2>Total:</h2>\n\n<form action=\"process_payment.php\" method=\"post\">\n    <input type=\"hidden\" name=\"total\" value=\"<?php echo $total; ?>\">\n    <button>Process Payment</button>\n</form>\n\n</body>\n</html>\n```\n\n**`process_payment.php`**\n\n```php\n<?php\nrequire_once 'config.php';\n\n// Get total from session\n$total = $_POST['total'];\n\n// Process payment (insert order into database)\n$query = \"INSERT INTO orders (user_id, total) VALUES ('$user_id', '$total')\";\n$result = $connection->query($query);\n\nif ($result) {\n    echo \"Payment processed successfully!\";\n} else {\n    echo \"Error processing payment\";\n}\n?>\n```\n\nThis example includes basic user registration, login, product listing, cart functionality, and checkout. However, please note that this is a simplified example and should not be used in production without further security measures.\n\nAlso, you need to create session files and modify the code accordingly to use sessions for storing user data.", "code_blocks": [null, "```php\n<?php\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'root');\ndefine('DB_PASSWORD', '');\ndefine('DB_NAME', 'store');\n\n$connection = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($connection->connect_error) {\n    die(\"Connection failed: \" . $connection->connect_error);\n}\n?>\n```", "```php\n<?php\nrequire_once 'config.php';\n\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = password_hash($_POST['password'], PASSWORD_DEFAULT);\n\n    $query = \"INSERT INTO users (username, password) VALUES ('$username', '$password')\";\n    $result = $connection->query($query);\n\n    if ($result) {\n        echo \"User created successfully!\";\n    } else {\n        echo \"Error creating user\";\n    }\n}\n?>\n```", "```php\n<?php\nrequire_once 'config.php';\n\nif (isset($_POST['submit'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $connection->query($query);\n\n    if ($result && password_verify($password, $result->fetch_assoc()['password'])) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n?>\n```", "```php\n<?php\nrequire_once 'config.php';\n\n// Display products\n$query = \"SELECT * FROM products\";\n$result = $connection->query($query);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Store</title>\n</head>\n<body>\n\n<h1>Products:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n            <button>Add to cart</button>\n        </li>\n    <?php } ?>\n</ul>\n\n</body>\n</html>\n```", "```php\n<?php\nrequire_once 'config.php';\n\n// Get user ID from session\n$user_id = $_SESSION['user_id'];\n\n// Display products in cart\n$query = \"SELECT * FROM carts WHERE user_id = '$user_id'\";\n$result = $connection->query($query);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Cart</title>\n</head>\n<body>\n\n<h1>Cart:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n            <button>Remove</button>\n        </li>\n    <?php } ?>\n</ul>\n\n<h2>Total:</h2>\n\n</body>\n</html>\n```", "```php\n<?php\nrequire_once 'config.php';\n\n// Get user ID from session\n$user_id = $_SESSION['user_id'];\n\n// Display products in cart\n$query = \"SELECT * FROM carts WHERE user_id = '$user_id'\";\n$result = $connection->query($query);\n\n$total = 0;\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Checkout</title>\n</head>\n<body>\n\n<h1>Checkout:</h1>\n\n<ul>\n    <?php while ($product = $result->fetch_assoc()) { ?>\n        <li>\n            <a href=\"#\"><?php echo $product['name']; ?></a>\n            <span>$<?php echo $product['price']; ?></span>\n        </li>\n    <?php } ?>\n</ul>\n\n<h2>Total:</h2>\n\n<form action=\"process_payment.php\" method=\"post\">\n    <input type=\"hidden\" name=\"total\" value=\"<?php echo $total; ?>\">\n    <button>Process Payment</button>\n</form>\n\n</body>\n</html>\n```", "```php\n<?php\nrequire_once 'config.php';\n\n// Get total from session\n$total = $_POST['total'];\n\n// Process payment (insert order into database)\n$query = \"INSERT INTO orders (user_id, total) VALUES ('$user_id', '$total')\";\n$result = $connection->query($query);\n\nif ($result) {\n    echo \"Payment processed successfully!\";\n} else {\n    echo \"Error processing payment\";\n}\n?>\n```"]}
