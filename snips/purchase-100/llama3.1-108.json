{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality using PHP. This example includes creating a database table to store orders, inserting a new order into the database when a purchase is made, and retrieving a list of all orders.\n\n**Note:** For this example, we'll assume you have PHP 7+ installed on your server and that you're familiar with MySQL databases.\n\n### Database Setup\n\nFirst, let's create a simple database schema for our example. We'll use MySQL as the database system.\n\n```sql\nCREATE TABLE Orders (\n    OrderID INT AUTO_INCREMENT,\n    ProductName VARCHAR(255),\n    Quantity INT,\n    Price DECIMAL(10,2),\n    CustomerName VARCHAR(255),\n    OrderDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    PRIMARY KEY (OrderID)\n);\n```\n\n### PHP Code\n\nNext, let's create a simple PHP script to handle the purchase functionality.\n\n```php\n<?php\n\n// Configuration variables\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"exampledb\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction purchase() {\n    global $conn;\n\n    // Get product information from user input (for simplicity)\n    $productName = $_POST['productName'];\n    $quantity = $_POST['quantity'];\n    $price = $_POST['price'];\n    $customerName = $_POST['customerName'];\n\n    // Insert order into database\n    $sql = \"INSERT INTO Orders (ProductName, Quantity, Price, CustomerName) VALUES ('$productName', '$quantity', '$price', '$customerName')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Order placed successfully!\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\nfunction getOrders() {\n    global $conn;\n\n    // Retrieve list of all orders\n    $sql = \"SELECT * FROM Orders\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Order ID: \" . $row[\"OrderID\"]. \"<br> Product Name: \" . $row[\"ProductName\"]. \"<br> Quantity: \" . $row[\"Quantity\"]. \"<br> Price: \" . $row[\"Price\"]. \"<br> Customer Name: \" . $row[\"CustomerName\"]. \"<br><br>\";\n        }\n    } else {\n        echo \"No orders available.\";\n    }\n}\n\nif (isset($_POST['purchase'])) {\n    purchase();\n} elseif (isset($_POST['getOrders'])) {\n    getOrders();\n}\n\n// Close connection\n$conn->close();\n\n?>\n```\n\n### Usage\n\nTo use this script, create a new PHP file and paste the above code into it. Then:\n\n1. Open your favorite HTML editor to create an `index.html` or equivalent file.\n2. In this file, add two forms with corresponding input fields for user data (product name, quantity, price, customer name).\n3. Set the form action to point at our PHP script (`purchase.php`, assuming we saved it as such).\n4. On submitting the first form, call the `purchase()` function in the PHP script.\n5. In the second form, include a submit button that calls the `getOrders()` function when clicked.\n\nHere's an example of how your HTML might look like:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Purchase Form</title>\n</head>\n<body>\n\n<form action=\"purchase.php\" method=\"post\">\n    Product Name: <input type=\"text\" name=\"productName\"><br><br>\n    Quantity: <input type=\"number\" name=\"quantity\"><br><br>\n    Price: <input type=\"number\" step=\"0.01\" name=\"price\"><br><br>\n    Customer Name: <input type=\"text\" name=\"customerName\"><br><br>\n    <input type=\"submit\" value=\"Place Order\">\n</form>\n\n<form action=\"purchase.php\" method=\"post\">\n    <input type=\"hidden\" name=\"getOrders\" value=\"1\">\n    <input type=\"submit\" value=\"Get Orders\">\n</form>\n\n</body>\n</html>\n```\n\nRemember to replace the form's `action` attribute with your PHP script's location.", "code_blocks": [null, "```php\n<?php\n\n// Configuration variables\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"exampledb\";\n\n// Create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction purchase() {\n    global $conn;\n\n    // Get product information from user input (for simplicity)\n    $productName = $_POST['productName'];\n    $quantity = $_POST['quantity'];\n    $price = $_POST['price'];\n    $customerName = $_POST['customerName'];\n\n    // Insert order into database\n    $sql = \"INSERT INTO Orders (ProductName, Quantity, Price, CustomerName) VALUES ('$productName', '$quantity', '$price', '$customerName')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Order placed successfully!\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\nfunction getOrders() {\n    global $conn;\n\n    // Retrieve list of all orders\n    $sql = \"SELECT * FROM Orders\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Order ID: \" . $row[\"OrderID\"]. \"<br> Product Name: \" . $row[\"ProductName\"]. \"<br> Quantity: \" . $row[\"Quantity\"]. \"<br> Price: \" . $row[\"Price\"]. \"<br> Customer Name: \" . $row[\"CustomerName\"]. \"<br><br>\";\n        }\n    } else {\n        echo \"No orders available.\";\n    }\n}\n\nif (isset($_POST['purchase'])) {\n    purchase();\n} elseif (isset($_POST['getOrders'])) {\n    getOrders();\n}\n\n// Close connection\n$conn->close();\n\n?>\n```", null]}
