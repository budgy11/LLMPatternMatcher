{"prompt": "Create a purchase functionality using php", "llm_output": "Here's an example of how you can create a simple purchase functionality using PHP. This will involve creating a form to input the product name, price, quantity, and customer information. Then we'll calculate the total cost, save the data into a database, and send a confirmation email.\n\n**Step 1: Create Database Table**\n\nFirst, let's assume you have a MySQL database named `ecommerce`. If not, create it with the following SQL code:\n\n```sql\nCREATE TABLE purchases (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    product_name VARCHAR(255),\n    price DECIMAL(10,2),\n    quantity INT,\n    customer_name VARCHAR(255),\n    email VARCHAR(255)\n);\n```\n\n**Step 2: PHP Code**\n\nCreate a new PHP file named `purchase.php` and add the following code:\n\n```php\n<?php\n\n// Include database connection script\nrequire 'db_connect.php';\n\n// Check if form is submitted\nif (isset($_POST['submit'])) {\n\n    // Input data from form\n    $product_name = $_POST['product_name'];\n    $price = $_POST['price'];\n    $quantity = $_POST['quantity'];\n    $customer_name = $_POST['customer_name'];\n    $email = $_POST['email'];\n\n    // Validate input data\n    if (empty($product_name) || empty($price) || empty($quantity) || empty($customer_name) || empty($email)) {\n        echo \"Please fill out all fields.\";\n    } else {\n\n        // Calculate total cost\n        $total_cost = ($price * $quantity);\n\n        // Insert data into database\n        $query = \"INSERT INTO purchases (product_name, price, quantity, customer_name, email)\n                  VALUES ('$product_name', '$price', '$quantity', '$customer_name', '$email')\";\n        $result = mysqli_query($conn, $query);\n\n        if ($result) {\n\n            // Send confirmation email\n            $to = $email;\n            $subject = \"Purchase Confirmation\";\n            $body = \"\n                Dear $customer_name,\n                We are pleased to confirm your purchase of $product_name for \\$$price.\n                Your total cost is \\$$total_cost. Thank you for shopping with us!\n                Best regards, Ecommerce Team.\";\n            $headers = \"From: ecommerce@example.com\";\n\n            mail($to, $subject, $body, $headers);\n\n            echo \"Purchase successful! You will receive a confirmation email shortly.\";\n\n        } else {\n            echo \"Error inserting data into database.\";\n        }\n\n    }\n}\n\n?>\n\n<!-- HTML form to input purchase data -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"product_name\">Product Name:</label>\n    <input type=\"text\" id=\"product_name\" name=\"product_name\"><br><br>\n\n    <label for=\"price\">Price:</label>\n    <input type=\"number\" id=\"price\" name=\"price\"><br><br>\n\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n\n    <label for=\"customer_name\">Customer Name:</label>\n    <input type=\"text\" id=\"customer_name\" name=\"customer_name\"><br><br>\n\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n\n    <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n```\n\n**Step 3: Database Connection Script**\n\nCreate a new PHP file named `db_connect.php` and add the following code:\n\n```php\n<?php\n\n// Define database connection settings\n$servername = \"localhost\";\n$username = \"username\";\n$password = \"password\";\n$dbname = \"ecommerce\";\n\n// Establish database connection\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\n// Check connection\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```\n\nRemember to replace the placeholders with your actual database credentials.\n\n**Step 4: Test Purchase Functionality**\n\nOpen `purchase.php` in a web browser and test the purchase functionality by submitting the form. This should insert the data into the database, calculate the total cost, and send a confirmation email to the customer.\n\nNote that this is a basic example and does not include any security measures such as input validation, CSRF protection, or password hashing. You should consider implementing these features in your production environment.", "code_blocks": [null, "```php\n<?php\n\n// Include database connection script\nrequire 'db_connect.php';\n\n// Check if form is submitted\nif (isset($_POST['submit'])) {\n\n    // Input data from form\n    $product_name = $_POST['product_name'];\n    $price = $_POST['price'];\n    $quantity = $_POST['quantity'];\n    $customer_name = $_POST['customer_name'];\n    $email = $_POST['email'];\n\n    // Validate input data\n    if (empty($product_name) || empty($price) || empty($quantity) || empty($customer_name) || empty($email)) {\n        echo \"Please fill out all fields.\";\n    } else {\n\n        // Calculate total cost\n        $total_cost = ($price * $quantity);\n\n        // Insert data into database\n        $query = \"INSERT INTO purchases (product_name, price, quantity, customer_name, email)\n                  VALUES ('$product_name', '$price', '$quantity', '$customer_name', '$email')\";\n        $result = mysqli_query($conn, $query);\n\n        if ($result) {\n\n            // Send confirmation email\n            $to = $email;\n            $subject = \"Purchase Confirmation\";\n            $body = \"\n                Dear $customer_name,\n                We are pleased to confirm your purchase of $product_name for \\$$price.\n                Your total cost is \\$$total_cost. Thank you for shopping with us!\n                Best regards, Ecommerce Team.\";\n            $headers = \"From: ecommerce@example.com\";\n\n            mail($to, $subject, $body, $headers);\n\n            echo \"Purchase successful! You will receive a confirmation email shortly.\";\n\n        } else {\n            echo \"Error inserting data into database.\";\n        }\n\n    }\n}\n\n?>\n\n<!-- HTML form to input purchase data -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"product_name\">Product Name:</label>\n    <input type=\"text\" id=\"product_name\" name=\"product_name\"><br><br>\n\n    <label for=\"price\">Price:</label>\n    <input type=\"number\" id=\"price\" name=\"price\"><br><br>\n\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n\n    <label for=\"customer_name\">Customer Name:</label>\n    <input type=\"text\" id=\"customer_name\" name=\"customer_name\"><br><br>\n\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n\n    <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n```", "```php\n<?php\n\n// Define database connection settings\n$servername = \"localhost\";\n$username = \"username\";\n$password = \"password\";\n$dbname = \"ecommerce\";\n\n// Establish database connection\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\n// Check connection\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```"]}
