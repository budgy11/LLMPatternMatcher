{"prompt": "Create a purchase cart functionality using php", "llm_output": "**Purchase Cart Functionality in PHP**\n======================================\n\nThis is an example implementation of a purchase cart functionality using PHP. We'll create a simple shopping cart system that allows users to add items, view their cart, and update the quantity of each item.\n\n### Database Setup\n\nWe'll assume you have a database setup with two tables: `products` and `cart`.\n\n**products table**\n\n| Column Name | Data Type | Description |\n| --- | --- | --- |\n| id | int | Unique product ID |\n| name | varchar(255) | Product name |\n| price | decimal(10, 2) | Product price |\n\n**cart table**\n\n| Column Name | Data Type | Description |\n| --- | --- | --- |\n| id | int | Unique cart ID |\n| user_id | int | User's ID (foreign key to users table) |\n| product_id | int | Product ID (foreign key to products table) |\n| quantity | int | Quantity of the product in the cart |\n\n### PHP Code\n\nCreate a new file named `cart.php` and add the following code:\n```php\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'name' => 'your_database'\n);\n\n// Database connection function\nfunction connectDB() {\n    $conn = new mysqli($GLOBALS['database']['host'], $GLOBALS['database']['username'], $GLOBALS['database']['password'], $GLOBALS['database']['name']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Get all products\nfunction getAllProducts($conn) {\n    $sql = \"SELECT * FROM products\";\n    $result = $conn->query($sql);\n    return $result->fetch_all(MYSQLI_ASSOC);\n}\n\n// Add product to cart\nfunction addProductToCart($user_id, $product_id, $quantity) {\n    $conn = connectDB();\n    $sql = \"INSERT INTO cart (user_id, product_id, quantity) VALUES (?, ?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"iii\", $user_id, $product_id, $quantity);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Get user's cart\nfunction getUserCart($user_id) {\n    $conn = connectDB();\n    $sql = \"SELECT * FROM cart WHERE user_id = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"i\", $user_id);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Update product quantity in cart\nfunction updateProductQuantityInCart($cart_id, $new_quantity) {\n    $conn = connectDB();\n    $sql = \"UPDATE cart SET quantity = ? WHERE id = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ii\", $new_quantity, $cart_id);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Example usage\n$user_id = 1; // Replace with actual user ID\n\n// Get all products\n$products = getAllProducts(connectDB());\nforeach ($products as $product) {\n    echo $product['name'] . ' - ' . $product['price'] . '<br>';\n}\n\n// Add product to cart\n$product_id = 1; // Replace with actual product ID\n$new_quantity = 2;\n$result = addProductToCart($user_id, $product_id, $new_quantity);\necho $result ? 'Added to cart successfully!' : 'Failed to add to cart.';\n\n// Get user's cart\n$cart = getUserCart($user_id);\nif ($cart) {\n    foreach ($cart as $item) {\n        echo $item['name'] . ' - ' . $item['quantity'] . '<br>';\n    }\n} else {\n    echo 'No items in cart.';\n}\n\n// Update product quantity in cart\n$cart_id = 1; // Replace with actual cart ID\n$new_quantity = 3;\n$result = updateProductQuantityInCart($cart_id, $new_quantity);\necho $result ? 'Updated successfully!' : 'Failed to update.';\n```\nThis code provides the following functionality:\n\n* `getAllProducts`: Retrieves all products from the database.\n* `addProductToCart`: Adds a product to the user's cart with a specified quantity.\n* `getUserCart`: Retrieves the user's entire cart.\n* `updateProductQuantityInCart`: Updates the quantity of an item in the user's cart.\n\nNote that this is a basic implementation and you should add error handling, validation, and security measures as per your requirements. Additionally, this example assumes a MySQL database; adjust the code to match your specific database system.", "code_blocks": ["```php\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'name' => 'your_database'\n);\n\n// Database connection function\nfunction connectDB() {\n    $conn = new mysqli($GLOBALS['database']['host'], $GLOBALS['database']['username'], $GLOBALS['database']['password'], $GLOBALS['database']['name']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Get all products\nfunction getAllProducts($conn) {\n    $sql = \"SELECT * FROM products\";\n    $result = $conn->query($sql);\n    return $result->fetch_all(MYSQLI_ASSOC);\n}\n\n// Add product to cart\nfunction addProductToCart($user_id, $product_id, $quantity) {\n    $conn = connectDB();\n    $sql = \"INSERT INTO cart (user_id, product_id, quantity) VALUES (?, ?, ?)\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"iii\", $user_id, $product_id, $quantity);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Get user's cart\nfunction getUserCart($user_id) {\n    $conn = connectDB();\n    $sql = \"SELECT * FROM cart WHERE user_id = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"i\", $user_id);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Update product quantity in cart\nfunction updateProductQuantityInCart($cart_id, $new_quantity) {\n    $conn = connectDB();\n    $sql = \"UPDATE cart SET quantity = ? WHERE id = ?\";\n    $stmt = $conn->prepare($sql);\n    $stmt->bind_param(\"ii\", $new_quantity, $cart_id);\n    $result = $stmt->execute();\n    return $result;\n}\n\n// Example usage\n$user_id = 1; // Replace with actual user ID\n\n// Get all products\n$products = getAllProducts(connectDB());\nforeach ($products as $product) {\n    echo $product['name'] . ' - ' . $product['price'] . '<br>';\n}\n\n// Add product to cart\n$product_id = 1; // Replace with actual product ID\n$new_quantity = 2;\n$result = addProductToCart($user_id, $product_id, $new_quantity);\necho $result ? 'Added to cart successfully!' : 'Failed to add to cart.';\n\n// Get user's cart\n$cart = getUserCart($user_id);\nif ($cart) {\n    foreach ($cart as $item) {\n        echo $item['name'] . ' - ' . $item['quantity'] . '<br>';\n    }\n} else {\n    echo 'No items in cart.';\n}\n\n// Update product quantity in cart\n$cart_id = 1; // Replace with actual cart ID\n$new_quantity = 3;\n$result = updateProductQuantityInCart($cart_id, $new_quantity);\necho $result ? 'Updated successfully!' : 'Failed to update.';\n```"]}
