{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here's an example of how you can create a basic purchase cart functionality using PHP:\n\n**cart.php**\n```php\n<?php\n// Initialize session\nsession_start();\n\n// Set cart as array if not set before\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_item_to_cart($item_id, $quantity) {\n    global $db;\n    \n    // Check if item is already in cart\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $item_id && $item['quantity'] < 10) { // max quantity is 10 for example\n            $item['quantity'] += $quantity;\n            return true; // item added successfully\n        }\n    }\n    \n    // Item not in cart, add it\n    $db->query(\"SELECT * FROM products WHERE id = '$item_id'\");\n    $product = $db->fetch_array();\n    \n    $_SESSION['cart'][] = array(\n        'id' => $item_id,\n        'name' => $product['name'],\n        'price' => $product['price'],\n        'quantity' => $quantity\n    );\n    \n    return true;\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($item_id, $new_quantity) {\n    global $db;\n    \n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $item_id) {\n            $item['quantity'] = $new_quantity;\n            break;\n        }\n    }\n}\n\n// Function to remove item from cart\nfunction remove_item($item_id) {\n    global $db;\n    \n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $item_id) {\n            unset($_SESSION['cart'][$key]);\n            break;\n        }\n    }\n}\n\n// Function to calculate total cost of items in cart\nfunction calculate_total() {\n    global $db;\n    \n    $total = 0;\n    foreach ($_SESSION['cart'] as $item) {\n        $product = $db->query(\"SELECT * FROM products WHERE id = '$item[id]'\");\n        $total += $product['price'] * $item['quantity'];\n    }\n    \n    return $total;\n}\n\n// Function to display cart contents\nfunction display_cart() {\n    global $db;\n    \n    echo '<table>';\n    foreach ($_SESSION['cart'] as $item) {\n        echo '<tr>';\n        echo '<td>' . $item['name'] . '</td>';\n        echo '<td>Quantity: ' . $item['quantity'] . '</td>';\n        echo '<td>Price: $' . number_format($item['price'], 2) . '</td>';\n        echo '</tr>';\n    }\n    echo '</table>';\n}\n\n// Example usage\nif (isset($_GET['add'])) {\n    add_item_to_cart($_GET['id'], $_GET['quantity']);\n} elseif (isset($_GET['update'])) {\n    update_quantity($_GET['id'], $_GET['new_quantity']);\n} elseif (isset($_GET['remove'])) {\n    remove_item($_GET['id']);\n}\n\n?>\n```\n**index.php**\n```php\n<?php include 'cart.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Cart Example</title>\n</head>\n<body>\n\n<h1>Purchase Cart</h1>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"add\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    Quantity: <input type=\"number\" name=\"quantity\">\n    <button type=\"submit\">Add to Cart</button>\n</form>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"update\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    New Quantity: <input type=\"number\" name=\"new_quantity\">\n    <button type=\"submit\">Update Quantity</button>\n</form>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"remove\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    <button type=\"submit\">Remove from Cart</button>\n</form>\n\n<h2>Cart Contents:</h2>\n<?php display_cart(); ?>\n\n<h2>Total Cost: $<?php echo number_format(calculate_total(), 2); ?></h2>\n\n</body>\n</html>\n```\nThis example assumes you have a database table `products` with columns `id`, `name`, and `price`. The `cart.php` file contains functions to add items to the cart, update quantities, remove items from the cart, calculate the total cost of items in the cart, and display the cart contents. The `index.php` file is a simple HTML form that allows users to interact with the cart functionality.\n\nNote that this is just a basic example and does not include any error checking or validation. In a real-world application, you would want to add checks for invalid inputs, handle edge cases (e.g., adding an item with a quantity of 0), and possibly use a more robust database abstraction layer.", "code_blocks": ["```php\n<?php\n// Initialize session\nsession_start();\n\n// Set cart as array if not set before\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_item_to_cart($item_id, $quantity) {\n    global $db;\n    \n    // Check if item is already in cart\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $item_id && $item['quantity'] < 10) { // max quantity is 10 for example\n            $item['quantity'] += $quantity;\n            return true; // item added successfully\n        }\n    }\n    \n    // Item not in cart, add it\n    $db->query(\"SELECT * FROM products WHERE id = '$item_id'\");\n    $product = $db->fetch_array();\n    \n    $_SESSION['cart'][] = array(\n        'id' => $item_id,\n        'name' => $product['name'],\n        'price' => $product['price'],\n        'quantity' => $quantity\n    );\n    \n    return true;\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($item_id, $new_quantity) {\n    global $db;\n    \n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $item_id) {\n            $item['quantity'] = $new_quantity;\n            break;\n        }\n    }\n}\n\n// Function to remove item from cart\nfunction remove_item($item_id) {\n    global $db;\n    \n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $item_id) {\n            unset($_SESSION['cart'][$key]);\n            break;\n        }\n    }\n}\n\n// Function to calculate total cost of items in cart\nfunction calculate_total() {\n    global $db;\n    \n    $total = 0;\n    foreach ($_SESSION['cart'] as $item) {\n        $product = $db->query(\"SELECT * FROM products WHERE id = '$item[id]'\");\n        $total += $product['price'] * $item['quantity'];\n    }\n    \n    return $total;\n}\n\n// Function to display cart contents\nfunction display_cart() {\n    global $db;\n    \n    echo '<table>';\n    foreach ($_SESSION['cart'] as $item) {\n        echo '<tr>';\n        echo '<td>' . $item['name'] . '</td>';\n        echo '<td>Quantity: ' . $item['quantity'] . '</td>';\n        echo '<td>Price: $' . number_format($item['price'], 2) . '</td>';\n        echo '</tr>';\n    }\n    echo '</table>';\n}\n\n// Example usage\nif (isset($_GET['add'])) {\n    add_item_to_cart($_GET['id'], $_GET['quantity']);\n} elseif (isset($_GET['update'])) {\n    update_quantity($_GET['id'], $_GET['new_quantity']);\n} elseif (isset($_GET['remove'])) {\n    remove_item($_GET['id']);\n}\n\n?>\n```", "```php\n<?php include 'cart.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Cart Example</title>\n</head>\n<body>\n\n<h1>Purchase Cart</h1>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"add\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    Quantity: <input type=\"number\" name=\"quantity\">\n    <button type=\"submit\">Add to Cart</button>\n</form>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"update\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    New Quantity: <input type=\"number\" name=\"new_quantity\">\n    <button type=\"submit\">Update Quantity</button>\n</form>\n\n<form action=\"cart.php\" method=\"get\">\n    <input type=\"hidden\" name=\"remove\" value=\"true\">\n    <select name=\"id\">\n        <?php\n            global $db;\n            $products = $db->query(\"SELECT * FROM products\");\n            foreach ($products as $product) {\n                echo '<option value=\"' . $product['id'] . '\">' . $product['name'] . '</option>';\n            }\n        ?>\n    </select>\n    <button type=\"submit\">Remove from Cart</button>\n</form>\n\n<h2>Cart Contents:</h2>\n<?php display_cart(); ?>\n\n<h2>Total Cost: $<?php echo number_format(calculate_total(), 2); ?></h2>\n\n</body>\n</html>\n```"]}
