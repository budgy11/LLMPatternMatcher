{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality using PHP. This code includes functions for adding products to the cart, viewing the cart contents, and processing payments.\n\n**Note:** This is a simplified example and should not be used in production without additional security measures (e.g., input validation, error handling).\n\n**database.php**\n```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'myshop');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n}\n\n?>\n```\n\n**cart.php**\n```php\n<?php\n\n// Include database connection settings\nrequire_once 'database.php';\n\n// Function to add product to cart\nfunction add_product_to_cart($product_id, $quantity) {\n    // Check if product exists in cart\n    $query = \"SELECT * FROM cart WHERE product_id = '$product_id' AND user_id = '\" . $_SESSION['user_id'] . \"'\";\n    $result = $mysqli->query($query);\n    \n    if ($result->num_rows > 0) {\n        // Update quantity if product already exists in cart\n        $row = $result->fetch_assoc();\n        $new_quantity = $row['quantity'] + $quantity;\n        $update_query = \"UPDATE cart SET quantity = '$new_quantity' WHERE id = '\" . $row['id'] . \"'\";\n        $mysqli->query($update_query);\n    } else {\n        // Insert new product into cart\n        $insert_query = \"INSERT INTO cart (user_id, product_id, quantity) VALUES ('\" . $_SESSION['user_id'] . \"', '$product_id', '$quantity')\";\n        $mysqli->query($insert_query);\n    }\n}\n\n// Function to view cart contents\nfunction view_cart_contents() {\n    // Get user's cart contents\n    $query = \"SELECT * FROM cart WHERE user_id = '\" . $_SESSION['user_id'] . \"'\";\n    $result = $mysqli->query($query);\n    \n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            echo \"<p>Product ID: $row[product_id]</p>\";\n            echo \"<p>Quantity: $row[quantity]</p>\";\n        }\n    } else {\n        echo \"Your cart is empty.\";\n    }\n}\n\n?>\n```\n\n**checkout.php**\n```php\n<?php\n\n// Include database connection settings and cart functions\nrequire_once 'database.php';\nrequire_once 'cart.php';\n\n// Function to process payment\nfunction process_payment($total_amount) {\n    // Process payment using a payment gateway (e.g., PayPal, Stripe)\n    // For demonstration purposes, this function is empty\n}\n\n?>\n```\n\n**index.php**\n```php\n<?php\n\n// Include database connection settings and cart functions\nrequire_once 'database.php';\nrequire_once 'cart.php';\n\n// Check if user is logged in\nif (!isset($_SESSION['user_id'])) {\n    echo \"Please log in to continue.\";\n} else {\n    // Display product list with \"Add to Cart\" buttons\n    $query = \"SELECT * FROM products\";\n    $result = $mysqli->query($query);\n    \n    while ($row = $result->fetch_assoc()) {\n        echo \"<p>Product ID: $row[id]</p>\";\n        echo \"<p>Product Name: $row[name]</p>\";\n        echo \"<button onclick='add_product_to_cart(\" . $row['id'] . \", 1)'>Add to Cart</button>\";\n    }\n}\n\n?>\n```\n\nTo use this code, follow these steps:\n\n1. Create a new PHP file (e.g., `database.php`) and add the database connection settings.\n2. Create a new PHP file (e.g., `cart.php`) and add the cart functions (`add_product_to_cart` and `view_cart_contents`).\n3. Create a new PHP file (e.g., `checkout.php`) and add the payment processing function (`process_payment`).\n4. In your index page (e.g., `index.php`), include the database connection settings and cart functions, and display the product list with \"Add to Cart\" buttons.\n\nThis is a simplified example of a purchase functionality using PHP. You should consider implementing additional features, such as user authentication, input validation, and error handling, to ensure a secure and reliable online shopping experience.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'myshop');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_errno) {\n    echo \"Failed to connect to MySQL: (\" . $mysqli->connect_errno . \") \" . $mysqli->connect_error;\n}\n\n?>\n```", "```php\n<?php\n\n// Include database connection settings\nrequire_once 'database.php';\n\n// Function to add product to cart\nfunction add_product_to_cart($product_id, $quantity) {\n    // Check if product exists in cart\n    $query = \"SELECT * FROM cart WHERE product_id = '$product_id' AND user_id = '\" . $_SESSION['user_id'] . \"'\";\n    $result = $mysqli->query($query);\n    \n    if ($result->num_rows > 0) {\n        // Update quantity if product already exists in cart\n        $row = $result->fetch_assoc();\n        $new_quantity = $row['quantity'] + $quantity;\n        $update_query = \"UPDATE cart SET quantity = '$new_quantity' WHERE id = '\" . $row['id'] . \"'\";\n        $mysqli->query($update_query);\n    } else {\n        // Insert new product into cart\n        $insert_query = \"INSERT INTO cart (user_id, product_id, quantity) VALUES ('\" . $_SESSION['user_id'] . \"', '$product_id', '$quantity')\";\n        $mysqli->query($insert_query);\n    }\n}\n\n// Function to view cart contents\nfunction view_cart_contents() {\n    // Get user's cart contents\n    $query = \"SELECT * FROM cart WHERE user_id = '\" . $_SESSION['user_id'] . \"'\";\n    $result = $mysqli->query($query);\n    \n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            echo \"<p>Product ID: $row[product_id]</p>\";\n            echo \"<p>Quantity: $row[quantity]</p>\";\n        }\n    } else {\n        echo \"Your cart is empty.\";\n    }\n}\n\n?>\n```", "```php\n<?php\n\n// Include database connection settings and cart functions\nrequire_once 'database.php';\nrequire_once 'cart.php';\n\n// Function to process payment\nfunction process_payment($total_amount) {\n    // Process payment using a payment gateway (e.g., PayPal, Stripe)\n    // For demonstration purposes, this function is empty\n}\n\n?>\n```", "```php\n<?php\n\n// Include database connection settings and cart functions\nrequire_once 'database.php';\nrequire_once 'cart.php';\n\n// Check if user is logged in\nif (!isset($_SESSION['user_id'])) {\n    echo \"Please log in to continue.\";\n} else {\n    // Display product list with \"Add to Cart\" buttons\n    $query = \"SELECT * FROM products\";\n    $result = $mysqli->query($query);\n    \n    while ($row = $result->fetch_assoc()) {\n        echo \"<p>Product ID: $row[id]</p>\";\n        echo \"<p>Product Name: $row[name]</p>\";\n        echo \"<button onclick='add_product_to_cart(\" . $row['id'] . \", 1)'>Add to Cart</button>\";\n    }\n}\n\n?>\n```"]}
