{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how you can create a simple purchase cart functionality using PHP. This example will cover adding items to the cart, viewing the contents of the cart, and calculating the total cost.\n\n**cart.php**\n```php\n<?php\n// Initialize session array\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addToCart($productId) {\n    global $db;\n    // Check if product is in stock\n    $query = \"SELECT * FROM products WHERE id = '$productId'\";\n    $result = mysqli_query($db, $query);\n    $productInfo = mysqli_fetch_assoc($result);\n\n    // Add item to cart array if it's not already there\n    if (!isset($_SESSION['cart'][$productId])) {\n        $_SESSION['cart'][$productId] = 1;\n    } else {\n        // If product is already in cart, increment quantity\n        $_SESSION['cart'][$productId]++;\n    }\n\n    // Update stock levels (optional)\n    $query = \"UPDATE products SET stock_level = stock_level - \".$_SESSION['cart'][$productId].\" WHERE id = '$productId'\";\n    mysqli_query($db, $query);\n}\n\n// Function to view cart contents\nfunction viewCart() {\n    global $_SESSION;\n    echo \"<h2>Cart Contents:</h2>\";\n    echo \"<table border='1'>\";\n    foreach ($_SESSION['cart'] as $productId => $quantity) {\n        $productInfo = getProductInfo($productId);\n        echo \"<tr><td>\" . $productInfo['name'] . \"</td><td>$\" . number_format($productInfo['price'] * $quantity) . \"</td></tr>\";\n    }\n    echo \"</table>\";\n}\n\n// Function to calculate total cost\nfunction calculateTotal() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as $productId => $quantity) {\n        $productInfo = getProductInfo($productId);\n        $total += $productInfo['price'] * $quantity;\n    }\n    return number_format($total);\n}\n\n// Function to clear cart\nfunction clearCart() {\n    global $_SESSION;\n    unset($_SESSION['cart']);\n}\n?>\n```\n**cartFunctions.php**\n```php\n<?php\n// Database connection settings\n$db = mysqli_connect('localhost', 'username', 'password', 'database');\n\n// Function to get product info\nfunction getProductInfo($productId) {\n    $query = \"SELECT * FROM products WHERE id = '$productId'\";\n    $result = mysqli_query($db, $query);\n    return mysqli_fetch_assoc($result);\n}\n?>\n```\n**exampleUsage.php**\n```php\n<?php\nrequire_once 'cart.php';\nrequire_once 'cartFunctions.php';\n\n// Add item to cart\naddToCart(1);\n\n// View cart contents\nviewCart();\n\n// Calculate total cost\necho \"Total: $\" . calculateTotal();\n\n// Clear cart\nclearCart();\n?>\n```\nThis example uses a simple session array to store the cart contents. The `addToCart()` function checks if the product is already in the cart and adds it or increments its quantity accordingly. The `viewCart()` function displays the contents of the cart, and the `calculateTotal()` function calculates the total cost by multiplying each product's price by its quantity.\n\nNote that this example assumes a basic database setup with a table called \"products\" containing columns for id, name, price, and stock_level. You will need to modify the database connection settings in **cartFunctions.php** to match your own database configuration.\n\nAlso note that this is a simplified example and does not include any error handling or security measures that you would want to implement in a real-world application.", "code_blocks": ["```php\n<?php\n// Initialize session array\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addToCart($productId) {\n    global $db;\n    // Check if product is in stock\n    $query = \"SELECT * FROM products WHERE id = '$productId'\";\n    $result = mysqli_query($db, $query);\n    $productInfo = mysqli_fetch_assoc($result);\n\n    // Add item to cart array if it's not already there\n    if (!isset($_SESSION['cart'][$productId])) {\n        $_SESSION['cart'][$productId] = 1;\n    } else {\n        // If product is already in cart, increment quantity\n        $_SESSION['cart'][$productId]++;\n    }\n\n    // Update stock levels (optional)\n    $query = \"UPDATE products SET stock_level = stock_level - \".$_SESSION['cart'][$productId].\" WHERE id = '$productId'\";\n    mysqli_query($db, $query);\n}\n\n// Function to view cart contents\nfunction viewCart() {\n    global $_SESSION;\n    echo \"<h2>Cart Contents:</h2>\";\n    echo \"<table border='1'>\";\n    foreach ($_SESSION['cart'] as $productId => $quantity) {\n        $productInfo = getProductInfo($productId);\n        echo \"<tr><td>\" . $productInfo['name'] . \"</td><td>$\" . number_format($productInfo['price'] * $quantity) . \"</td></tr>\";\n    }\n    echo \"</table>\";\n}\n\n// Function to calculate total cost\nfunction calculateTotal() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as $productId => $quantity) {\n        $productInfo = getProductInfo($productId);\n        $total += $productInfo['price'] * $quantity;\n    }\n    return number_format($total);\n}\n\n// Function to clear cart\nfunction clearCart() {\n    global $_SESSION;\n    unset($_SESSION['cart']);\n}\n?>\n```", "```php\n<?php\n// Database connection settings\n$db = mysqli_connect('localhost', 'username', 'password', 'database');\n\n// Function to get product info\nfunction getProductInfo($productId) {\n    $query = \"SELECT * FROM products WHERE id = '$productId'\";\n    $result = mysqli_query($db, $query);\n    return mysqli_fetch_assoc($result);\n}\n?>\n```", "```php\n<?php\nrequire_once 'cart.php';\nrequire_once 'cartFunctions.php';\n\n// Add item to cart\naddToCart(1);\n\n// View cart contents\nviewCart();\n\n// Calculate total cost\necho \"Total: $\" . calculateTotal();\n\n// Clear cart\nclearCart();\n?>\n```"]}
