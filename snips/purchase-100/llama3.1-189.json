{"prompt": "Create a purchase functionality using php", "llm_output": "Here's an example of how you can create a simple purchase functionality in PHP:\n\n**Step 1: Database Setup**\n\nFirst, we need to set up the database schema. We'll use MySQL for this example.\n\n```sql\nCREATE TABLE products (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(255),\n    price DECIMAL(10,2)\n);\n\nCREATE TABLE orders (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    customer_name VARCHAR(255),\n    order_date DATE\n);\n\nCREATE TABLE order_items (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    order_id INT,\n    product_id INT,\n    quantity INT,\n    FOREIGN KEY (order_id) REFERENCES orders(id),\n    FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n\n**Step 2: PHP Code**\n\nNext, we'll write the PHP code for the purchase functionality.\n\n```php\n<?php\n\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'root';\n$dbPassword = '';\n$dbName = 'example';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add product to cart\nfunction addProductToCart($productId, $quantity) {\n    global $conn;\n    $query = \"INSERT INTO order_items (order_id, product_id, quantity)\n              VALUES (NULL, '$productId', '$quantity')\";\n    if ($conn->query($query) === TRUE) {\n        echo \"Product added to cart successfully.\";\n    } else {\n        echo \"Error adding product to cart: \" . $conn->error;\n    }\n}\n\n// Function to create order\nfunction createOrder() {\n    global $conn;\n    $customerId = $_SESSION['customer_id'];\n    $orderDate = date('Y-m-d');\n    $query = \"INSERT INTO orders (customer_name, order_date)\n              VALUES ('$customerId', '$orderDate')\";\n    if ($conn->query($query) === TRUE) {\n        echo \"Order created successfully.\";\n    } else {\n        echo \"Error creating order: \" . $conn->error;\n    }\n}\n\n// Function to purchase products\nfunction purchaseProducts() {\n    global $conn;\n    $productId = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n\n    // Add product to cart\n    addProductToCart($productId, $quantity);\n\n    // Create order\n    createOrder();\n}\n\n?>\n```\n\n**Step 3: HTML Code**\n\nFinally, we'll write the HTML code for the purchase form.\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Purchase Products</title>\n</head>\n<body>\n    <h1>Purchase Products</h1>\n    <form action=\"purchase.php\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <label for=\"quantity\">Quantity:</label>\n        <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n        <input type=\"submit\" value=\"Purchase\">\n    </form>\n\n    <?php\n    if (isset($_POST['product_id']) && isset($_POST['quantity'])) {\n        purchaseProducts();\n    }\n    ?>\n</body>\n</html>\n```\n\nThis code will allow customers to select a product and quantity, and then purchase the products. The products will be added to their cart, and an order will be created.\n\nNote: This is just a simple example, you may want to add more features such as payment processing, user authentication, etc.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'root';\n$dbPassword = '';\n$dbName = 'example';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add product to cart\nfunction addProductToCart($productId, $quantity) {\n    global $conn;\n    $query = \"INSERT INTO order_items (order_id, product_id, quantity)\n              VALUES (NULL, '$productId', '$quantity')\";\n    if ($conn->query($query) === TRUE) {\n        echo \"Product added to cart successfully.\";\n    } else {\n        echo \"Error adding product to cart: \" . $conn->error;\n    }\n}\n\n// Function to create order\nfunction createOrder() {\n    global $conn;\n    $customerId = $_SESSION['customer_id'];\n    $orderDate = date('Y-m-d');\n    $query = \"INSERT INTO orders (customer_name, order_date)\n              VALUES ('$customerId', '$orderDate')\";\n    if ($conn->query($query) === TRUE) {\n        echo \"Order created successfully.\";\n    } else {\n        echo \"Error creating order: \" . $conn->error;\n    }\n}\n\n// Function to purchase products\nfunction purchaseProducts() {\n    global $conn;\n    $productId = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n\n    // Add product to cart\n    addProductToCart($productId, $quantity);\n\n    // Create order\n    createOrder();\n}\n\n?>\n```", null]}
