{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of a simple purchase cart functionality using PHP:\n\n**cart.php**\n```php\n<?php\nsession_start();\n\n// If the session doesn't exist, create it\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_item_to_cart($product_id) {\n    global $db;\n    \n    // Get product details from database\n    $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n    $result = mysqli_query($db, $query);\n    $product = mysqli_fetch_assoc($result);\n\n    // Check if product is already in cart\n    if (in_array($product['id'], $_SESSION['cart'])) {\n        echo 'Product is already in cart!';\n    } else {\n        // Add product to cart\n        array_push($_SESSION['cart'], $product['id']);\n        \n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to remove item from cart\nfunction remove_item_from_cart($product_id) {\n    global $db;\n    \n    // Check if product is in cart\n    if (in_array($product_id, $_SESSION['cart'])) {\n        // Remove product from cart\n        unset($_SESSION['cart'][array_search($product_id, $_SESSION['cart'])]);\n        \n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to update item quantity in cart\nfunction update_item_quantity($product_id, $quantity) {\n    global $db;\n    \n    // Check if product is in cart\n    if (in_array($product_id, $_SESSION['cart'])) {\n        // Get product details from database\n        $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n        $result = mysqli_query($db, $query);\n        $product = mysqli_fetch_assoc($result);\n\n        // Update quantity in cart\n        for ($i = 0; $i < count($_SESSION['cart']); $i++) {\n            if ($_SESSION['cart'][$i] == $product_id) {\n                $_SESSION['cart'][$i]['quantity'] = $quantity;\n                break;\n            }\n        }\n\n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to view cart contents\nfunction view_cart_contents() {\n    global $db;\n    \n    echo '<h2>Cart Contents:</h2>';\n    echo '<table border=\"1\">';\n    echo '<tr><th>Product ID</th><th>Product Name</th><th>Quantity</th></tr>';\n\n    foreach ($_SESSION['cart'] as $product_id) {\n        // Get product details from database\n        $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n        $result = mysqli_query($db, $query);\n        $product = mysqli_fetch_assoc($result);\n\n        echo '<tr>';\n        echo '<td>' . $product['id'] . '</td>';\n        echo '<td>' . $product['name'] . '</td>';\n        // If product has quantity in cart, display it\n        if (isset($_SESSION['cart'][$product_id]['quantity'])) {\n            echo '<td>' . $_SESSION['cart'][$product_id]['quantity'] . '</td>';\n        } else {\n            echo '<td>1</td>'; // Default quantity is 1\n        }\n        echo '</tr>';\n    }\n\n    echo '</table>';\n}\n\n// Add items to cart\nadd_item_to_cart(1);\nadd_item_to_cart(2);\n\n// View cart contents\nview_cart_contents();\n\n// Remove item from cart\nremove_item_from_cart(1);\n\n?>\n```\nThis example includes the following functions:\n\n* `add_item_to_cart($product_id)`: Adds a product to the cart.\n* `remove_item_from_cart($product_id)`: Removes a product from the cart.\n* `update_item_quantity($product_id, $quantity)`: Updates the quantity of a product in the cart.\n* `view_cart_contents()`: Displays the contents of the cart.\n\n**Usage**\n\nTo use this code, simply include it on any page where you want to display the cart. You can call the functions to add items to the cart, remove items from the cart, and view the cart contents.\n\nNote that this is a very basic implementation of a shopping cart and does not include features like:\n\n* Session management\n* Database connection handling\n* Error checking and validation\n* Security measures (e.g. preventing SQL injection)\n\nYou should consider implementing these features in your production code to ensure security and reliability.\n\n**Database Schema**\n\nAssuming you have a `products` table with the following structure:\n```sql\nCREATE TABLE products (\n  id INT PRIMARY KEY,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n```\nYou will need to create this schema in your database for the code to work.\n\n**Note**\n\nThis is just one way to implement a shopping cart using PHP. There are many other approaches and frameworks that can be used to achieve the same result.", "code_blocks": ["```php\n<?php\nsession_start();\n\n// If the session doesn't exist, create it\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_item_to_cart($product_id) {\n    global $db;\n    \n    // Get product details from database\n    $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n    $result = mysqli_query($db, $query);\n    $product = mysqli_fetch_assoc($result);\n\n    // Check if product is already in cart\n    if (in_array($product['id'], $_SESSION['cart'])) {\n        echo 'Product is already in cart!';\n    } else {\n        // Add product to cart\n        array_push($_SESSION['cart'], $product['id']);\n        \n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to remove item from cart\nfunction remove_item_from_cart($product_id) {\n    global $db;\n    \n    // Check if product is in cart\n    if (in_array($product_id, $_SESSION['cart'])) {\n        // Remove product from cart\n        unset($_SESSION['cart'][array_search($product_id, $_SESSION['cart'])]);\n        \n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to update item quantity in cart\nfunction update_item_quantity($product_id, $quantity) {\n    global $db;\n    \n    // Check if product is in cart\n    if (in_array($product_id, $_SESSION['cart'])) {\n        // Get product details from database\n        $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n        $result = mysqli_query($db, $query);\n        $product = mysqli_fetch_assoc($result);\n\n        // Update quantity in cart\n        for ($i = 0; $i < count($_SESSION['cart']); $i++) {\n            if ($_SESSION['cart'][$i] == $product_id) {\n                $_SESSION['cart'][$i]['quantity'] = $quantity;\n                break;\n            }\n        }\n\n        // Update session cart count\n        $_SESSION['cart_count'] = count($_SESSION['cart']);\n    }\n}\n\n// Function to view cart contents\nfunction view_cart_contents() {\n    global $db;\n    \n    echo '<h2>Cart Contents:</h2>';\n    echo '<table border=\"1\">';\n    echo '<tr><th>Product ID</th><th>Product Name</th><th>Quantity</th></tr>';\n\n    foreach ($_SESSION['cart'] as $product_id) {\n        // Get product details from database\n        $query = \"SELECT * FROM products WHERE id = '$product_id'\";\n        $result = mysqli_query($db, $query);\n        $product = mysqli_fetch_assoc($result);\n\n        echo '<tr>';\n        echo '<td>' . $product['id'] . '</td>';\n        echo '<td>' . $product['name'] . '</td>';\n        // If product has quantity in cart, display it\n        if (isset($_SESSION['cart'][$product_id]['quantity'])) {\n            echo '<td>' . $_SESSION['cart'][$product_id]['quantity'] . '</td>';\n        } else {\n            echo '<td>1</td>'; // Default quantity is 1\n        }\n        echo '</tr>';\n    }\n\n    echo '</table>';\n}\n\n// Add items to cart\nadd_item_to_cart(1);\nadd_item_to_cart(2);\n\n// View cart contents\nview_cart_contents();\n\n// Remove item from cart\nremove_item_from_cart(1);\n\n?>\n```", null]}
