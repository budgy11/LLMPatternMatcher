{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a basic \"forgot password\" function in PHP, including HTML and MySQL database interaction:\n\n**Please note that this is just an example and you should consider security best practices when implementing such functionality.**\n\n**Database Schema:**\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255) NOT NULL,\n  password_hash VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL\n);\n```\n**PHP Code (forgot_password.php):**\n```php\n<?php\n\n// Include the config file with database credentials and other settings\nrequire_once 'config.php';\n\n// Check if form data was submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  // Get user input\n  $email = $_POST['email'];\n\n  // Query database to check for existing email address\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // Generate a random password and store it in session\n    $new_password = generateRandomPassword();\n    $_SESSION['new_password'] = $new_password;\n\n    // Send email with new password\n    sendEmail($email, $new_password);\n\n    echo 'A new password has been sent to your email. Please check your inbox.';\n  } else {\n    echo 'Email not found in our records.';\n  }\n}\n\n// Function to generate a random password\nfunction generateRandomPassword() {\n  $length = 8;\n  $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  return substr(str_shuffle($chars), 0, $length);\n}\n\n// Function to send email with new password\nfunction sendEmail($email, $new_password) {\n  // Use a mail library or function (e.g. PHPMailer) to send an email\n  // For simplicity, this example uses the built-in mail() function\n  $subject = 'New Password for Your Account';\n  $body = \"Your new password is: $new_password\";\n  mail($email, $subject, $body);\n}\n\n?>\n```\n**HTML Form (forgot_password.html):**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Forgot Password</title>\n</head>\n<body>\n  <h2>Forgot Password</h2>\n  <form action=\"forgot_password.php\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <input type=\"submit\" value=\"Submit\">\n  </form>\n</body>\n</html>\n```\n**How it works:**\n\n1. The user submits the form with their email address.\n2. The PHP script checks if an email address exists in the database for that user.\n3. If an email is found, a random password is generated and stored in session.\n4. An email is sent to the user's email address with the new password.\n\n**Security Considerations:**\n\n* Use a secure password hashing algorithm (e.g., bcrypt) when storing passwords.\n* Use HTTPS to encrypt data transmitted between client and server.\n* Store sensitive information (e.g., database credentials, API keys) securely outside of version control.\n* Implement rate limiting to prevent brute-force attacks on the forgot password functionality.", "code_blocks": [null, "```php\n<?php\n\n// Include the config file with database credentials and other settings\nrequire_once 'config.php';\n\n// Check if form data was submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  // Get user input\n  $email = $_POST['email'];\n\n  // Query database to check for existing email address\n  $query = \"SELECT * FROM users WHERE email = '$email'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) > 0) {\n    // Generate a random password and store it in session\n    $new_password = generateRandomPassword();\n    $_SESSION['new_password'] = $new_password;\n\n    // Send email with new password\n    sendEmail($email, $new_password);\n\n    echo 'A new password has been sent to your email. Please check your inbox.';\n  } else {\n    echo 'Email not found in our records.';\n  }\n}\n\n// Function to generate a random password\nfunction generateRandomPassword() {\n  $length = 8;\n  $chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n  return substr(str_shuffle($chars), 0, $length);\n}\n\n// Function to send email with new password\nfunction sendEmail($email, $new_password) {\n  // Use a mail library or function (e.g. PHPMailer) to send an email\n  // For simplicity, this example uses the built-in mail() function\n  $subject = 'New Password for Your Account';\n  $body = \"Your new password is: $new_password\";\n  mail($email, $subject, $body);\n}\n\n?>\n```", null]}
