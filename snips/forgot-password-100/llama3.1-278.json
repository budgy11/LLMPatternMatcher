{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"Forgot Password\" function using PHP:\n\n**Database Setup**\n\nFirst, you need to set up your database to store user information. For this example, we'll use MySQL. Create the following table:\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  password_hash VARCHAR(255)\n);\n```\n**PHP Code**\n\nCreate a new PHP file called `forgot_password.php` and add the following code:\n```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USER', 'your_database_user');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Get the username from the input field\n$username = $_POST['username'];\n\n// Query to retrieve user's email address\n$query = \"SELECT email FROM users WHERE username = '$username'\";\n$result = $mysqli->query($query);\n\nif ($result->num_rows > 0) {\n    // Get the user's email address\n    while ($row = $result->fetch_assoc()) {\n        $email = $row['email'];\n    }\n\n    // Generate a random password\n    $password = substr(str_shuffle('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'), 0, 12);\n\n    // Send an email with new password\n    send_email($email, $password);\n} else {\n    echo \"No user found with that username.\";\n}\n\n// Function to send email\nfunction send_email($to, $password) {\n    // Configuration variables for sending email\n    define('FROM_EMAIL', 'your_email_address');\n    define('FROM_NAME', 'Your Website');\n\n    $subject = 'Password Reset';\n    $body = \"Dear $username,\nYour new password is: $password\";\n\n    $headers = 'From: '.FROM_NAME.' <'.$FROM_EMAIL.'>' . \"\\r\\n\" .\n               'Reply-To: '.$FROM_EMAIL.'' . \"\\r\\n\" .\n               'X-Mailer: PHP/' . phpversion();\n\n    mail($to, $subject, $body, $headers);\n}\n\n// Close database connection\n$mysqli->close();\n?>\n```\n**Explanation**\n\n1. The script connects to the database using the `mysqli` extension.\n2. It retrieves the username from the input field (via POST).\n3. It queries the database to retrieve the user's email address based on their username.\n4. If a match is found, it generates a random password and sends an email with the new password to the user's email address using PHP's `mail()` function.\n5. If no match is found, it displays a message indicating that no user was found.\n\n**Note**: This is just a basic example and you should consider implementing additional security measures, such as:\n\n* Hashing and salting passwords\n* Using a secure password reset token\n* Implementing rate limiting to prevent brute-force attacks\n\nAlso, make sure to replace the placeholders (`your_database_host`, `your_database_user`, etc.) with your actual database credentials.", "code_blocks": [null, "```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USER', 'your_database_user');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Get the username from the input field\n$username = $_POST['username'];\n\n// Query to retrieve user's email address\n$query = \"SELECT email FROM users WHERE username = '$username'\";\n$result = $mysqli->query($query);\n\nif ($result->num_rows > 0) {\n    // Get the user's email address\n    while ($row = $result->fetch_assoc()) {\n        $email = $row['email'];\n    }\n\n    // Generate a random password\n    $password = substr(str_shuffle('0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'), 0, 12);\n\n    // Send an email with new password\n    send_email($email, $password);\n} else {\n    echo \"No user found with that username.\";\n}\n\n// Function to send email\nfunction send_email($to, $password) {\n    // Configuration variables for sending email\n    define('FROM_EMAIL', 'your_email_address');\n    define('FROM_NAME', 'Your Website');\n\n    $subject = 'Password Reset';\n    $body = \"Dear $username,\nYour new password is: $password\";\n\n    $headers = 'From: '.FROM_NAME.' <'.$FROM_EMAIL.'>' . \"\\r\\n\" .\n               'Reply-To: '.$FROM_EMAIL.'' . \"\\r\\n\" .\n               'X-Mailer: PHP/' . phpversion();\n\n    mail($to, $subject, $body, $headers);\n}\n\n// Close database connection\n$mysqli->close();\n?>\n```"]}
