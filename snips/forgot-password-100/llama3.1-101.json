{"prompt": "Create a forgot password function using php", "llm_output": "Here's an example of how you can create a forgot password function in PHP:\n\n**Forgot Password Function**\n\n```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to reset password\nfunction resetPassword() {\n    // Get user input\n    $email = $_POST['email'];\n\n    // Check if email is valid\n    $query = \"SELECT * FROM users WHERE email='$email'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Generate random password\n        $new_password = rand(100000, 999999);\n        $hashed_password = md5($new_password);\n\n        // Update user's password\n        $update_query = \"UPDATE users SET password='$hashed_password' WHERE email='$email'\";\n        $conn->query($update_query);\n\n        // Send password reset email\n        $to_email = $email;\n        $subject = 'Password Reset';\n        $body = \"Your new password is: $new_password\";\n        $from_email = 'your-email@example.com';\n\n        $headers = \"From: $from_email\\r\\n\";\n        $headers .= \"MIME-Version: 1.0\\r\\n\";\n        $headers .= \"Content-Type: text/html; charset=ISO-8859-1\\r\\n\";\n\n        mail($to_email, $subject, $body, $headers);\n\n        echo \"Password reset email sent to $email.\";\n    } else {\n        echo \"Email not found in database.\";\n    }\n}\n\n// Check if form has been submitted\nif (isset($_POST['submit'])) {\n    // Call forgot password function\n    resetPassword();\n}\n?>\n```\n\n**HTML Form**\n\n```html\n<form action=\"\" method=\"post\">\n    <input type=\"email\" name=\"email\" placeholder=\"Enter your email address\">\n    <button type=\"submit\" name=\"submit\">Reset Password</button>\n</form>\n```\n\n**How it works:**\n\n1. The user enters their email address in the form and submits it.\n2. The `resetPassword()` function is called, which retrieves the user's data from the database based on their email address.\n3. If a match is found, a new password is generated randomly using the `rand()` function and hashed using the `md5()` function to prevent plaintext storage.\n4. The user's password is then updated in the database using an SQL query.\n5. A password reset email is sent to the user with their new password.\n\n**Note:**\n\n* This code uses a simple `md5` hash for security, but you should use a more secure hashing algorithm like `bcrypt` or `argon2i`.\n* The code assumes that your database has an `email` column and a `password` column. Adjust the SQL queries to match your database schema.\n* Make sure to replace `'your-email@example.com'` with your actual email address in the password reset email.\n\nI hope this helps! Let me know if you have any questions or need further clarification.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to reset password\nfunction resetPassword() {\n    // Get user input\n    $email = $_POST['email'];\n\n    // Check if email is valid\n    $query = \"SELECT * FROM users WHERE email='$email'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Generate random password\n        $new_password = rand(100000, 999999);\n        $hashed_password = md5($new_password);\n\n        // Update user's password\n        $update_query = \"UPDATE users SET password='$hashed_password' WHERE email='$email'\";\n        $conn->query($update_query);\n\n        // Send password reset email\n        $to_email = $email;\n        $subject = 'Password Reset';\n        $body = \"Your new password is: $new_password\";\n        $from_email = 'your-email@example.com';\n\n        $headers = \"From: $from_email\\r\\n\";\n        $headers .= \"MIME-Version: 1.0\\r\\n\";\n        $headers .= \"Content-Type: text/html; charset=ISO-8859-1\\r\\n\";\n\n        mail($to_email, $subject, $body, $headers);\n\n        echo \"Password reset email sent to $email.\";\n    } else {\n        echo \"Email not found in database.\";\n    }\n}\n\n// Check if form has been submitted\nif (isset($_POST['submit'])) {\n    // Call forgot password function\n    resetPassword();\n}\n?>\n```", null]}
