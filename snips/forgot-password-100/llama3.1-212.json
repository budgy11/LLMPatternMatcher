{"prompt": "Create a forgot password function using php", "llm_output": "**Forgot Password Function using PHP**\n=====================================\n\nThis is an example of a basic forgot password function using PHP, featuring email-based password recovery.\n\n### Database Schema\n\nAssuming you have the following database schema:\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL,\n  password_hash VARCHAR(255) NOT NULL\n);\n```\n\n### PHP Code\n\n**forgot_password.php**\n\n```php\n<?php\nrequire_once 'config/database.php';\n\n// Form data from the forgot password form\n$email = $_POST['email'];\n\n// Validate email input\nif (empty($email)) {\n  $error[] = 'Please enter your email address.';\n}\n\n// Check if email is in database\n$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($dbc, $query);\n\nif (mysqli_num_rows($result) == 0) {\n  $error[] = 'Email address not found.';\n} else {\n  // Generate random password\n  $password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 8);\n  \n  // Update user's password in database\n  query(\"UPDATE users SET password_hash = '$password' WHERE email = '$email'\");\n}\n\n// Send email with new password\n$to = $email;\n$subject = 'Your new password';\n$message = \"Your new password is: $password\";\nmail($to, $subject, $message);\n?>\n```\n\n### Database Configuration\n\n**config/database.php**\n\n```php\n<?php\nDB_HOST = 'your_host';\nDB_USER = 'your_username';\nDB_PASSWORD = 'your_password';\nDB_NAME = 'your_database_name';\n\nfunction query($query) {\n  global $dbc;\n  mysqli_query($dbc, $query);\n}\n?>\n```\n\n### HTML Form\n\n**forgot_password.html**\n\n```html\n<form action=\"forgot_password.php\" method=\"post\">\n  <label for=\"email\">Email:</label>\n  <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n  <input type of=\"submit\" value=\"Forgot Password\">\n</form>\n```\n\n### Usage\n\n1. Create a new file called `config/database.php` with your database configuration details.\n2. Replace the placeholders in the code (e.g., `DB_HOST`, `DB_USER`, etc.) with your actual database credentials.\n3. Save both files (`forgot_password.php` and `config/database.php`) on your server.\n4. Visit the forgot password page by accessing `forgot_password.php` in your web browser.\n\nNote: This is a basic example for illustration purposes only. You should consider implementing additional security measures, such as hashing and salting passwords, to protect your users' data. Additionally, this code assumes a MySQL database; you may need to modify it if using another database system.", "code_blocks": [null, "```php\n<?php\nrequire_once 'config/database.php';\n\n// Form data from the forgot password form\n$email = $_POST['email'];\n\n// Validate email input\nif (empty($email)) {\n  $error[] = 'Please enter your email address.';\n}\n\n// Check if email is in database\n$dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($dbc, $query);\n\nif (mysqli_num_rows($result) == 0) {\n  $error[] = 'Email address not found.';\n} else {\n  // Generate random password\n  $password = substr(str_shuffle('abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'), 0, 8);\n  \n  // Update user's password in database\n  query(\"UPDATE users SET password_hash = '$password' WHERE email = '$email'\");\n}\n\n// Send email with new password\n$to = $email;\n$subject = 'Your new password';\n$message = \"Your new password is: $password\";\nmail($to, $subject, $message);\n?>\n```", "```php\n<?php\nDB_HOST = 'your_host';\nDB_USER = 'your_username';\nDB_PASSWORD = 'your_password';\nDB_NAME = 'your_database_name';\n\nfunction query($query) {\n  global $dbc;\n  mysqli_query($dbc, $query);\n}\n?>\n```", null]}
