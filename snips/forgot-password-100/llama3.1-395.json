{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of how to create a \"forgot password\" function in PHP:\n\n**Note:** This example assumes you have a database setup with a table for users, and that the user table has columns for `email`, `username`, and `password` (hashed with a library like bcrypt).\n\n**Step 1: Create the forgot password form**\n\nCreate a new PHP file called `forgot-password.php`. Add the following code:\n```php\n<?php\nsession_start();\n\n// Check if the form was submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get the email from the form\n    $email = $_POST['email'];\n\n    // Validate the email (very basic validation)\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email\";\n        return;\n    }\n\n    // Check if the user exists in the database\n    include_once 'db.php'; // assuming your db connection is in a separate file called db.php\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found\";\n        return;\n    }\n\n    // Generate a random password and store it in the user's account\n    $new_password = substr(md5(uniqid(mt_rand(), true)), 0, 10);\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send an email to the user with their new password\n    include_once 'send-email.php'; // assuming you have a separate file for sending emails called send-email.php\n    send_email($email, \"Your new password is: $new_password\");\n\n    echo \"Password reset successfully! You will receive an email with your new password.\";\n}\n?>\n\n<form method=\"post\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\">\n    <label>Email:</label>\n    <input type=\"email\" name=\"email\">\n    <button type=\"submit\">Send Reset Link</button>\n</form>\n```\n**Step 2: Send the email with the new password**\n\nCreate a new PHP file called `send-email.php`. Add the following code:\n```php\n<?php\nfunction send_email($to, $subject, $body) {\n    $from = \"your-email@example.com\";\n    $headers = \"From: $from\\r\\nContent-Type: text/html; charset=UTF-8\\r\\n\";\n\n    mail($to, $subject, $body, $headers);\n}\n?>\n```\n**Note:** You'll need to replace `your-email@example.com` with your actual email address.\n\n**Step 3: Create the database connection**\n\nCreate a new PHP file called `db.php`. Add the following code:\n```php\n<?php\n$servername = \"localhost\";\n$username = \"your-username\";\n$password = \"your-password\";\n$dbname = \"your-database\";\n\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```\n**Note:** Replace the placeholders with your actual database credentials and name.\n\nThis example demonstrates a basic forgot password function using PHP. However, keep in mind that this is just a starting point and you should consider implementing additional security measures to prevent abuse of this feature (e.g., CAPTCHA).", "code_blocks": ["```php\n<?php\nsession_start();\n\n// Check if the form was submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get the email from the form\n    $email = $_POST['email'];\n\n    // Validate the email (very basic validation)\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email\";\n        return;\n    }\n\n    // Check if the user exists in the database\n    include_once 'db.php'; // assuming your db connection is in a separate file called db.php\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found\";\n        return;\n    }\n\n    // Generate a random password and store it in the user's account\n    $new_password = substr(md5(uniqid(mt_rand(), true)), 0, 10);\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send an email to the user with their new password\n    include_once 'send-email.php'; // assuming you have a separate file for sending emails called send-email.php\n    send_email($email, \"Your new password is: $new_password\");\n\n    echo \"Password reset successfully! You will receive an email with your new password.\";\n}\n?>\n\n<form method=\"post\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\">\n    <label>Email:</label>\n    <input type=\"email\" name=\"email\">\n    <button type=\"submit\">Send Reset Link</button>\n</form>\n```", "```php\n<?php\nfunction send_email($to, $subject, $body) {\n    $from = \"your-email@example.com\";\n    $headers = \"From: $from\\r\\nContent-Type: text/html; charset=UTF-8\\r\\n\";\n\n    mail($to, $subject, $body, $headers);\n}\n?>\n```", "```php\n<?php\n$servername = \"localhost\";\n$username = \"your-username\";\n$password = \"your-password\";\n$dbname = \"your-database\";\n\n$conn = mysqli_connect($servername, $username, $password, $dbname);\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n?>\n```"]}
