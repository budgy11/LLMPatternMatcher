{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a forgotten password function in PHP:\n\n**Step 1: Create the form to request a password reset**\n\nCreate a new file called `forgot_password.php` and add the following code:\n```php\n<?php require_once 'config.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Forgot Password</title>\n</head>\n<body>\n\n<h1>Forgot Password</h1>\n\n<form action=\"\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <input type=\"submit\" value=\"Submit\" name=\"forgot_password\">\n</form>\n\n<?php if (isset($_POST['forgot_password'])) { \n    require_once 'forgot_password_process.php'; \n} ?>\n\n</body>\n</html>\n```\n**Step 2: Create the process to send a password reset email**\n\nCreate a new file called `forgot_password_process.php` and add the following code:\n```php\n<?php\n\n// Get user input from form\n$email = $_POST['email'];\n\n// Check if email is in database\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($conn, $query);\n\nif (mysqli_num_rows($result) > 0) {\n    // Email exists, generate new password and send reset link\n    $row = mysqli_fetch_assoc($result);\n    $new_password = substr(str_shuffle(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"), 0, 8);\n    \n    // Update user's password in database\n    $update_query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $update_query);\n\n    // Send password reset link to user via email\n    $to = $email;\n    $subject = \"Password Reset\";\n    $message = \"Your new password is: $new_password. Click this link to login: <a href='login.php'>Login</a>\";\n    mail($to, $subject, $message);\n\n    echo \"<p>Password reset email sent to $email.</p>\";\n} else {\n    echo \"<p>Email not found in database.</p>\";\n}\n\n?>\n```\n**Step 3: Add the necessary PHP configuration**\n\nCreate a new file called `config.php` and add the following code:\n```php\n<?php\n\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```\n**How it works**\n\n1. The user submits their email address through the `forgot_password.php` form.\n2. The `forgot_password_process.php` script checks if the email exists in the database.\n3. If the email exists, a new password is generated and stored in the database.\n4. A password reset link is sent to the user's email with their new password.\n\n**Security note**\n\n* This example uses a simple password hashing mechanism (substr(str_shuffle(...))). In a real-world application, you should use a more secure password hashing algorithm like bcrypt or PBKDF2.\n* This example also assumes that the database connection settings are stored in `config.php`. You should consider using a more secure way to store sensitive information like database credentials.\n\nI hope this helps! Let me know if you have any questions.", "code_blocks": ["```php\n<?php require_once 'config.php'; ?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Forgot Password</title>\n</head>\n<body>\n\n<h1>Forgot Password</h1>\n\n<form action=\"\" method=\"post\">\n    <label for=\"email\">Email:</label>\n    <input type=\"email\" id=\"email\" name=\"email\"><br><br>\n    <input type=\"submit\" value=\"Submit\" name=\"forgot_password\">\n</form>\n\n<?php if (isset($_POST['forgot_password'])) { \n    require_once 'forgot_password_process.php'; \n} ?>\n\n</body>\n</html>\n```", "```php\n<?php\n\n// Get user input from form\n$email = $_POST['email'];\n\n// Check if email is in database\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = mysqli_query($conn, $query);\n\nif (mysqli_num_rows($result) > 0) {\n    // Email exists, generate new password and send reset link\n    $row = mysqli_fetch_assoc($result);\n    $new_password = substr(str_shuffle(\"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"), 0, 8);\n    \n    // Update user's password in database\n    $update_query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $update_query);\n\n    // Send password reset link to user via email\n    $to = $email;\n    $subject = \"Password Reset\";\n    $message = \"Your new password is: $new_password. Click this link to login: <a href='login.php'>Login</a>\";\n    mail($to, $subject, $message);\n\n    echo \"<p>Password reset email sent to $email.</p>\";\n} else {\n    echo \"<p>Email not found in database.</p>\";\n}\n\n?>\n```", "```php\n<?php\n\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```"]}
