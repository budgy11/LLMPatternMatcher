{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of how you can create a forgot password function using PHP:\n\n**Database Table**\n\nFirst, let's assume that we have a database table called `users` with the following columns:\n\n| Column Name | Data Type | Description |\n| --- | --- | --- |\n| id | int | Unique user ID |\n| email | varchar(255) | User email address |\n| password | varchar(255) | Hashed user password (using a library like bcrypt or PHP's built-in hash function) |\n\n**Forgot Password Function**\n\nCreate a new PHP file called `forgot_password.php` and add the following code:\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if email exists in database\n$email = $_POST['email'];\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = $conn->query($query);\n\nif ($result->num_rows > 0) {\n    // Get user ID from result\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Generate a reset password token (e.g. random string of characters)\n    $token = bin2hex(random_bytes(32));\n\n    // Insert token into database (optional: you can use a separate table for tokens)\n    $query = \"UPDATE users SET password_reset_token = '$token' WHERE id = '$user_id'\";\n    $conn->query($query);\n\n    // Send email with reset link\n    $subject = \"Reset Password Link\";\n    $body = \"\n        <p>Hello $email,</p>\n        <p>Click on the following link to reset your password:</p>\n        <a href='http://your-website.com/reset-password.php?token=$token'>Reset Password</a>\n    \";\n    mail($email, $subject, $body);\n\n    echo \"Email sent with reset link. Please check your email and click on the link to reset your password.\";\n} else {\n    echo \"Email not found in database.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n**Reset Password Function**\n\nCreate a new PHP file called `reset_password.php` and add the following code:\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if token exists in database\n$token = $_GET['token'];\n$query = \"SELECT * FROM users WHERE password_reset_token = '$token'\";\n$result = $conn->query($query);\n\nif ($result->num_rows > 0) {\n    // Get user ID from result\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Prompt user to enter new password\n    echo \"\n        <form action='reset_password_submit.php' method='post'>\n            <label for='new_password'>New Password:</label>\n            <input type='password' id='new_password' name='new_password'><br><br>\n            <label for='confirm_new_password'>Confirm New Password:</label>\n            <input type='password' id='confirm_new_password' name='confirm_new_password'><br><br>\n            <button type='submit'>Reset Password</button>\n        </form>\n    \";\n\n} else {\n    echo \"Invalid token.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n**Submit Reset Password Function**\n\nCreate a new PHP file called `reset_password_submit.php` and add the following code:\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if user entered valid new password\n$new_password = $_POST['new_password'];\n$confirm_new_password = $_POST['confirm_new_password'];\n\nif ($new_password == $confirm_new_password) {\n    // Hash new password and update it in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE id = '$_GET[token]'\";\n    $conn->query($query);\n\n    echo \"Password reset successfully!\";\n} else {\n    echo \"Passwords do not match.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\nThis is a basic example of how you can create a forgot password function using PHP. Note that this code assumes that you have a `users` table in your database with the columns mentioned earlier. You will need to modify the code to fit your specific use case.\n\nAlso, keep in mind that storing sensitive data like passwords and tokens in plain text is not recommended. You should use a secure hashing algorithm (like bcrypt or PHP's built-in hash function) to store passwords securely.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if email exists in database\n$email = $_POST['email'];\n$query = \"SELECT * FROM users WHERE email = '$email'\";\n$result = $conn->query($query);\n\nif ($result->num_rows > 0) {\n    // Get user ID from result\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Generate a reset password token (e.g. random string of characters)\n    $token = bin2hex(random_bytes(32));\n\n    // Insert token into database (optional: you can use a separate table for tokens)\n    $query = \"UPDATE users SET password_reset_token = '$token' WHERE id = '$user_id'\";\n    $conn->query($query);\n\n    // Send email with reset link\n    $subject = \"Reset Password Link\";\n    $body = \"\n        <p>Hello $email,</p>\n        <p>Click on the following link to reset your password:</p>\n        <a href='http://your-website.com/reset-password.php?token=$token'>Reset Password</a>\n    \";\n    mail($email, $subject, $body);\n\n    echo \"Email sent with reset link. Please check your email and click on the link to reset your password.\";\n} else {\n    echo \"Email not found in database.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```", "```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if token exists in database\n$token = $_GET['token'];\n$query = \"SELECT * FROM users WHERE password_reset_token = '$token'\";\n$result = $conn->query($query);\n\nif ($result->num_rows > 0) {\n    // Get user ID from result\n    $user_id = $result->fetch_assoc()['id'];\n\n    // Prompt user to enter new password\n    echo \"\n        <form action='reset_password_submit.php' method='post'>\n            <label for='new_password'>New Password:</label>\n            <input type='password' id='new_password' name='new_password'><br><br>\n            <label for='confirm_new_password'>Confirm New Password:</label>\n            <input type='password' id='confirm_new_password' name='confirm_new_password'><br><br>\n            <button type='submit'>Reset Password</button>\n        </form>\n    \";\n\n} else {\n    echo \"Invalid token.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```", "```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'your_database_host');\ndefine('DB_USERNAME', 'your_database_username');\ndefine('DB_PASSWORD', 'your_database_password');\ndefine('DB_NAME', 'your_database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if user entered valid new password\n$new_password = $_POST['new_password'];\n$confirm_new_password = $_POST['confirm_new_password'];\n\nif ($new_password == $confirm_new_password) {\n    // Hash new password and update it in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE id = '$_GET[token]'\";\n    $conn->query($query);\n\n    echo \"Password reset successfully!\";\n} else {\n    echo \"Passwords do not match.\";\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```"]}
