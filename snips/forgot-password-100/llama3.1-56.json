{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"Forgot Password\" functionality in PHP, using email as the means to reset the password:\n\n**password_reset.php**\n```php\n<?php\n\n// Configuration settings\ndefine('SITE_EMAIL', 'your_email@example.com');\ndefine('SITE_NAME', 'Your Website Name');\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get user input data\n    $email = $_POST['email'];\n\n    // Validate email address\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email address.\";\n        exit;\n    }\n\n    // Check if user exists in database\n    require_once 'db.php';\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found.\";\n        exit;\n    }\n\n    // Generate a random password\n    $new_password = substr(md5(uniqid(mt_rand(), true)), 0, 8);\n\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send email with new password to user\n    $subject = 'Your new password for ' . SITE_NAME;\n    $message = '\n        Dear User,\n        \n        Your new password is: ' . $new_password . '\n\n        Best regards,\n        ' . SITE_NAME;\n    $headers = \"From: \" . SITE_EMAIL;\n    mail($email, $subject, $message, $headers);\n\n    echo \"New password has been sent to your email.\";\n} else {\n    ?>\n    <h1>Forgot Password</h1>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"email\">Email:</label>\n        <input type=\"text\" id=\"email\" name=\"email\" required>\n        <button type=\"submit\">Submit</button>\n    </form>\n    <?php\n}\n?>\n```\n**db.php**\n```php\n<?php\n\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```\nHere's an explanation of the code:\n\n1. The script first checks if the form has been submitted using `$_SERVER['REQUEST_METHOD'] == 'POST'`.\n2. If the form has been submitted, it validates the email address using `filter_var()` and checks if the user exists in the database by querying the `users` table.\n3. If the user exists, a random password is generated using `md5()` and `uniqid()`, and then used to update the user's password in the database.\n4. An email with the new password is sent to the user using PHP's `mail()` function.\n5. Finally, if the form has not been submitted, the script displays a simple form for the user to enter their email address.\n\nNote: This code assumes you have a `users` table in your database with columns `email` and `password`. You'll need to modify the database connection settings and query accordingly.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('SITE_EMAIL', 'your_email@example.com');\ndefine('SITE_NAME', 'Your Website Name');\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get user input data\n    $email = $_POST['email'];\n\n    // Validate email address\n    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {\n        echo \"Invalid email address.\";\n        exit;\n    }\n\n    // Check if user exists in database\n    require_once 'db.php';\n    $query = \"SELECT * FROM users WHERE email = '$email'\";\n    $result = mysqli_query($conn, $query);\n    if (mysqli_num_rows($result) == 0) {\n        echo \"Email not found.\";\n        exit;\n    }\n\n    // Generate a random password\n    $new_password = substr(md5(uniqid(mt_rand(), true)), 0, 8);\n\n    // Update user's password in database\n    $query = \"UPDATE users SET password = '$new_password' WHERE email = '$email'\";\n    mysqli_query($conn, $query);\n\n    // Send email with new password to user\n    $subject = 'Your new password for ' . SITE_NAME;\n    $message = '\n        Dear User,\n        \n        Your new password is: ' . $new_password . '\n\n        Best regards,\n        ' . SITE_NAME;\n    $headers = \"From: \" . SITE_EMAIL;\n    mail($email, $subject, $message, $headers);\n\n    echo \"New password has been sent to your email.\";\n} else {\n    ?>\n    <h1>Forgot Password</h1>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"email\">Email:</label>\n        <input type=\"text\" id=\"email\" name=\"email\" required>\n        <button type=\"submit\">Submit</button>\n    </form>\n    <?php\n}\n?>\n```", "```php\n<?php\n\n// Database connection settings\n$conn = mysqli_connect(\"localhost\", \"username\", \"password\", \"database\");\n\nif (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n?>\n```"]}
