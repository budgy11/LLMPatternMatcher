{"prompt": "Create a forgot password function using php", "llm_output": "Here is an example of a \"Forgot Password\" function in PHP that uses email to reset the user's password:\n\n**Note:** This is just a basic example, and you should consider implementing additional security measures such as hashing and salting passwords.\n\n**Step 1: Create a database table for storing usernames and passwords**\n\nCreate a database table called `users` with the following columns:\n\n| Column Name | Data Type |\n| --- | --- |\n| id | int (primary key) |\n| username | varchar(255) |\n| password | varchar(255) |\n\n**Step 2: Create a PHP script to handle forgot password requests**\n\nCreate a new PHP file called `forgot_password.php` and add the following code:\n```php\n<?php\n\n// Configuration variables\n$host = 'localhost';\n$dbname = 'your_database_name';\n$username = 'your_database_username';\n$password = 'your_database_password';\n\n// Connect to database\n$conn = mysqli_connect($host, $username, $password, $dbname);\n\nif (!$conn) {\n    die('Connection failed: ' . mysqli_error($conn));\n}\n\n// Get the username and email from the form data\n$username = $_POST['username'];\n$email = $_POST['email'];\n\n// Query to get user's ID based on username and email\n$query = \"SELECT id FROM users WHERE username='$username' AND email='$email'\";\n$result = mysqli_query($conn, $query);\n\nif (mysqli_num_rows($result) == 0) {\n    echo 'Username or Email not found';\n} else {\n    // Get the user's ID\n    $user_id = mysqli_fetch_assoc($result)['id'];\n\n    // Generate a new password and store it in the database\n    $new_password = substr(md5(uniqid()), 0, 8);\n    $query = \"UPDATE users SET password='$new_password' WHERE id='$user_id'\";\n    mysqli_query($conn, $query);\n\n    // Send an email with the new password to the user's email address\n    $subject = 'Your New Password';\n    $message = \"Dear $username,\\n\\nYour new password is: $new_password\";\n    $from = 'your_email@example.com';\n    $to = $email;\n    mail($to, $subject, $message, 'From: ' . $from);\n\n    echo 'New password sent to your email address.';\n}\n\n// Close the database connection\nmysqli_close($conn);\n?>\n```\n**Step 3: Create a form for users to enter their username and email**\n\nCreate an HTML form called `forgot_password_form.html` with the following code:\n```html\n<form action=\"forgot_password.php\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Email:</label>\n    <input type=\"email\" name=\"email\"><br><br>\n    <input type=\"submit\" value=\"Submit\">\n</form>\n```\n**Step 4: Test the forgot password function**\n\nOpen your web browser and navigate to `forgot_password_form.html`. Enter a valid username and email address in the form, and click submit. You should receive an email with the new password.\n\nNote that this is just a basic example, and you should consider implementing additional security measures such as hashing and salting passwords, and also storing the reset link securely using a token-based system.", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$host = 'localhost';\n$dbname = 'your_database_name';\n$username = 'your_database_username';\n$password = 'your_database_password';\n\n// Connect to database\n$conn = mysqli_connect($host, $username, $password, $dbname);\n\nif (!$conn) {\n    die('Connection failed: ' . mysqli_error($conn));\n}\n\n// Get the username and email from the form data\n$username = $_POST['username'];\n$email = $_POST['email'];\n\n// Query to get user's ID based on username and email\n$query = \"SELECT id FROM users WHERE username='$username' AND email='$email'\";\n$result = mysqli_query($conn, $query);\n\nif (mysqli_num_rows($result) == 0) {\n    echo 'Username or Email not found';\n} else {\n    // Get the user's ID\n    $user_id = mysqli_fetch_assoc($result)['id'];\n\n    // Generate a new password and store it in the database\n    $new_password = substr(md5(uniqid()), 0, 8);\n    $query = \"UPDATE users SET password='$new_password' WHERE id='$user_id'\";\n    mysqli_query($conn, $query);\n\n    // Send an email with the new password to the user's email address\n    $subject = 'Your New Password';\n    $message = \"Dear $username,\\n\\nYour new password is: $new_password\";\n    $from = 'your_email@example.com';\n    $to = $email;\n    mail($to, $subject, $message, 'From: ' . $from);\n\n    echo 'New password sent to your email address.';\n}\n\n// Close the database connection\nmysqli_close($conn);\n?>\n```", null]}
