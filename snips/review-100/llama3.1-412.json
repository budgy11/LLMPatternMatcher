{"prompt": "Create a user review function using php", "llm_output": "Here is an example of a simple user review system using PHP:\n\n**database schema**\n\nWe'll assume we have a database with two tables: `reviews` and `products`. The `reviews` table has the following columns:\n\n* `id`: unique identifier for each review\n* `product_id`: foreign key referencing the product being reviewed\n* `user_id`: foreign key referencing the user who submitted the review\n* `rating`: rating given by the user (e.g. 1-5)\n* `review_text`: text of the review\n\nThe `products` table has columns for storing information about each product, but we don't need to define those here.\n\n**code**\n\nWe'll create a few PHP files:\n\n`review.php`: contains the logic for creating and updating reviews\n`display_reviews.php`: displays a list of all reviews for a given product\n`add_review.php`: form for users to submit new reviews\n\n**review.php**\n```php\n// review.php\n\n// database connection info (replace with your own)\n$servername = \"localhost\";\n$username = \"username\";\n$password = \"password\";\n$dbname = \"database_name\";\n\n// create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// function to add a new review\nfunction add_review($product_id, $user_id, $rating, $review_text) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (product_id, user_id, rating, review_text)\n            VALUES ('$product_id', '$user_id', '$rating', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review added successfully\n    } else {\n        return false; // error adding review\n    }\n}\n\n// function to update an existing review\nfunction update_review($id, $product_id, $user_id, $rating, $review_text) {\n    global $conn;\n    $sql = \"UPDATE reviews SET product_id='$product_id', user_id='$user_id', rating='$rating', review_text='$review_text'\n            WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review updated successfully\n    } else {\n        return false; // error updating review\n    }\n}\n\n// function to delete a review\nfunction delete_review($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review deleted successfully\n    } else {\n        return false; // error deleting review\n    }\n}\n\n// close connection when done\n$conn->close();\n```\n\n**display_reviews.php**\n```php\n// display_reviews.php\n\n// include review.php to get functions and database connection info\ninclude \"review.php\";\n\n// get list of reviews for a given product\n$product_id = $_GET['product_id'];\n$reviews = array();\n\n$sql = \"SELECT * FROM reviews WHERE product_id='$product_id'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n    // output data of each row\n    while($row = $result->fetch_assoc()) {\n        $reviews[] = $row;\n    }\n} else {\n    echo \"No reviews found for this product.\";\n}\n\n// close connection when done\n$conn->close();\n\n// display list of reviews\nforeach ($reviews as $review) {\n    echo \"Rating: \" . $review['rating'] . \", Review Text: \" . $review['review_text'];\n}\n```\n\n**add_review.php**\n```php\n<!-- add_review.php -->\n\n<form action=\"review.php\" method=\"post\">\n    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $_GET['product_id']; ?>\">\n    <label for=\"rating\">Rating:</label>\n    <select id=\"rating\" name=\"rating\">\n        <?php\n            for ($i = 1; $i <= 5; $i++) {\n                echo \"<option value='$i'>$i stars</option>\";\n            }\n        ?>\n    </select>\n\n    <br><br>\n\n    <textarea id=\"review_text\" name=\"review_text\" placeholder=\"Write your review here...\"></textarea>\n\n    <br><br>\n\n    <input type=\"submit\" value=\"Submit Review\">\n</form>\n```\n\n**example usage**\n\nTo add a new review, go to `add_review.php?product_id=1`, where 1 is the ID of the product being reviewed. Fill out the form and submit it.\n\nTo display all reviews for a given product, go to `display_reviews.php?product_id=1`.\n\nThis is just a basic example, you'll need to modify it according to your needs (e.g., adding error handling, security measures, etc.).\n\nPlease let me know if you'd like any modifications or have questions!", "code_blocks": ["```php\n// review.php\n\n// database connection info (replace with your own)\n$servername = \"localhost\";\n$username = \"username\";\n$password = \"password\";\n$dbname = \"database_name\";\n\n// create connection\n$conn = new mysqli($servername, $username, $password, $dbname);\n\n// check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// function to add a new review\nfunction add_review($product_id, $user_id, $rating, $review_text) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (product_id, user_id, rating, review_text)\n            VALUES ('$product_id', '$user_id', '$rating', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review added successfully\n    } else {\n        return false; // error adding review\n    }\n}\n\n// function to update an existing review\nfunction update_review($id, $product_id, $user_id, $rating, $review_text) {\n    global $conn;\n    $sql = \"UPDATE reviews SET product_id='$product_id', user_id='$user_id', rating='$rating', review_text='$review_text'\n            WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review updated successfully\n    } else {\n        return false; // error updating review\n    }\n}\n\n// function to delete a review\nfunction delete_review($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        return true; // review deleted successfully\n    } else {\n        return false; // error deleting review\n    }\n}\n\n// close connection when done\n$conn->close();\n```", "```php\n// display_reviews.php\n\n// include review.php to get functions and database connection info\ninclude \"review.php\";\n\n// get list of reviews for a given product\n$product_id = $_GET['product_id'];\n$reviews = array();\n\n$sql = \"SELECT * FROM reviews WHERE product_id='$product_id'\";\n$result = $conn->query($sql);\n\nif ($result->num_rows > 0) {\n    // output data of each row\n    while($row = $result->fetch_assoc()) {\n        $reviews[] = $row;\n    }\n} else {\n    echo \"No reviews found for this product.\";\n}\n\n// close connection when done\n$conn->close();\n\n// display list of reviews\nforeach ($reviews as $review) {\n    echo \"Rating: \" . $review['rating'] . \", Review Text: \" . $review['review_text'];\n}\n```", "```php\n<!-- add_review.php -->\n\n<form action=\"review.php\" method=\"post\">\n    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $_GET['product_id']; ?>\">\n    <label for=\"rating\">Rating:</label>\n    <select id=\"rating\" name=\"rating\">\n        <?php\n            for ($i = 1; $i <= 5; $i++) {\n                echo \"<option value='$i'>$i stars</option>\";\n            }\n        ?>\n    </select>\n\n    <br><br>\n\n    <textarea id=\"review_text\" name=\"review_text\" placeholder=\"Write your review here...\"></textarea>\n\n    <br><br>\n\n    <input type=\"submit\" value=\"Submit Review\">\n</form>\n```"]}
