{"prompt": "Create a user review function using php", "llm_output": "Here's an example of a simple user review system in PHP, including CRUD (Create, Read, Update, Delete) operations. This example assumes you have a MySQL database setup with the following table:\n\n**reviews Table**\n\n| Field Name | Data Type |\n| --- | --- |\n| id | int (primary key) |\n| title | varchar(255) |\n| content | text |\n| rating | tinyint |\n| user_id | int (foreign key referencing users table) |\n\n**users Table**\n\n| Field Name | Data Type |\n| --- | --- |\n| id | int (primary key) |\n| name | varchar(100) |\n| email | varchar(255) |\n\n**PHP Code**\n\n```php\n// database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// functions for CRUD operations\n\nfunction create_review($title, $content, $rating, $user_id) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (title, content, rating, user_id)\n            VALUES ('$title', '$content', '$rating', '$user_id')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review created successfully.\";\n    } else {\n        echo \"Error creating review: \" . $conn->error;\n    }\n}\n\nfunction read_reviews() {\n    global $conn;\n    $sql = \"SELECT * FROM reviews ORDER BY id DESC\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            echo \"ID: \" . $row[\"id\"]. \" - Title: \" . $row[\"title\"]. \" Rating: \" . $row[\"rating\"]. \"<br>\";\n        }\n    } else {\n        echo \"No reviews found.\";\n    }\n}\n\nfunction update_review($id, $title, $content, $rating) {\n    global $conn;\n    $sql = \"UPDATE reviews SET title='$title', content='$content', rating='$rating' WHERE id=$id\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review updated successfully.\";\n    } else {\n        echo \"Error updating review: \" . $conn->error;\n    }\n}\n\nfunction delete_review($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id=$id\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review deleted successfully.\";\n    } else {\n        echo \"Error deleting review: \" . $conn->error;\n    }\n}\n\n// example usage\ncreate_review(\"Example Review\", \"This is a sample review.\", 5, 1);\nread_reviews();\nupdate_review(1, \"Updated Title\", \"New content for review 1.\", 4);\ndelete_review(1);\n\n$conn->close();\n```\n\n**Note:**\n\n- This code uses the MySQLi extension. You may need to adjust it according to your specific database setup (e.g., if you're using PDO).\n- This is a basic example and doesn't cover all edge cases or include any error checking that would be necessary in production.\n- Make sure to replace `DB_HOST`, `DB_USER`, `DB_PASSWORD`, and `DB_NAME` with your actual database settings.", "code_blocks": ["```php\n// database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// functions for CRUD operations\n\nfunction create_review($title, $content, $rating, $user_id) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (title, content, rating, user_id)\n            VALUES ('$title', '$content', '$rating', '$user_id')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review created successfully.\";\n    } else {\n        echo \"Error creating review: \" . $conn->error;\n    }\n}\n\nfunction read_reviews() {\n    global $conn;\n    $sql = \"SELECT * FROM reviews ORDER BY id DESC\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            echo \"ID: \" . $row[\"id\"]. \" - Title: \" . $row[\"title\"]. \" Rating: \" . $row[\"rating\"]. \"<br>\";\n        }\n    } else {\n        echo \"No reviews found.\";\n    }\n}\n\nfunction update_review($id, $title, $content, $rating) {\n    global $conn;\n    $sql = \"UPDATE reviews SET title='$title', content='$content', rating='$rating' WHERE id=$id\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review updated successfully.\";\n    } else {\n        echo \"Error updating review: \" . $conn->error;\n    }\n}\n\nfunction delete_review($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id=$id\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Review deleted successfully.\";\n    } else {\n        echo \"Error deleting review: \" . $conn->error;\n    }\n}\n\n// example usage\ncreate_review(\"Example Review\", \"This is a sample review.\", 5, 1);\nread_reviews();\nupdate_review(1, \"Updated Title\", \"New content for review 1.\", 4);\ndelete_review(1);\n\n$conn->close();\n```"]}
