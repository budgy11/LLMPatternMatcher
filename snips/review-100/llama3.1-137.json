{"prompt": "Create a user review function using php", "llm_output": "**User Review Function in PHP**\n=====================================\n\nBelow is an example of a simple user review system implemented using PHP. This code includes functions to add, update, delete and retrieve reviews.\n\n### Database Setup\n\nWe'll assume that you have a MySQL database with a `reviews` table. If not, create the following table:\n\n```sql\nCREATE TABLE reviews (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    review TEXT NOT NULL,\n    rating DECIMAL(2, 1) NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n```\n\n### PHP Code\n\nCreate a file called `review_functions.php` and add the following code:\n\n```php\n// Connect to database\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add a review\nfunction addReview($user_id, $review, $rating) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (user_id, review, rating)\n            VALUES ('$user_id', '$review', '$rating')\";\n    if ($conn->query($sql)) {\n        return true; // Review added successfully\n    } else {\n        return false; // Error adding review\n    }\n}\n\n// Function to update a review\nfunction updateReview($id, $new_review, $new_rating) {\n    global $conn;\n    $sql = \"UPDATE reviews SET review='$new_review', rating='$new_rating'\n            WHERE id=$id\";\n    if ($conn->query($sql)) {\n        return true; // Review updated successfully\n    } else {\n        return false; // Error updating review\n    }\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id=$id\";\n    if ($conn->query($sql)) {\n        return true; // Review deleted successfully\n    } else {\n        return false; // Error deleting review\n    }\n}\n\n// Function to get all reviews for a user\nfunction getUserReviews($user_id) {\n    global $conn;\n    $sql = \"SELECT * FROM reviews WHERE user_id=$user_id\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review: \" . $row[\"review\"]. \" - Rating: \" . $row[\"rating\"]. \"<br>\";\n        }\n    } else {\n        echo \"No reviews found for this user.\";\n    }\n}\n```\n\n### Example Usage\n\nTo use the functions, include the `review_functions.php` file in your main PHP script:\n\n```php\n<?php require_once 'review_functions.php'; ?>\n```\n\nYou can then call the functions like this:\n\n```php\n// Add a review\n$result = addReview(1, \"This is a great product!\", 4.5);\nif ($result) {\n    echo \"Review added successfully.\";\n} else {\n    echo \"Error adding review.\";\n}\n\n// Update a review\n$result = updateReview(2, \"I'm so disappointed with this product.\", 1.0);\nif ($result) {\n    echo \"Review updated successfully.\";\n} else {\n    echo \"Error updating review.\";\n}\n\n// Delete a review\n$result = deleteReview(3);\nif ($result) {\n    echo \"Review deleted successfully.\";\n} else {\n    echo \"Error deleting review.\";\n}\n\n// Get all reviews for a user\ngetUserReviews(1);\n```\n\nRemember to replace the placeholders in the database connection code with your actual database credentials.", "code_blocks": [null, "```php\n// Connect to database\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add a review\nfunction addReview($user_id, $review, $rating) {\n    global $conn;\n    $sql = \"INSERT INTO reviews (user_id, review, rating)\n            VALUES ('$user_id', '$review', '$rating')\";\n    if ($conn->query($sql)) {\n        return true; // Review added successfully\n    } else {\n        return false; // Error adding review\n    }\n}\n\n// Function to update a review\nfunction updateReview($id, $new_review, $new_rating) {\n    global $conn;\n    $sql = \"UPDATE reviews SET review='$new_review', rating='$new_rating'\n            WHERE id=$id\";\n    if ($conn->query($sql)) {\n        return true; // Review updated successfully\n    } else {\n        return false; // Error updating review\n    }\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n    global $conn;\n    $sql = \"DELETE FROM reviews WHERE id=$id\";\n    if ($conn->query($sql)) {\n        return true; // Review deleted successfully\n    } else {\n        return false; // Error deleting review\n    }\n}\n\n// Function to get all reviews for a user\nfunction getUserReviews($user_id) {\n    global $conn;\n    $sql = \"SELECT * FROM reviews WHERE user_id=$user_id\";\n    $result = $conn->query($sql);\n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review: \" . $row[\"review\"]. \" - Rating: \" . $row[\"rating\"]. \"<br>\";\n        }\n    } else {\n        echo \"No reviews found for this user.\";\n    }\n}\n```", "```php\n<?php require_once 'review_functions.php'; ?>\n```", "```php\n// Add a review\n$result = addReview(1, \"This is a great product!\", 4.5);\nif ($result) {\n    echo \"Review added successfully.\";\n} else {\n    echo \"Error adding review.\";\n}\n\n// Update a review\n$result = updateReview(2, \"I'm so disappointed with this product.\", 1.0);\nif ($result) {\n    echo \"Review updated successfully.\";\n} else {\n    echo \"Error updating review.\";\n}\n\n// Delete a review\n$result = deleteReview(3);\nif ($result) {\n    echo \"Review deleted successfully.\";\n} else {\n    echo \"Error deleting review.\";\n}\n\n// Get all reviews for a user\ngetUserReviews(1);\n```"]}
