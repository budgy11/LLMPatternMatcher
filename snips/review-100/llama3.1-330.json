{"prompt": "Create a user review function using php", "llm_output": "Here's an example of a basic user review system using PHP, MySQLi, and HTML. This example includes the following features:\n\n*   Creating reviews\n*   Displaying all reviews (including ratings)\n*   Updating reviews\n*   Deleting reviews\n\n**Database Schema**\n\nThe database schema will have four tables: `users`, `reviews`, `products`, and `ratings`.\n\n```sql\nCREATE TABLE users (\n    id INT AUTO_INCREMENT,\n    name VARCHAR(255),\n    email VARCHAR(255) PRIMARY KEY\n);\n\nCREATE TABLE products (\n    id INT AUTO_INCREMENT,\n    product_name VARCHAR(255),\n    description TEXT,\n    price DECIMAL(10, 2)\n);\n\nCREATE TABLE reviews (\n    id INT AUTO_INCREMENT,\n    user_id INT,\n    product_id INT,\n    review_text TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE ratings (\n    id INT AUTO_INCREMENT,\n    review_id INT PRIMARY KEY,\n    rating TINYINT\n);\n```\n\n**PHP Code**\n\nThis PHP code will handle the logic for creating, reading, updating, and deleting reviews.\n\n```php\n<?php\n\n// Include configuration file\nrequire 'config.php';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to create a review\nfunction createReview($user_id, $product_id, $review_text) {\n    global $conn;\n    \n    // Insert review into database\n    $sql = \"INSERT INTO reviews (user_id, product_id, review_text)\n            VALUES ('$user_id', '$product_id', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Function to display all reviews\nfunction displayReviews() {\n    global $conn;\n    \n    // Select all reviews from database\n    $sql = \"SELECT * FROM reviews\";\n    $result = $conn->query($sql);\n    \n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review ID: \" . $row[\"id\"]. \" - User ID: \" . $row[\"user_id\"]. \" - Product ID: \" . $row[\"product_id\"]. \" - Review Text: \" . $row[\"review_text\"]. \"<br>\";\n        }\n    } else {\n        echo \"0 results\";\n    }\n}\n\n// Function to update a review\nfunction updateReview($id, $review_text) {\n    global $conn;\n    \n    // Update review in database\n    $sql = \"UPDATE reviews SET review_text='$review_text' WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Record updated successfully\";\n    } else {\n        echo \"Error updating record: \" . $conn->error;\n    }\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n    global $conn;\n    \n    // Delete review from database\n    $sql = \"DELETE FROM reviews WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Record deleted successfully\";\n    } else {\n        echo \"Error deleting record: \" . $conn->error;\n    }\n}\n\n?>\n```\n\n**HTML Code**\n\nThis HTML code will handle the user interface for creating, displaying, updating, and deleting reviews.\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>User Review System</title>\n</head>\n<body>\n\n<h2>Review Creation Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    User ID: <input type=\"text\" name=\"user_id\"><br><br>\n    Product ID: <input type=\"text\" name=\"product_id\"><br><br>\n    Review Text: <textarea name=\"review_text\"></textarea><br><br>\n    <input type=\"submit\" value=\"Create Review\">\n</form>\n\n<h2>Review Display Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    <input type=\"submit\" value=\"Display All Reviews\">\n</form>\n\n<?php\n// Call the functions to create a review and display all reviews\nif (isset($_POST[\"create_review\"])) {\n    $user_id = $_POST['user_id'];\n    $product_id = $_POST['product_id'];\n    $review_text = $_POST['review_text'];\n    createReview($user_id, $product_id, $review_text);\n}\n\nif (isset($_POST[\"display_reviews\"])) {\n    displayReviews();\n}\n?>\n\n</body>\n</html>\n```\n\n**Full PHP Code with HTML**\n\nHere's the full PHP code including HTML.\n\n```php\n<?php\n\n// Include configuration file\nrequire 'config.php';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>User Review System</title>\n</head>\n<body>\n\n<h2>Review Creation Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    User ID: <input type=\"text\" name=\"user_id\"><br><br>\n    Product ID: <input type=\"text\" name=\"product_id\"><br><br>\n    Review Text: <textarea name=\"review_text\"></textarea><br><br>\n    <input type=\"submit\" value=\"Create Review\">\n</form>\n\n<h2>Review Display Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    <input type=\"submit\" value=\"Display All Reviews\">\n</form>\n\n<?php\n// Call the functions to create a review and display all reviews\nif (isset($_POST[\"create_review\"])) {\n    $user_id = $_POST['user_id'];\n    $product_id = $_POST['product_id'];\n    $review_text = $_POST['review_text'];\n    createReview($user_id, $product_id, $review_text);\n}\n\nif (isset($_POST[\"display_reviews\"])) {\n    displayReviews();\n}\n?>\n\n</body>\n</html>\n\n<?php\n// Function to create a review\nfunction createReview($user_id, $product_id, $review_text) {\n    global $conn;\n    \n    // Insert review into database\n    $sql = \"INSERT INTO reviews (user_id, product_id, review_text)\n            VALUES ('$user_id', '$product_id', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Function to display all reviews\nfunction displayReviews() {\n    global $conn;\n    \n    // Select all reviews from database\n    $sql = \"SELECT * FROM reviews\";\n    $result = $conn->query($sql);\n    \n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review ID: \" . $row[\"id\"]. \" - User ID: \" . $row[\"user_id\"]. \" - Product ID: \" . $row[\"product_id\"]. \" - Review Text: \" . $row[\"review_text\"]. \"<br>\";\n        }\n    } else {\n        echo \"0 results\";\n    }\n}\n\n?>\n```\n\nThis example creates a basic user review system with PHP, MySQLi, and HTML. The `createReview` function inserts new reviews into the database, while the `displayReviews` function displays all existing reviews from the database.", "code_blocks": [null, "```php\n<?php\n\n// Include configuration file\nrequire 'config.php';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to create a review\nfunction createReview($user_id, $product_id, $review_text) {\n    global $conn;\n    \n    // Insert review into database\n    $sql = \"INSERT INTO reviews (user_id, product_id, review_text)\n            VALUES ('$user_id', '$product_id', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Function to display all reviews\nfunction displayReviews() {\n    global $conn;\n    \n    // Select all reviews from database\n    $sql = \"SELECT * FROM reviews\";\n    $result = $conn->query($sql);\n    \n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review ID: \" . $row[\"id\"]. \" - User ID: \" . $row[\"user_id\"]. \" - Product ID: \" . $row[\"product_id\"]. \" - Review Text: \" . $row[\"review_text\"]. \"<br>\";\n        }\n    } else {\n        echo \"0 results\";\n    }\n}\n\n// Function to update a review\nfunction updateReview($id, $review_text) {\n    global $conn;\n    \n    // Update review in database\n    $sql = \"UPDATE reviews SET review_text='$review_text' WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Record updated successfully\";\n    } else {\n        echo \"Error updating record: \" . $conn->error;\n    }\n}\n\n// Function to delete a review\nfunction deleteReview($id) {\n    global $conn;\n    \n    // Delete review from database\n    $sql = \"DELETE FROM reviews WHERE id='$id'\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"Record deleted successfully\";\n    } else {\n        echo \"Error deleting record: \" . $conn->error;\n    }\n}\n\n?>\n```", null, "```php\n<?php\n\n// Include configuration file\nrequire 'config.php';\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n    <title>User Review System</title>\n</head>\n<body>\n\n<h2>Review Creation Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    User ID: <input type=\"text\" name=\"user_id\"><br><br>\n    Product ID: <input type=\"text\" name=\"product_id\"><br><br>\n    Review Text: <textarea name=\"review_text\"></textarea><br><br>\n    <input type=\"submit\" value=\"Create Review\">\n</form>\n\n<h2>Review Display Form</h2>\n\n<form action=\"review.php\" method=\"post\">\n    <input type=\"submit\" value=\"Display All Reviews\">\n</form>\n\n<?php\n// Call the functions to create a review and display all reviews\nif (isset($_POST[\"create_review\"])) {\n    $user_id = $_POST['user_id'];\n    $product_id = $_POST['product_id'];\n    $review_text = $_POST['review_text'];\n    createReview($user_id, $product_id, $review_text);\n}\n\nif (isset($_POST[\"display_reviews\"])) {\n    displayReviews();\n}\n?>\n\n</body>\n</html>\n\n<?php\n// Function to create a review\nfunction createReview($user_id, $product_id, $review_text) {\n    global $conn;\n    \n    // Insert review into database\n    $sql = \"INSERT INTO reviews (user_id, product_id, review_text)\n            VALUES ('$user_id', '$product_id', '$review_text')\";\n    if ($conn->query($sql) === TRUE) {\n        echo \"New record created successfully\";\n    } else {\n        echo \"Error: \" . $sql . \"<br>\" . $conn->error;\n    }\n}\n\n// Function to display all reviews\nfunction displayReviews() {\n    global $conn;\n    \n    // Select all reviews from database\n    $sql = \"SELECT * FROM reviews\";\n    $result = $conn->query($sql);\n    \n    if ($result->num_rows > 0) {\n        // Output data of each row\n        while($row = $result->fetch_assoc()) {\n            echo \"Review ID: \" . $row[\"id\"]. \" - User ID: \" . $row[\"user_id\"]. \" - Product ID: \" . $row[\"product_id\"]. \" - Review Text: \" . $row[\"review_text\"]. \"<br>\";\n        }\n    } else {\n        echo \"0 results\";\n    }\n}\n\n?>\n```"]}
