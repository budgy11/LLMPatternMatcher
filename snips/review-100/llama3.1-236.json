{"prompt": "Create a user review function using php", "llm_output": "Here's an example of a simple user review system in PHP. This code includes functions for adding, viewing, editing and deleting reviews.\n\n**Database Schema:**\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  email VARCHAR(255)\n);\n\nCREATE TABLE products (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255),\n  description TEXT\n);\n\nCREATE TABLE reviews (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  user_id INT,\n  product_id INT,\n  rating TINYINT(1) CHECK (rating BETWEEN 1 AND 5),\n  comment TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (user_id) REFERENCES users(id),\n  FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n\n**PHP Code:**\n```php\n<?php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\n// Function to connect to database\nfunction connect_to_database() {\n    $conn = new mysqli($GLOBALS['database']['host'], $GLOBALS['database']['username'], $GLOBALS['database']['password'], $GLOBALS['database']['database']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to add a review\nfunction add_review($user_id, $product_id, $rating, $comment) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"INSERT INTO reviews (user_id, product_id, rating, comment) VALUES (?, ?, ?, ?)\");\n    $stmt->bind_param(\"iiis\", $user_id, $product_id, $rating, $comment);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to view reviews\nfunction view_reviews($product_id = null) {\n    $conn = connect_to_database();\n    if ($product_id === null) {\n        $stmt = $conn->prepare(\"SELECT * FROM reviews\");\n    } else {\n        $stmt = $conn->prepare(\"SELECT * FROM reviews WHERE product_id = ?\");\n        $stmt->bind_param(\"i\", $product_id);\n    }\n    $stmt->execute();\n    return $stmt->get_result();\n}\n\n// Function to edit a review\nfunction edit_review($id, $rating, $comment) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"UPDATE reviews SET rating = ?, comment = ? WHERE id = ?\");\n    $stmt->bind_param(\"iis\", $rating, $comment, $id);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to delete a review\nfunction delete_review($id) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"DELETE FROM reviews WHERE id = ?\");\n    $stmt->bind_param(\"i\", $id);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n?>\n```\n\n**Example Usage:**\n```php\n// Add a review for a product\n$product_id = 1; // ID of the product to add review for\n$user_id = 1; // ID of the user adding review\n$rating = 5; // Rating out of 5 for the review\n$comment = \"This product is amazing!\"; // Comment for the review\nadd_review($user_id, $product_id, $rating, $comment);\n\n// View reviews for a specific product\n$product_id = 1;\n$reviews = view_reviews($product_id);\nwhile ($review = $reviews->fetch_assoc()) {\n    echo \"User ID: \" . $review['user_id'] . \", Rating: \" . $review['rating'] . \", Comment: \" . $review['comment'];\n}\n\n// Edit a review\n$review_id = 1; // ID of the review to edit\n$new_rating = 4; // New rating for the review\n$new_comment = \"This product is great!\"; // New comment for the review\nedit_review($review_id, $new_rating, $new_comment);\n\n// Delete a review\n$review_id = 1;\ndelete_review($review_id);\n```\nPlease note that this code assumes you have the `mysqli` extension enabled in your PHP configuration. Also, make sure to replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n\nThis example is a basic implementation of a user review system using PHP and MySQL. It doesn't include any error handling or security measures that you might want to implement in a production environment.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\n$database = array(\n    'host' => 'localhost',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'database' => 'your_database'\n);\n\n// Function to connect to database\nfunction connect_to_database() {\n    $conn = new mysqli($GLOBALS['database']['host'], $GLOBALS['database']['username'], $GLOBALS['database']['password'], $GLOBALS['database']['database']);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to add a review\nfunction add_review($user_id, $product_id, $rating, $comment) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"INSERT INTO reviews (user_id, product_id, rating, comment) VALUES (?, ?, ?, ?)\");\n    $stmt->bind_param(\"iiis\", $user_id, $product_id, $rating, $comment);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to view reviews\nfunction view_reviews($product_id = null) {\n    $conn = connect_to_database();\n    if ($product_id === null) {\n        $stmt = $conn->prepare(\"SELECT * FROM reviews\");\n    } else {\n        $stmt = $conn->prepare(\"SELECT * FROM reviews WHERE product_id = ?\");\n        $stmt->bind_param(\"i\", $product_id);\n    }\n    $stmt->execute();\n    return $stmt->get_result();\n}\n\n// Function to edit a review\nfunction edit_review($id, $rating, $comment) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"UPDATE reviews SET rating = ?, comment = ? WHERE id = ?\");\n    $stmt->bind_param(\"iis\", $rating, $comment, $id);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Function to delete a review\nfunction delete_review($id) {\n    $conn = connect_to_database();\n    $stmt = $conn->prepare(\"DELETE FROM reviews WHERE id = ?\");\n    $stmt->bind_param(\"i\", $id);\n    if ($stmt->execute()) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n?>\n```", "```php\n// Add a review for a product\n$product_id = 1; // ID of the product to add review for\n$user_id = 1; // ID of the user adding review\n$rating = 5; // Rating out of 5 for the review\n$comment = \"This product is amazing!\"; // Comment for the review\nadd_review($user_id, $product_id, $rating, $comment);\n\n// View reviews for a specific product\n$product_id = 1;\n$reviews = view_reviews($product_id);\nwhile ($review = $reviews->fetch_assoc()) {\n    echo \"User ID: \" . $review['user_id'] . \", Rating: \" . $review['rating'] . \", Comment: \" . $review['comment'];\n}\n\n// Edit a review\n$review_id = 1; // ID of the review to edit\n$new_rating = 4; // New rating for the review\n$new_comment = \"This product is great!\"; // New comment for the review\nedit_review($review_id, $new_rating, $new_comment);\n\n// Delete a review\n$review_id = 1;\ndelete_review($review_id);\n```"]}
