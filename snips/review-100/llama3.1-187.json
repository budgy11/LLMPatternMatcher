{"prompt": "Create a user review function using php", "llm_output": "Here's an example of how you can create a simple \"add and view\" user reviews system in PHP:\n\n**database.php**\n```php\n<?php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"reviews\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n?>\n```\n**review.php**\n```php\n<?php\ninclude 'database.php';\n\nif (isset($_POST['add_review'])) {\n    $product_id = $_POST['product_id'];\n    $rating = $_POST['rating'];\n    $comment = $_POST['comment'];\n\n    $sql = \"INSERT INTO reviews (product_id, rating, comment) VALUES ('$product_id', '$rating', '$comment')\";\n    if ($conn->query($sql)) {\n        echo \"Review added successfully!\";\n    } else {\n        echo \"Error adding review: \" . $conn->error;\n    }\n}\n\nif (isset($_GET['view_reviews'])) {\n    $product_id = $_GET['product_id'];\n\n    $sql = \"SELECT * FROM reviews WHERE product_id = '$product_id'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        echo \"<h2>Reviews for Product $product_id</h2>\";\n        while ($row = $result->fetch_assoc()) {\n            echo \"<p>Rating: \" . $row['rating'] . \", Comment: \" . $row['comment'] . \"</p>\";\n        }\n    } else {\n        echo \"No reviews found.\";\n    }\n}\n?>\n```\n**index.php**\n```php\n<?php\ninclude 'database.php';\n\nif (isset($_POST['add_review'])) {\n    include 'review.php';\n}\n\nif (isset($_GET['view_reviews'])) {\n    include 'review.php';\n}\n\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n    <label for=\"rating\">Rating:</label>\n    <select id=\"rating\" name=\"rating\">\n        <option value=\"1\">1</option>\n        <option value=\"2\">2</option>\n        <option value=\"3\">3</option>\n        <option value=\"4\">4</option>\n        <option value=\"5\">5</option>\n    </select><br><br>\n    <label for=\"comment\">Comment:</label>\n    <textarea id=\"comment\" name=\"comment\"></textarea><br><br>\n    <input type=\"submit\" name=\"add_review\" value=\"Add Review\">\n</form>\n\n<h2>View Reviews</h2>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"get\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n    <input type=\"submit\" name=\"view_reviews\" value=\"View Reviews\">\n</form>\n```\nThis example includes:\n\n* A database connection script (`database.php`) that establishes a connection to the `reviews` database.\n* A review script (`review.php`) that handles adding and viewing reviews. It uses a simple SQL query to add a new review, and another query to retrieve all reviews for a given product ID.\n* An index page (`index.php`) that provides forms for adding and viewing reviews.\n\nNote: This example assumes you have already created the `reviews` database and table with the following structure:\n\n```sql\nCREATE TABLE reviews (\n    id INT AUTO_INCREMENT,\n    product_id INT,\n    rating TINYINT(1),\n    comment TEXT,\n    PRIMARY KEY (id)\n);\n```\n\nYou'll need to modify this code to suit your specific requirements, such as adding user authentication or modifying the database schema.\n\nThis is a basic example and you should consider implementing security measures like prepared statements or object-relational mapping tools to prevent SQL injection attacks.", "code_blocks": ["```php\n<?php\n$servername = \"localhost\";\n$username = \"root\";\n$password = \"\";\n$dbname = \"reviews\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nif (isset($_POST['add_review'])) {\n    $product_id = $_POST['product_id'];\n    $rating = $_POST['rating'];\n    $comment = $_POST['comment'];\n\n    $sql = \"INSERT INTO reviews (product_id, rating, comment) VALUES ('$product_id', '$rating', '$comment')\";\n    if ($conn->query($sql)) {\n        echo \"Review added successfully!\";\n    } else {\n        echo \"Error adding review: \" . $conn->error;\n    }\n}\n\nif (isset($_GET['view_reviews'])) {\n    $product_id = $_GET['product_id'];\n\n    $sql = \"SELECT * FROM reviews WHERE product_id = '$product_id'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n        echo \"<h2>Reviews for Product $product_id</h2>\";\n        while ($row = $result->fetch_assoc()) {\n            echo \"<p>Rating: \" . $row['rating'] . \", Comment: \" . $row['comment'] . \"</p>\";\n        }\n    } else {\n        echo \"No reviews found.\";\n    }\n}\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nif (isset($_POST['add_review'])) {\n    include 'review.php';\n}\n\nif (isset($_GET['view_reviews'])) {\n    include 'review.php';\n}\n\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n    <label for=\"rating\">Rating:</label>\n    <select id=\"rating\" name=\"rating\">\n        <option value=\"1\">1</option>\n        <option value=\"2\">2</option>\n        <option value=\"3\">3</option>\n        <option value=\"4\">4</option>\n        <option value=\"5\">5</option>\n    </select><br><br>\n    <label for=\"comment\">Comment:</label>\n    <textarea id=\"comment\" name=\"comment\"></textarea><br><br>\n    <input type=\"submit\" name=\"add_review\" value=\"Add Review\">\n</form>\n\n<h2>View Reviews</h2>\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"get\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n    <input type=\"submit\" name=\"view_reviews\" value=\"View Reviews\">\n</form>\n```", null]}
