{"prompt": "Create a user review function using php", "llm_output": "Here is an example of a simple user review system in PHP:\n```php\n// database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// create table for reviews (if it doesn't exist)\n$sql = \"\nCREATE TABLE IF NOT EXISTS reviews (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  product_id INT,\n  user_id INT,\n  rating TINYINT(1),\n  review TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n)\n\";\n\n$conn->query($sql);\n\n// function to add a new review\nfunction add_review($product_id, $user_id, $rating, $review) {\n  global $conn;\n  $sql = \"INSERT INTO reviews (product_id, user_id, rating, review) VALUES (?, ?, ?, ?)\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"iiss\", $product_id, $user_id, $rating, $review);\n  $stmt->execute();\n}\n\n// function to get all reviews for a product\nfunction get_reviews($product_id) {\n  global $conn;\n  $sql = \"SELECT * FROM reviews WHERE product_id = ? ORDER BY created_at DESC\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"i\", $product_id);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\n}\n\n// function to get all reviews for a user\nfunction get_user_reviews($user_id) {\n  global $conn;\n  $sql = \"SELECT * FROM reviews WHERE user_id = ? ORDER BY created_at DESC\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"i\", $user_id);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\n}\n\n// example usage:\n$product_id = 1;\n$user_id = 1;\n$rating = 5;\n$review = \"This product is amazing!\";\n\nadd_review($product_id, $user_id, $rating, $review);\n\n$reviews = get_reviews($product_id);\nprint_r($reviews);\n\n$user_reviews = get_user_reviews($user_id);\nprint_r($user_reviews);\n```\nThis code creates a simple review system with the following functionality:\n\n*   A `reviews` table is created in the database to store reviews.\n*   The `add_review()` function allows users to submit new reviews. It takes four arguments: `product_id`, `user_id`, `rating`, and `review`.\n*   The `get_reviews()` function retrieves all reviews for a specific product.\n*   The `get_user_reviews()` function retrieves all reviews submitted by a user.\n\nYou can modify this code to fit your needs and add additional features as required. For example, you could add validation for user input or implement rating calculations based on the average of submitted ratings.", "code_blocks": ["```php\n// database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// create table for reviews (if it doesn't exist)\n$sql = \"\nCREATE TABLE IF NOT EXISTS reviews (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  product_id INT,\n  user_id INT,\n  rating TINYINT(1),\n  review TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n)\n\";\n\n$conn->query($sql);\n\n// function to add a new review\nfunction add_review($product_id, $user_id, $rating, $review) {\n  global $conn;\n  $sql = \"INSERT INTO reviews (product_id, user_id, rating, review) VALUES (?, ?, ?, ?)\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"iiss\", $product_id, $user_id, $rating, $review);\n  $stmt->execute();\n}\n\n// function to get all reviews for a product\nfunction get_reviews($product_id) {\n  global $conn;\n  $sql = \"SELECT * FROM reviews WHERE product_id = ? ORDER BY created_at DESC\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"i\", $product_id);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\n}\n\n// function to get all reviews for a user\nfunction get_user_reviews($user_id) {\n  global $conn;\n  $sql = \"SELECT * FROM reviews WHERE user_id = ? ORDER BY created_at DESC\";\n  $stmt = $conn->prepare($sql);\n  $stmt->bind_param(\"i\", $user_id);\n  $stmt->execute();\n  return $stmt->get_result()->fetch_all(MYSQLI_ASSOC);\n}\n\n// example usage:\n$product_id = 1;\n$user_id = 1;\n$rating = 5;\n$review = \"This product is amazing!\";\n\nadd_review($product_id, $user_id, $rating, $review);\n\n$reviews = get_reviews($product_id);\nprint_r($reviews);\n\n$user_reviews = get_user_reviews($user_id);\nprint_r($user_reviews);\n```"]}
