{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how to create a simple purchase cart functionality using PHP. This example includes the following features:\n\n*   Cart items are stored in session\n*   Users can add, remove and view items from their cart\n*   Subtotal and total prices are calculated dynamically based on the items in the cart\n\n**cart.php**\n```php\n<?php\n// Initialize session\nsession_start();\n\n// Set default values for cart\n$_SESSION['cart'] = array();\n$_SESSION['subtotal'] = 0;\n$_SESSION['tax_rate'] = 0.08; // example tax rate of 8%\n$_SESSION['shipping_rate'] = 5.00; // example shipping rate\n\n// Function to add item to cart\nfunction add_item_to_cart($item_id, $quantity) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        $_SESSION['cart'][$item_id] += $quantity;\n    } else {\n        $_SESSION['cart'][$item_id] = $quantity;\n    }\n\n    calculate_subtotal();\n}\n\n// Function to remove item from cart\nfunction remove_item_from_cart($item_id) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        unset($_SESSION['cart'][$item_id]);\n\n        calculate_subtotal();\n    }\n}\n\n// Function to update quantity of an item in the cart\nfunction update_quantity_in_cart($item_id, $new_quantity) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        $_SESSION['cart'][$item_id] = $new_quantity;\n\n        calculate_subtotal();\n    }\n}\n\n// Function to calculate subtotal and total prices\nfunction calculate_subtotal() {\n    global $_SESSION, $_products; // assume products are stored in an array\n\n    $_SESSION['subtotal'] = 0;\n    foreach ($_SESSION['cart'] as $item_id => $quantity) {\n        $price = $_products[$item_id]['price'];\n        $discounted_price = $_products[$item_id]['price'] * (1 - $_products[$item_id]['discount']);\n        $_SESSION['subtotal'] += $quantity * $discounted_price;\n    }\n\n    // calculate tax and shipping\n    $_SESSION['tax'] = $_SESSION['subtotal'] * $_SESSION['tax_rate'];\n    $_SESSION['shipping'] = $_SESSION['shipping_rate'];\n\n    // calculate total price\n    $_SESSION['total'] = $_SESSION['subtotal'] + $_SESSION['tax'] + $_SESSION['shipping'];\n}\n\n// Function to display cart contents\nfunction display_cart_contents() {\n    global $_SESSION;\n\n    echo \"<h2>Cart Contents:</h2>\";\n    echo \"<table border='1'>\";\n    echo \"<tr><th>Item ID</th><th>Quantity</th><th>Price</th></tr>\";\n\n    foreach ($_SESSION['cart'] as $item_id => $quantity) {\n        $price = $_products[$item_id]['price'];\n        $discounted_price = $price * (1 - $_products[$item_id]['discount']);\n        echo \"<tr>\";\n        echo \"<td>$item_id</td>\";\n        echo \"<td>$quantity</td>\";\n        echo \"<td>\\$$discounted_price</td>\";\n        echo \"</tr>\";\n    }\n\n    echo \"</table>\";\n\n    calculate_subtotal();\n}\n\n// Example products array\n$_products = array(\n    'product1' => array('price' => 10.99, 'discount' => 0),\n    'product2' => array('price' => 5.99, 'discount' => 0),\n    'product3' => array('price' => 7.99, 'discount' => 0.1) // 10% discount\n);\n\n// Display cart contents initially\ndisplay_cart_contents();\n?>\n```\n**cart_form.php**\n```php\n<?php include 'cart.php'; ?>\n\n<form action=\"cart.php\" method=\"post\">\n    <h2>Add Item to Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    add_item_to_cart($_POST['item_id'], $_POST['quantity']);\n    display_cart_contents();\n}\n?>\n```\n**remove_item.php**\n```php\n<?php include 'cart.php'; ?>\n\n<form action=\"remove_item.php\" method=\"post\">\n    <h2>Remove Item from Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <input type=\"submit\" value=\"Remove from Cart\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    remove_item_from_cart($_POST['item_id']);\n    display_cart_contents();\n}\n?>\n```\n**update_quantity.php**\n```php\n<?php include 'cart.php'; ?>\n\n<form action=\"update_quantity.php\" method=\"post\">\n    <h2>Update Quantity of Item in Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <label for=\"quantity\">New Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    update_quantity_in_cart($_POST['item_id'], $_POST['quantity']);\n    display_cart_contents();\n}\n?>\n```\nThis example includes the following files:\n\n*   `cart.php`: main cart functionality file, including functions for adding, removing and updating items in the cart\n*   `cart_form.php`: a simple form to add an item to the cart\n*   `remove_item.php`: a page to remove an item from the cart\n*   `update_quantity.php`: a page to update the quantity of an item in the cart\n\nNote: This is a basic example, and you may want to enhance it with additional features such as:\n\n*   User authentication and session management\n*   Database integration for storing products and cart contents\n*   Payment gateway integration for checkout functionality", "code_blocks": ["```php\n<?php\n// Initialize session\nsession_start();\n\n// Set default values for cart\n$_SESSION['cart'] = array();\n$_SESSION['subtotal'] = 0;\n$_SESSION['tax_rate'] = 0.08; // example tax rate of 8%\n$_SESSION['shipping_rate'] = 5.00; // example shipping rate\n\n// Function to add item to cart\nfunction add_item_to_cart($item_id, $quantity) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        $_SESSION['cart'][$item_id] += $quantity;\n    } else {\n        $_SESSION['cart'][$item_id] = $quantity;\n    }\n\n    calculate_subtotal();\n}\n\n// Function to remove item from cart\nfunction remove_item_from_cart($item_id) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        unset($_SESSION['cart'][$item_id]);\n\n        calculate_subtotal();\n    }\n}\n\n// Function to update quantity of an item in the cart\nfunction update_quantity_in_cart($item_id, $new_quantity) {\n    global $_SESSION;\n\n    if (isset($_SESSION['cart'][$item_id])) {\n        $_SESSION['cart'][$item_id] = $new_quantity;\n\n        calculate_subtotal();\n    }\n}\n\n// Function to calculate subtotal and total prices\nfunction calculate_subtotal() {\n    global $_SESSION, $_products; // assume products are stored in an array\n\n    $_SESSION['subtotal'] = 0;\n    foreach ($_SESSION['cart'] as $item_id => $quantity) {\n        $price = $_products[$item_id]['price'];\n        $discounted_price = $_products[$item_id]['price'] * (1 - $_products[$item_id]['discount']);\n        $_SESSION['subtotal'] += $quantity * $discounted_price;\n    }\n\n    // calculate tax and shipping\n    $_SESSION['tax'] = $_SESSION['subtotal'] * $_SESSION['tax_rate'];\n    $_SESSION['shipping'] = $_SESSION['shipping_rate'];\n\n    // calculate total price\n    $_SESSION['total'] = $_SESSION['subtotal'] + $_SESSION['tax'] + $_SESSION['shipping'];\n}\n\n// Function to display cart contents\nfunction display_cart_contents() {\n    global $_SESSION;\n\n    echo \"<h2>Cart Contents:</h2>\";\n    echo \"<table border='1'>\";\n    echo \"<tr><th>Item ID</th><th>Quantity</th><th>Price</th></tr>\";\n\n    foreach ($_SESSION['cart'] as $item_id => $quantity) {\n        $price = $_products[$item_id]['price'];\n        $discounted_price = $price * (1 - $_products[$item_id]['discount']);\n        echo \"<tr>\";\n        echo \"<td>$item_id</td>\";\n        echo \"<td>$quantity</td>\";\n        echo \"<td>\\$$discounted_price</td>\";\n        echo \"</tr>\";\n    }\n\n    echo \"</table>\";\n\n    calculate_subtotal();\n}\n\n// Example products array\n$_products = array(\n    'product1' => array('price' => 10.99, 'discount' => 0),\n    'product2' => array('price' => 5.99, 'discount' => 0),\n    'product3' => array('price' => 7.99, 'discount' => 0.1) // 10% discount\n);\n\n// Display cart contents initially\ndisplay_cart_contents();\n?>\n```", "```php\n<?php include 'cart.php'; ?>\n\n<form action=\"cart.php\" method=\"post\">\n    <h2>Add Item to Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    add_item_to_cart($_POST['item_id'], $_POST['quantity']);\n    display_cart_contents();\n}\n?>\n```", "```php\n<?php include 'cart.php'; ?>\n\n<form action=\"remove_item.php\" method=\"post\">\n    <h2>Remove Item from Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <input type=\"submit\" value=\"Remove from Cart\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    remove_item_from_cart($_POST['item_id']);\n    display_cart_contents();\n}\n?>\n```", "```php\n<?php include 'cart.php'; ?>\n\n<form action=\"update_quantity.php\" method=\"post\">\n    <h2>Update Quantity of Item in Cart:</h2>\n    <label for=\"item_id\">Item ID:</label>\n    <input type=\"text\" id=\"item_id\" name=\"item_id\"><br><br>\n    <label for=\"quantity\">New Quantity:</label>\n    <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<?php\nif (isset($_POST['item_id'])) {\n    update_quantity_in_cart($_POST['item_id'], $_POST['quantity']);\n    display_cart_contents();\n}\n?>\n```"]}
