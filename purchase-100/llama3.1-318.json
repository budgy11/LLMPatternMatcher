{"prompt": "Create a purchase functionality using php", "llm_output": "Here's an example of how you can create a basic purchase functionality using PHP. This will include creating a database to store products and purchases, as well as creating a simple form for customers to submit their purchases.\n\n**Database Setup:**\n\nFirst, we'll need to set up our database schema to store products and purchases.\n\n```sql\nCREATE TABLE products (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    name VARCHAR(255),\n    price DECIMAL(10, 2)\n);\n\nCREATE TABLE purchases (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    customer_name VARCHAR(255),\n    product_id INT,\n    FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n\n**Product Model:**\n\nNext, we'll create a simple product model in PHP to encapsulate our database interactions.\n\n```php\nclass Product {\n    private $id;\n    private $name;\n    private $price;\n\n    public function __construct($id = null, $name = null, $price = null) {\n        $this->id = $id;\n        $this->name = $name;\n        $this->price = $price;\n    }\n\n    public static function getAll() {\n        global $db;\n        $query = \"SELECT * FROM products\";\n        return mysqli_query($db, $query);\n    }\n\n    public static function getOne($id) {\n        global $db;\n        $query = \"SELECT * FROM products WHERE id = '$id'\";\n        return mysqli_fetch_assoc(mysqli_query($db, $query));\n    }\n}\n```\n\n**Purchase Model:**\n\nNext, we'll create a simple purchase model to encapsulate our database interactions.\n\n```php\nclass Purchase {\n    private $id;\n    private $customer_name;\n    private $product_id;\n\n    public function __construct($id = null, $customer_name = null, $product_id = null) {\n        $this->id = $id;\n        $this->customer_name = $customer_name;\n        $this->product_id = $product_id;\n    }\n\n    public static function addPurchase($product_id, $customer_name) {\n        global $db;\n        $query = \"INSERT INTO purchases (customer_name, product_id) VALUES ('$customer_name', '$product_id')\";\n        return mysqli_query($db, $query);\n    }\n\n    public static function getAllPurchases() {\n        global $db;\n        $query = \"SELECT * FROM purchases\";\n        return mysqli_query($db, $query);\n    }\n}\n```\n\n**Purchase Form:**\n\nNext, we'll create a simple form for customers to submit their purchases.\n\n```php\n<?php\n\nrequire_once 'includes/db.php';\nrequire_once 'models/Product.php';\n\n?>\n\n<form action=\"\" method=\"post\">\n    <select name=\"product_id\">\n        <?php foreach (Product::getAll() as $product) { ?>\n            <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n        <?php } ?>\n    </select>\n\n    <input type=\"text\" name=\"customer_name\">\n\n    <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n```\n\n**Processing Purchase Form:**\n\nFinally, we'll create a simple script to process the purchase form.\n\n```php\n<?php\n\nrequire_once 'includes/db.php';\nrequire_once 'models/Purchase.php';\n\nif (isset($_POST['submit'])) {\n    $product_id = $_POST['product_id'];\n    $customer_name = $_POST['customer_name'];\n\n    Purchase::addPurchase($product_id, $customer_name);\n\n    echo \"Purchase added successfully!\";\n}\n\n?>\n```\n\nThis is a very basic example and doesn't include any error handling or security measures. You should always validate user input and use prepared statements to prevent SQL injection.\n\nRemember to replace `includes/db.php` with the actual path to your database connection file, and update the database schema as needed. This is just an example to give you an idea of how a purchase functionality could be implemented using PHP.", "code_blocks": [null, "```php\nclass Product {\n    private $id;\n    private $name;\n    private $price;\n\n    public function __construct($id = null, $name = null, $price = null) {\n        $this->id = $id;\n        $this->name = $name;\n        $this->price = $price;\n    }\n\n    public static function getAll() {\n        global $db;\n        $query = \"SELECT * FROM products\";\n        return mysqli_query($db, $query);\n    }\n\n    public static function getOne($id) {\n        global $db;\n        $query = \"SELECT * FROM products WHERE id = '$id'\";\n        return mysqli_fetch_assoc(mysqli_query($db, $query));\n    }\n}\n```", "```php\nclass Purchase {\n    private $id;\n    private $customer_name;\n    private $product_id;\n\n    public function __construct($id = null, $customer_name = null, $product_id = null) {\n        $this->id = $id;\n        $this->customer_name = $customer_name;\n        $this->product_id = $product_id;\n    }\n\n    public static function addPurchase($product_id, $customer_name) {\n        global $db;\n        $query = \"INSERT INTO purchases (customer_name, product_id) VALUES ('$customer_name', '$product_id')\";\n        return mysqli_query($db, $query);\n    }\n\n    public static function getAllPurchases() {\n        global $db;\n        $query = \"SELECT * FROM purchases\";\n        return mysqli_query($db, $query);\n    }\n}\n```", "```php\n<?php\n\nrequire_once 'includes/db.php';\nrequire_once 'models/Product.php';\n\n?>\n\n<form action=\"\" method=\"post\">\n    <select name=\"product_id\">\n        <?php foreach (Product::getAll() as $product) { ?>\n            <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n        <?php } ?>\n    </select>\n\n    <input type=\"text\" name=\"customer_name\">\n\n    <button type=\"submit\" name=\"submit\">Submit</button>\n</form>\n```", "```php\n<?php\n\nrequire_once 'includes/db.php';\nrequire_once 'models/Purchase.php';\n\nif (isset($_POST['submit'])) {\n    $product_id = $_POST['product_id'];\n    $customer_name = $_POST['customer_name'];\n\n    Purchase::addPurchase($product_id, $customer_name);\n\n    echo \"Purchase added successfully!\";\n}\n\n?>\n```"]}
