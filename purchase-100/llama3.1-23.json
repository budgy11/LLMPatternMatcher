{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how you can create a simple purchase cart functionality using PHP:\n\n**cart.php**\n```php\n<?php\nsession_start();\n\n// Initialize cart array in session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        $_SESSION['cart'][$product_id] += $quantity;\n    } else {\n        $_SESSION['cart'][$product_id] = $quantity;\n    }\n}\n\n// Function to remove item from cart\nfunction remove_from_cart($product_id) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        unset($_SESSION['cart'][$product_id]);\n    }\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        $_SESSION['cart'][$product_id] = $new_quantity;\n    }\n}\n\n// Function to display cart contents\nfunction display_cart() {\n    global $_SESSION;\n    echo \"<table>\";\n    foreach ($_SESSION['cart'] as $product_id => $quantity) {\n        // Assume we have a function to get product details from database\n        $product_details = get_product_details($product_id);\n        echo \"<tr><td>$product_details[name]</td><td>$quantity x $product_details[price] = $\" . ($quantity * $product_details['price']) . \"</td></tr>\";\n    }\n    echo \"</table>\";\n}\n\n// Function to calculate total cost of cart\nfunction calculate_total() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as $product_id => $quantity) {\n        // Assume we have a function to get product details from database\n        $product_details = get_product_details($product_id);\n        $total += ($quantity * $product_details['price']);\n    }\n    return $total;\n}\n```\n\n**index.php**\n```php\n<?php\ninclude 'cart.php';\n\n// Assume we have a function to display products\nfunction display_products() {\n    echo \"<ul>\";\n    // Connect to database and retrieve product list\n    // Display each product with its price and add_to_cart button\n    echo \"</ul>\";\n}\n\n// Handle form submission to add or remove item from cart\nif (isset($_POST['action'])) {\n    if ($_POST['action'] == 'add') {\n        $product_id = $_POST['product_id'];\n        $quantity = $_POST['quantity'];\n        add_to_cart($product_id, $quantity);\n    } elseif ($_POST['action'] == 'remove') {\n        $product_id = $_POST['product_id'];\n        remove_from_cart($product_id);\n    }\n}\n\n// Display cart contents and total cost\ndisplay_cart();\necho \"Total: $\" . calculate_total();\n\n?>\n```\n\nThis code provides basic functionality to add, remove, and display items in the cart. It assumes that you have a function `get_product_details` to retrieve product details from the database.\n\nNote:\n\n* This is a simplified example and does not include any validation or error handling.\n* You should replace the `display_products` function with your own code to connect to the database and display the products.\n* This code uses session variables to store the cart contents, which means that the cart will be lost if the user closes their browser. You may want to consider using a more robust storage mechanism like a database or a file.\n\nPlease let me know if you need any further modifications or explanations!", "code_blocks": ["```php\n<?php\nsession_start();\n\n// Initialize cart array in session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        $_SESSION['cart'][$product_id] += $quantity;\n    } else {\n        $_SESSION['cart'][$product_id] = $quantity;\n    }\n}\n\n// Function to remove item from cart\nfunction remove_from_cart($product_id) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        unset($_SESSION['cart'][$product_id]);\n    }\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $_SESSION;\n    if (array_key_exists($product_id, $_SESSION['cart'])) {\n        $_SESSION['cart'][$product_id] = $new_quantity;\n    }\n}\n\n// Function to display cart contents\nfunction display_cart() {\n    global $_SESSION;\n    echo \"<table>\";\n    foreach ($_SESSION['cart'] as $product_id => $quantity) {\n        // Assume we have a function to get product details from database\n        $product_details = get_product_details($product_id);\n        echo \"<tr><td>$product_details[name]</td><td>$quantity x $product_details[price] = $\" . ($quantity * $product_details['price']) . \"</td></tr>\";\n    }\n    echo \"</table>\";\n}\n\n// Function to calculate total cost of cart\nfunction calculate_total() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as $product_id => $quantity) {\n        // Assume we have a function to get product details from database\n        $product_details = get_product_details($product_id);\n        $total += ($quantity * $product_details['price']);\n    }\n    return $total;\n}\n```", "```php\n<?php\ninclude 'cart.php';\n\n// Assume we have a function to display products\nfunction display_products() {\n    echo \"<ul>\";\n    // Connect to database and retrieve product list\n    // Display each product with its price and add_to_cart button\n    echo \"</ul>\";\n}\n\n// Handle form submission to add or remove item from cart\nif (isset($_POST['action'])) {\n    if ($_POST['action'] == 'add') {\n        $product_id = $_POST['product_id'];\n        $quantity = $_POST['quantity'];\n        add_to_cart($product_id, $quantity);\n    } elseif ($_POST['action'] == 'remove') {\n        $product_id = $_POST['product_id'];\n        remove_from_cart($product_id);\n    }\n}\n\n// Display cart contents and total cost\ndisplay_cart();\necho \"Total: $\" . calculate_total();\n\n?>\n```"]}
