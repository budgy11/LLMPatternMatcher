{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here's an example of how you can create a simple purchase cart functionality using PHP. This will include adding products to the cart, viewing the contents of the cart, updating product quantities in the cart, and removing products from the cart.\n\n**cart.php**\n\nThis is the main file that handles all the operations related to the shopping cart.\n\n```php\n<?php\n\n// Session variables to store cart data\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\nfunction add_to_cart($product_id, $quantity) {\n    // Check if product exists in cart already\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            // If the product is already in cart, increase its quantity by the new amount\n            $item['quantity'] += $quantity;\n            return true;  // Return to avoid adding same product again\n        }\n    }\n\n    // Add product to cart if not present\n    $_SESSION['cart'][] = array('id' => $product_id, 'quantity' => $quantity);\n}\n\nfunction view_cart() {\n    echo '<pre>';\n    print_r($_SESSION['cart']);\n    echo '</pre>';\n}\n\nfunction update_quantity($product_id, $new_quantity) {\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] = $new_quantity;\n            return true;  // Update successful\n        }\n    }\n\n    echo \"Product not found in cart.\";\n}\n\nfunction remove_product($product_id) {\n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return true;  // Product removed successfully\n        }\n    }\n\n    echo \"Product not found in cart.\";\n}\n\n// Example usage:\n\n// Adding a product to the cart\nadd_to_cart(1, 2); // Add product with id 1 in quantity of 2\n\n// Viewing the contents of the cart\nview_cart();\n\n// Updating the quantity of a product in the cart\nupdate_quantity(1, 5);\n\n// Removing a product from the cart\nremove_product(1);\n```\n\n**index.php**\n\nThis is an example file that demonstrates how to use the functions from `cart.php`. This could be your main entry point for the e-commerce application.\n\n```php\n<?php\n\nrequire_once 'cart.php';\n\n?>\n\n<h2>Shopping Cart</h2>\n\n<form action=\"add_to_cart.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" name=\"quantity\" id=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<form action=\"update_quantity.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <label for=\"new_quantity\">New Quantity:</label>\n    <input type=\"number\" name=\"new_quantity\" id=\"new_quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<form action=\"remove_product.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <input type=\"submit\" value=\"Remove Product\">\n</form>\n\n<?php\n// Display cart contents\nview_cart();\n?>\n```\n\n**add_to_cart.php, update_quantity.php, remove_product.php**\n\nThese files are where the form data is processed. They use `cart.php` functions to manipulate the cart data.\n\n```php\n<?php\n\nrequire_once 'cart.php';\n\nif (isset($_POST['product_id']) && isset($_POST['quantity'])) {\n    add_to_cart($_POST['product_id'], $_POST['quantity']);\n}\n\n// For other operations like update_quantity and remove_product, follow similar logic.\n```\n\nThis is a basic example. Real-world applications would require more complex logic for handling sessions, form validation, error handling, and security considerations.", "code_blocks": ["```php\n<?php\n\n// Session variables to store cart data\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\nfunction add_to_cart($product_id, $quantity) {\n    // Check if product exists in cart already\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            // If the product is already in cart, increase its quantity by the new amount\n            $item['quantity'] += $quantity;\n            return true;  // Return to avoid adding same product again\n        }\n    }\n\n    // Add product to cart if not present\n    $_SESSION['cart'][] = array('id' => $product_id, 'quantity' => $quantity);\n}\n\nfunction view_cart() {\n    echo '<pre>';\n    print_r($_SESSION['cart']);\n    echo '</pre>';\n}\n\nfunction update_quantity($product_id, $new_quantity) {\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] = $new_quantity;\n            return true;  // Update successful\n        }\n    }\n\n    echo \"Product not found in cart.\";\n}\n\nfunction remove_product($product_id) {\n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return true;  // Product removed successfully\n        }\n    }\n\n    echo \"Product not found in cart.\";\n}\n\n// Example usage:\n\n// Adding a product to the cart\nadd_to_cart(1, 2); // Add product with id 1 in quantity of 2\n\n// Viewing the contents of the cart\nview_cart();\n\n// Updating the quantity of a product in the cart\nupdate_quantity(1, 5);\n\n// Removing a product from the cart\nremove_product(1);\n```", "```php\n<?php\n\nrequire_once 'cart.php';\n\n?>\n\n<h2>Shopping Cart</h2>\n\n<form action=\"add_to_cart.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <label for=\"quantity\">Quantity:</label>\n    <input type=\"number\" name=\"quantity\" id=\"quantity\"><br><br>\n    <input type=\"submit\" value=\"Add to Cart\">\n</form>\n\n<form action=\"update_quantity.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <label for=\"new_quantity\">New Quantity:</label>\n    <input type=\"number\" name=\"new_quantity\" id=\"new_quantity\"><br><br>\n    <input type=\"submit\" value=\"Update Quantity\">\n</form>\n\n<form action=\"remove_product.php\" method=\"post\">\n    <label for=\"product_id\">Product ID:</label>\n    <input type=\"number\" name=\"product_id\" id=\"product_id\"><br><br>\n    <input type=\"submit\" value=\"Remove Product\">\n</form>\n\n<?php\n// Display cart contents\nview_cart();\n?>\n```", "```php\n<?php\n\nrequire_once 'cart.php';\n\nif (isset($_POST['product_id']) && isset($_POST['quantity'])) {\n    add_to_cart($_POST['product_id'], $_POST['quantity']);\n}\n\n// For other operations like update_quantity and remove_product, follow similar logic.\n```"]}
