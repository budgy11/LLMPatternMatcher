{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality using PHP, HTML, and CSS:\n\n**database.php**\n```php\n<?php\n  $servername = \"localhost\";\n  $username = \"root\";\n  $password = \"\";\n  $dbname = \"store\";\n\n  // Create connection\n  $conn = new mysqli($servername, $username, $password, $dbname);\n\n  // Check connection\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  function getProducts() {\n    global $conn;\n    $sql = \"SELECT * FROM products\";\n    return $conn->query($sql)->fetch_all(MYSQLI_ASSOC);\n  }\n\n  function getProduct($id) {\n    global $conn;\n    $sql = \"SELECT * FROM products WHERE id = '$id'\";\n    return $conn->query($sql)->fetch_assoc();\n  }\n\n  function addOrder($product_id, $quantity) {\n    global $conn;\n    $sql = \"INSERT INTO orders (product_id, quantity) VALUES ('$product_id', '$quantity')\";\n    return $conn->query($sql);\n  }\n?>\n```\n**index.php**\n```php\n<?php\n  include 'database.php';\n\n  if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Handle form submission\n    $product_id = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n\n    if (addOrder($product_id, $quantity)) {\n      echo \"Order placed successfully!\";\n    } else {\n      echo \"Error placing order.\";\n    }\n  }\n\n  // Get products from database\n  $products = getProducts();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Store</title>\n  <style>\n    body { font-family: Arial, sans-serif; }\n    #product-list { list-style: none; padding: 0; margin: 0; }\n    #product-list li { display: block; background-color: #f7f7f7; padding: 10px; border-bottom: 1px solid #ccc; }\n    #product-list li:hover { background-color: #ddd; }\n  </style>\n</head>\n<body>\n\n<h1>Store</h1>\n\n<ul id=\"product-list\">\n  <?php foreach ($products as $product) : ?>\n    <li>\n      <img src=\"<?php echo $product['image']; ?>\" alt=\"<?php echo $product['name']; ?>\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <form action=\"\" method=\"post\">\n        <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n        <input type=\"number\" name=\"quantity\" value=\"1\">\n        <button type=\"submit\">Add to Cart</button>\n      </form>\n    </li>\n  <?php endforeach; ?>\n</ul>\n\n<?php if (isset($_GET['order_id'])) : ?>\n  <h2>Order Summary:</h2>\n  <p>Product ID: <?php echo $_GET['order_id']; ?></p>\n  <p>Quantity: <?php echo $_POST['quantity']; ?></p>\n<?php endif; ?>\n\n</body>\n</html>\n```\n**Explanation**\n\nThis is a basic example of a purchase functionality using PHP. The code includes:\n\n1. A database connection file (`database.php`) that establishes a connection to the database and defines functions for retrieving products, adding orders, and other operations.\n2. An `index.php` file that displays a list of products and allows users to add them to their cart by submitting a form with the product ID and quantity.\n3. When the user submits the form, the code checks if the order was successfully added to the database using the `addOrder()` function.\n\nNote: This is a basic example and you should consider implementing additional features such as:\n\n* User authentication and authorization\n* Error handling for failed database operations\n* Security measures to prevent SQL injection attacks\n* Additional validation and sanitization of user input data\n\nYou can modify this code to suit your specific requirements and implement additional features as needed.", "code_blocks": ["```php\n<?php\n  $servername = \"localhost\";\n  $username = \"root\";\n  $password = \"\";\n  $dbname = \"store\";\n\n  // Create connection\n  $conn = new mysqli($servername, $username, $password, $dbname);\n\n  // Check connection\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  function getProducts() {\n    global $conn;\n    $sql = \"SELECT * FROM products\";\n    return $conn->query($sql)->fetch_all(MYSQLI_ASSOC);\n  }\n\n  function getProduct($id) {\n    global $conn;\n    $sql = \"SELECT * FROM products WHERE id = '$id'\";\n    return $conn->query($sql)->fetch_assoc();\n  }\n\n  function addOrder($product_id, $quantity) {\n    global $conn;\n    $sql = \"INSERT INTO orders (product_id, quantity) VALUES ('$product_id', '$quantity')\";\n    return $conn->query($sql);\n  }\n?>\n```", "```php\n<?php\n  include 'database.php';\n\n  if ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Handle form submission\n    $product_id = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n\n    if (addOrder($product_id, $quantity)) {\n      echo \"Order placed successfully!\";\n    } else {\n      echo \"Error placing order.\";\n    }\n  }\n\n  // Get products from database\n  $products = getProducts();\n\n?>\n\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Store</title>\n  <style>\n    body { font-family: Arial, sans-serif; }\n    #product-list { list-style: none; padding: 0; margin: 0; }\n    #product-list li { display: block; background-color: #f7f7f7; padding: 10px; border-bottom: 1px solid #ccc; }\n    #product-list li:hover { background-color: #ddd; }\n  </style>\n</head>\n<body>\n\n<h1>Store</h1>\n\n<ul id=\"product-list\">\n  <?php foreach ($products as $product) : ?>\n    <li>\n      <img src=\"<?php echo $product['image']; ?>\" alt=\"<?php echo $product['name']; ?>\">\n      <h2><?php echo $product['name']; ?></h2>\n      <p>Price: <?php echo $product['price']; ?></p>\n      <form action=\"\" method=\"post\">\n        <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n        <input type=\"number\" name=\"quantity\" value=\"1\">\n        <button type=\"submit\">Add to Cart</button>\n      </form>\n    </li>\n  <?php endforeach; ?>\n</ul>\n\n<?php if (isset($_GET['order_id'])) : ?>\n  <h2>Order Summary:</h2>\n  <p>Product ID: <?php echo $_GET['order_id']; ?></p>\n  <p>Quantity: <?php echo $_POST['quantity']; ?></p>\n<?php endif; ?>\n\n</body>\n</html>\n```"]}
