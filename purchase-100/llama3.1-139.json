{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality in PHP, including HTML and CSS for UI. This will allow users to add items to their cart and checkout.\n\n**Directory Structure**\n\n```bash\npurchase-system/\nindex.php\ncart.php\nproduct-list.php\ndatabase.php\nconfig.php\n```\n\n**Database Configuration (`config.php`)**\n\n```php\n<?php\n// Database configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n$conn = new mysqli($db_host, $db_password);\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n\n**Database Query Function (`database.php`)**\n\n```php\n<?php\n// Database query function\nfunction db_query($query, $params = null) {\n    global $conn;\n    if ($params === null) {\n        return $conn->query($query);\n    } else {\n        return $conn->prepare($query);\n    }\n}\n?>\n```\n\n**Product List (`product-list.php`)**\n\n```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Get products from database\n$query = \"SELECT * FROM products\";\n$result = db_query($query);\n$products = $result->fetch_all(MYSQLI_ASSOC);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Product List</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <h1>Product List</h1>\n    <ul>\n        <?php foreach ($products as $product): ?>\n            <li>\n                <?= $product['name'] ?> (<?= $product['price'] ?>)\n                <button onclick=\"addToCart(<?= $product['id'] ?>)\">Add to Cart</button>\n            </li>\n        <?php endforeach; ?>\n    </ul>\n\n    <!-- JavaScript function for adding product to cart -->\n    <script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"></script>\n    <script>\n        function addToCart(productId) {\n            $.ajax({\n                type: 'POST',\n                url: 'cart.php',\n                data: {id: productId},\n                success: function() {\n                    alert('Product added to cart!');\n                }\n            });\n        }\n    </script>\n\n</body>\n</html>\n```\n\n**Cart (`cart.php`)**\n\n```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Check if user is logged in (for simplicity, we will use session)\nif (!isset($_SESSION['user_id'])) {\n    header('Location: login.php');\n    exit;\n}\n\n// Get cart items from database\n$query = \"SELECT * FROM cart WHERE user_id = ?\";\n$stmt = db_query($query, $_SESSION['user_id']);\n$cartItems = $stmt->fetch_all(MYSQLI_ASSOC);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Cart</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <h1>Cart</h1>\n    <ul>\n        <?php foreach ($cartItems as $item): ?>\n            <li>\n                <?= $item['name'] ?> (<?= $item['price'] ?>)\n                <button onclick=\"removeFromCart(<?= $item['id'] ?>)\">Remove from Cart</button>\n            </li>\n        <?php endforeach; ?>\n    </ul>\n\n    <!-- Total price -->\n    <p>Total: <?= count($cartItems) * 10 ?></p>\n\n    <!-- Checkout button -->\n    <button onclick=\"checkout()\">Checkout</button>\n\n    <!-- JavaScript function for removing product from cart -->\n    <script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"></script>\n    <script>\n        function removeFromCart(cartItemId) {\n            $.ajax({\n                type: 'POST',\n                url: 'cart.php',\n                data: {id: cartItemId},\n                success: function() {\n                    alert('Product removed from cart!');\n                }\n            });\n        }\n\n        // JavaScript function for checkout\n        function checkout() {\n            $.ajax({\n                type: 'POST',\n                url: 'checkout.php',\n                data: {},\n                success: function() {\n                    alert('Thank you for your purchase!');\n                }\n            });\n        }\n    </script>\n\n</body>\n</html>\n```\n\n**Checkout (`checkout.php`)**\n\n```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Update cart status to \"paid\"\n$query = \"UPDATE cart SET status = ? WHERE user_id = ?\";\n$stmt = db_query($query, $_SESSION['user_id'], 'paid');\nif ($stmt->execute()) {\n    echo \"Thank you for your purchase!\";\n} else {\n    echo \"Error processing payment.\";\n}\n?>\n```\n\n**CSS (`style.css`)**\n\n```css\nbody {\n    font-family: Arial, sans-serif;\n}\n\nul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\nli {\n    background-color: #f0f0f0;\n    padding: 10px;\n    border-bottom: 1px solid #ccc;\n}\n\nbutton {\n    background-color: #4CAF50;\n    color: #fff;\n    padding: 10px 20px;\n    border: none;\n    cursor: pointer;\n}\n```\n\nThis is a basic example and may require modifications to suit your specific needs. Note that this code does not handle errors, security vulnerabilities, or edge cases.\n\nAlso note that in this example we're using `mysqli` extension for database interaction which has been deprecated since PHP 7.2, consider migrating to `PDO` instead.\n\nMake sure to replace `'your_username'`, `'your_password'` and `'your_database'` with your actual MySQL credentials and database name.", "code_blocks": [null, "```php\n<?php\n// Database configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n$conn = new mysqli($db_host, $db_password);\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```", "```php\n<?php\n// Database query function\nfunction db_query($query, $params = null) {\n    global $conn;\n    if ($params === null) {\n        return $conn->query($query);\n    } else {\n        return $conn->prepare($query);\n    }\n}\n?>\n```", "```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Get products from database\n$query = \"SELECT * FROM products\";\n$result = db_query($query);\n$products = $result->fetch_all(MYSQLI_ASSOC);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Product List</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <h1>Product List</h1>\n    <ul>\n        <?php foreach ($products as $product): ?>\n            <li>\n                <?= $product['name'] ?> (<?= $product['price'] ?>)\n                <button onclick=\"addToCart(<?= $product['id'] ?>)\">Add to Cart</button>\n            </li>\n        <?php endforeach; ?>\n    </ul>\n\n    <!-- JavaScript function for adding product to cart -->\n    <script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"></script>\n    <script>\n        function addToCart(productId) {\n            $.ajax({\n                type: 'POST',\n                url: 'cart.php',\n                data: {id: productId},\n                success: function() {\n                    alert('Product added to cart!');\n                }\n            });\n        }\n    </script>\n\n</body>\n</html>\n```", "```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Check if user is logged in (for simplicity, we will use session)\nif (!isset($_SESSION['user_id'])) {\n    header('Location: login.php');\n    exit;\n}\n\n// Get cart items from database\n$query = \"SELECT * FROM cart WHERE user_id = ?\";\n$stmt = db_query($query, $_SESSION['user_id']);\n$cartItems = $stmt->fetch_all(MYSQLI_ASSOC);\n\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Cart</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <h1>Cart</h1>\n    <ul>\n        <?php foreach ($cartItems as $item): ?>\n            <li>\n                <?= $item['name'] ?> (<?= $item['price'] ?>)\n                <button onclick=\"removeFromCart(<?= $item['id'] ?>)\">Remove from Cart</button>\n            </li>\n        <?php endforeach; ?>\n    </ul>\n\n    <!-- Total price -->\n    <p>Total: <?= count($cartItems) * 10 ?></p>\n\n    <!-- Checkout button -->\n    <button onclick=\"checkout()\">Checkout</button>\n\n    <!-- JavaScript function for removing product from cart -->\n    <script src=\"https://code.jquery.com/jquery-3.5.1.min.js\"></script>\n    <script>\n        function removeFromCart(cartItemId) {\n            $.ajax({\n                type: 'POST',\n                url: 'cart.php',\n                data: {id: cartItemId},\n                success: function() {\n                    alert('Product removed from cart!');\n                }\n            });\n        }\n\n        // JavaScript function for checkout\n        function checkout() {\n            $.ajax({\n                type: 'POST',\n                url: 'checkout.php',\n                data: {},\n                success: function() {\n                    alert('Thank you for your purchase!');\n                }\n            });\n        }\n    </script>\n\n</body>\n</html>\n```", "```php\n<?php\n// Include config and database files\nrequire 'config.php';\nrequire 'database.php';\n\n// Update cart status to \"paid\"\n$query = \"UPDATE cart SET status = ? WHERE user_id = ?\";\n$stmt = db_query($query, $_SESSION['user_id'], 'paid');\nif ($stmt->execute()) {\n    echo \"Thank you for your purchase!\";\n} else {\n    echo \"Error processing payment.\";\n}\n?>\n```", null]}
