{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how you can create a simple purchase cart functionality using PHP:\n\n**cart.php**\n```php\n<?php\n// Initialize session\nsession_start();\n\n// Check if cart is empty, if so set it to an empty array\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $_SESSION;\n    // Check if product is already in cart, if so increment quantity\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] += $quantity;\n            return true;\n        }\n    }\n    // If not, add new item to cart\n    $_SESSION['cart'][] = array('id' => $product_id, 'quantity' => $quantity);\n    return true;\n}\n\n// Function to remove item from cart\nfunction remove_from_cart($product_id) {\n    global $_SESSION;\n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return true;\n        }\n    }\n    return false;\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $_SESSION;\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] = $new_quantity;\n            return true;\n        }\n    }\n    return false;\n}\n\n// Function to get total cost of items in cart\nfunction get_total_cost() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as &$item) {\n        // Assuming products table has a column called 'price'\n        $query = \"SELECT price FROM products WHERE id = '$item[id]'\";\n        $result = mysqli_query($conn, $query);\n        $row = mysqli_fetch_assoc($result);\n        $total += $row['price'] * $item['quantity'];\n    }\n    return $total;\n}\n\n// Example usage:\nif (isset($_POST['add_to_cart'])) {\n    add_to_cart($_POST['product_id'], $_POST['quantity']);\n} elseif (isset($_POST['remove_from_cart'])) {\n    remove_from_cart($_POST['product_id']);\n} elseif (isset($_POST['update_quantity'])) {\n    update_quantity($_POST['product_id'], $_POST['new_quantity']);\n}\n\n?>\n```\n**index.php**\n```php\n<?php include 'cart.php'; ?>\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Purchase Cart</title>\n</head>\n<body>\n    <!-- Display cart contents -->\n    <?php if (!empty($_SESSION['cart'])) : ?>\n        <h1>Cart Contents:</h1>\n        <ul>\n            <?php foreach ($_SESSION['cart'] as $item) : ?>\n                <li><?= $item['id'] ?> x <?= $item['quantity'] ?></li>\n            <?php endforeach; ?>\n        </ul>\n    <?php else : ?>\n        <p>Your cart is empty.</p>\n    <?php endif; ?>\n\n    <!-- Form to add items to cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <label for=\"quantity\">Quantity:</label>\n        <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n        <input type=\"submit\" name=\"add_to_cart\" value=\"Add to Cart\">\n    </form>\n\n    <!-- Form to remove items from cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <input type=\"submit\" name=\"remove_from_cart\" value=\"Remove from Cart\">\n    </form>\n\n    <!-- Form to update quantity of items in cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <label for=\"new_quantity\">New Quantity:</label>\n        <input type=\"number\" id=\"new_quantity\" name=\"new_quantity\"><br><br>\n        <input type=\"submit\" name=\"update_quantity\" value=\"Update Quantity\">\n    </form>\n\n    <!-- Display total cost -->\n    <?php echo 'Total Cost: $' . get_total_cost(); ?>\n</body>\n</html>\n```\nThis code uses sessions to store the cart contents. The `cart.php` file contains functions for adding, removing and updating items in the cart, as well as calculating the total cost of items in the cart.\n\nThe `index.php` file includes the `cart.php` file and displays a form to add items to the cart, a form to remove items from the cart, and a form to update the quantity of items in the cart. It also displays the total cost of items in the cart.\n\nNote that this is just a simple example and you may want to add more functionality such as:\n\n* Handling errors\n* Validating user input\n* Displaying product information (e.g. name, description, price)\n* Allowing users to view their order history\n* Sending confirmation emails when an order is placed", "code_blocks": ["```php\n<?php\n// Initialize session\nsession_start();\n\n// Check if cart is empty, if so set it to an empty array\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $_SESSION;\n    // Check if product is already in cart, if so increment quantity\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] += $quantity;\n            return true;\n        }\n    }\n    // If not, add new item to cart\n    $_SESSION['cart'][] = array('id' => $product_id, 'quantity' => $quantity);\n    return true;\n}\n\n// Function to remove item from cart\nfunction remove_from_cart($product_id) {\n    global $_SESSION;\n    foreach ($_SESSION['cart'] as $key => &$item) {\n        if ($item['id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return true;\n        }\n    }\n    return false;\n}\n\n// Function to update quantity of item in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $_SESSION;\n    foreach ($_SESSION['cart'] as &$item) {\n        if ($item['id'] == $product_id) {\n            $item['quantity'] = $new_quantity;\n            return true;\n        }\n    }\n    return false;\n}\n\n// Function to get total cost of items in cart\nfunction get_total_cost() {\n    global $_SESSION;\n    $total = 0;\n    foreach ($_SESSION['cart'] as &$item) {\n        // Assuming products table has a column called 'price'\n        $query = \"SELECT price FROM products WHERE id = '$item[id]'\";\n        $result = mysqli_query($conn, $query);\n        $row = mysqli_fetch_assoc($result);\n        $total += $row['price'] * $item['quantity'];\n    }\n    return $total;\n}\n\n// Example usage:\nif (isset($_POST['add_to_cart'])) {\n    add_to_cart($_POST['product_id'], $_POST['quantity']);\n} elseif (isset($_POST['remove_from_cart'])) {\n    remove_from_cart($_POST['product_id']);\n} elseif (isset($_POST['update_quantity'])) {\n    update_quantity($_POST['product_id'], $_POST['new_quantity']);\n}\n\n?>\n```", "```php\n<?php include 'cart.php'; ?>\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Purchase Cart</title>\n</head>\n<body>\n    <!-- Display cart contents -->\n    <?php if (!empty($_SESSION['cart'])) : ?>\n        <h1>Cart Contents:</h1>\n        <ul>\n            <?php foreach ($_SESSION['cart'] as $item) : ?>\n                <li><?= $item['id'] ?> x <?= $item['quantity'] ?></li>\n            <?php endforeach; ?>\n        </ul>\n    <?php else : ?>\n        <p>Your cart is empty.</p>\n    <?php endif; ?>\n\n    <!-- Form to add items to cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <label for=\"quantity\">Quantity:</label>\n        <input type=\"number\" id=\"quantity\" name=\"quantity\"><br><br>\n        <input type=\"submit\" name=\"add_to_cart\" value=\"Add to Cart\">\n    </form>\n\n    <!-- Form to remove items from cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <input type=\"submit\" name=\"remove_from_cart\" value=\"Remove from Cart\">\n    </form>\n\n    <!-- Form to update quantity of items in cart -->\n    <form action=\"\" method=\"post\">\n        <label for=\"product_id\">Product ID:</label>\n        <input type=\"text\" id=\"product_id\" name=\"product_id\"><br><br>\n        <label for=\"new_quantity\">New Quantity:</label>\n        <input type=\"number\" id=\"new_quantity\" name=\"new_quantity\"><br><br>\n        <input type=\"submit\" name=\"update_quantity\" value=\"Update Quantity\">\n    </form>\n\n    <!-- Display total cost -->\n    <?php echo 'Total Cost: $' . get_total_cost(); ?>\n</body>\n</html>\n```"]}
