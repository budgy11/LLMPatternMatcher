{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of a simple purchase cart functionality using PHP. This example uses a session to store the cart contents and calculate the total cost.\n\n**cart.php**\n```php\n<?php\n// Check if the user is logged in (optional)\nif (!isset($_SESSION['user_id'])) {\n    header('Location: login.php');\n    exit;\n}\n\n// Get the products from the database (replace with your own database connection code)\n$products = array(\n    array('id' => 1, 'name' => 'Product 1', 'price' => 9.99),\n    array('id' => 2, 'name' => 'Product 2', 'price' => 19.99),\n    array('id' => 3, 'name' => 'Product 3', 'price' => 29.99)\n);\n\n// Get the cart contents from the session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Display the cart contents\necho '<h2>Your Cart</h2>';\necho '<table>';\necho '<tr><th>Product Name</th><th>Price</th><th>Quantity</th></tr>';\n\nforeach ($_SESSION['cart'] as $product_id => $quantity) {\n    foreach ($products as $product) {\n        if ($product['id'] == $product_id) {\n            echo '<tr>';\n            echo '<td>' . $product['name'] . '</td>';\n            echo '<td>$' . number_format($product['price'], 2) . '</td>';\n            echo '<td>' . $quantity . '</td>';\n            echo '</tr>';\n        }\n    }\n}\n\necho '</table>';\n\n// Display the total cost\necho '<p>Total: $';\necho number_format(calculate_total($_SESSION['cart']), 2);\necho '</p>';\n\n// Form to add products to cart\necho '<h2>Add Products to Cart</h2>';\necho '<form method=\"post\">';\nforeach ($products as $product) {\n    echo '<input type=\"checkbox\" name=\"add_' . $product['id'] . '\" value=\"' . $product['id'] . '\"> ' . $product['name'] . ' - $' . number_format($product['price'], 2) . '</br>';\n}\necho '<button type=\"submit\">Add to Cart</button>';\necho '</form>';\n\n// Function to calculate the total cost\nfunction calculate_total($cart_contents) {\n    $total = 0;\n    foreach ($cart_contents as $product_id => $quantity) {\n        $product = get_product_from_database($product_id);\n        if ($product['price'] !== null) {\n            $total += $product['price'] * $quantity;\n        }\n    }\n    return $total;\n}\n\n// Function to get a product from the database (replace with your own database connection code)\nfunction get_product_from_database($id) {\n    // Replace with your own database connection code\n    return array('price' => 0);\n}\n```\n**cart_add.php**\n```php\n<?php\n// Get the cart contents from the session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Add products to cart\nforeach ($_POST as $key => $value) {\n    if (strpos($key, 'add_') === 0) {\n        $product_id = substr($key, 4);\n        if (!isset($_SESSION['cart'][$product_id])) {\n            $_SESSION['cart'][$product_id] = 1;\n        } else {\n            $_SESSION['cart'][$product_id]++;\n        }\n    }\n}\n\n// Redirect back to cart page\nheader('Location: cart.php');\nexit;\n```\nThis example assumes you have a database connection set up and can retrieve product information from the database. You will need to replace the `get_product_from_database` function with your own database connection code.\n\nTo use this example, create two files: `cart.php` and `cart_add.php`. The `cart.php` file displays the cart contents and allows you to add products to the cart using a form. When you submit the form, it redirects to the `cart_add.php` file, which adds the selected products to the cart.\n\nTo test this example, create some sample product data in your database (e.g., ID 1 with name \"Product 1\" and price $9.99). Then, navigate to the `cart.php` page, check the boxes for the products you want to add to the cart, and submit the form. The selected products should be added to the cart.\n\nNote: This example uses a very basic database connection and product data storage. You will need to modify it to fit your own application's requirements.", "code_blocks": ["```php\n<?php\n// Check if the user is logged in (optional)\nif (!isset($_SESSION['user_id'])) {\n    header('Location: login.php');\n    exit;\n}\n\n// Get the products from the database (replace with your own database connection code)\n$products = array(\n    array('id' => 1, 'name' => 'Product 1', 'price' => 9.99),\n    array('id' => 2, 'name' => 'Product 2', 'price' => 19.99),\n    array('id' => 3, 'name' => 'Product 3', 'price' => 29.99)\n);\n\n// Get the cart contents from the session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Display the cart contents\necho '<h2>Your Cart</h2>';\necho '<table>';\necho '<tr><th>Product Name</th><th>Price</th><th>Quantity</th></tr>';\n\nforeach ($_SESSION['cart'] as $product_id => $quantity) {\n    foreach ($products as $product) {\n        if ($product['id'] == $product_id) {\n            echo '<tr>';\n            echo '<td>' . $product['name'] . '</td>';\n            echo '<td>$' . number_format($product['price'], 2) . '</td>';\n            echo '<td>' . $quantity . '</td>';\n            echo '</tr>';\n        }\n    }\n}\n\necho '</table>';\n\n// Display the total cost\necho '<p>Total: $';\necho number_format(calculate_total($_SESSION['cart']), 2);\necho '</p>';\n\n// Form to add products to cart\necho '<h2>Add Products to Cart</h2>';\necho '<form method=\"post\">';\nforeach ($products as $product) {\n    echo '<input type=\"checkbox\" name=\"add_' . $product['id'] . '\" value=\"' . $product['id'] . '\"> ' . $product['name'] . ' - $' . number_format($product['price'], 2) . '</br>';\n}\necho '<button type=\"submit\">Add to Cart</button>';\necho '</form>';\n\n// Function to calculate the total cost\nfunction calculate_total($cart_contents) {\n    $total = 0;\n    foreach ($cart_contents as $product_id => $quantity) {\n        $product = get_product_from_database($product_id);\n        if ($product['price'] !== null) {\n            $total += $product['price'] * $quantity;\n        }\n    }\n    return $total;\n}\n\n// Function to get a product from the database (replace with your own database connection code)\nfunction get_product_from_database($id) {\n    // Replace with your own database connection code\n    return array('price' => 0);\n}\n```", "```php\n<?php\n// Get the cart contents from the session\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Add products to cart\nforeach ($_POST as $key => $value) {\n    if (strpos($key, 'add_') === 0) {\n        $product_id = substr($key, 4);\n        if (!isset($_SESSION['cart'][$product_id])) {\n            $_SESSION['cart'][$product_id] = 1;\n        } else {\n            $_SESSION['cart'][$product_id]++;\n        }\n    }\n}\n\n// Redirect back to cart page\nheader('Location: cart.php');\nexit;\n```"]}
