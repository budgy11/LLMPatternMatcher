{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of how you can create a simple purchase functionality using PHP. This will involve creating a form to input the product details, calculating the total cost, and then storing the purchase in a database.\n\n**Database Schema**\n\nBefore we start coding, let's assume that our database has two tables: `products` and `purchases`.\n\n```sql\nCREATE TABLE products (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n\nCREATE TABLE purchases (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  product_id INT,\n  quantity INT,\n  total_cost DECIMAL(10,2),\n  FOREIGN KEY (product_id) REFERENCES products(id)\n);\n```\n\n**PHP Code**\n\nLet's assume that our database connection is already established using a PHP library like PDO. Here's an example of how we can create the purchase functionality:\n\n```php\n// form.php\n\n?>\n\n<form action=\"purchase.php\" method=\"post\">\n  <label for=\"product_id\">Select Product:</label>\n  <select name=\"product_id\">\n    <?php foreach ($products as $product) { ?>\n      <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n    <?php } ?>\n  </select>\n\n  <br />\n\n  <label for=\"quantity\">Quantity:</label>\n  <input type=\"number\" name=\"quantity\" required>\n\n  <br />\n\n  <button type=\"submit\">Purchase</button>\n</form>\n\n<?php\n```\n\n```php\n// purchase.php\n\nrequire_once 'database.php';\n\nif (isset($_POST['product_id']) && isset($_POST['quantity'])) {\n  $productId = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  // Retrieve product details from database\n  $stmt = $pdo->prepare('SELECT price FROM products WHERE id = :id');\n  $stmt->execute([':id' => $productId]);\n  $productPrice = $stmt->fetchColumn();\n\n  // Calculate total cost\n  $totalCost = $productPrice * $quantity;\n\n  // Store purchase in database\n  $stmt = $pdo->prepare('INSERT INTO purchases (product_id, quantity, total_cost) VALUES (:id, :qty, :tc)');\n  $stmt->execute([\n    ':id' => $productId,\n    ':qty' => $quantity,\n    ':tc' => $totalCost\n  ]);\n\n  echo 'Purchase successful!';\n}\n```\n\n**Database Connection**\n\n```php\n// database.php\n\n$pdo = new PDO('mysql:host=localhost;dbname=mydatabase', 'username', 'password');\n```\n\nIn this example, we're using a simple form to input the product ID and quantity. The `purchase.php` script retrieves the product price from the database, calculates the total cost, and then stores the purchase in the database.\n\nNote that this is just a basic example, and you should consider implementing additional features like user authentication, validation, and error handling to make your application more robust.\n\nAlso, please replace the placeholder values with your actual database credentials.", "code_blocks": [null, "```php\n// form.php\n\n?>\n\n<form action=\"purchase.php\" method=\"post\">\n  <label for=\"product_id\">Select Product:</label>\n  <select name=\"product_id\">\n    <?php foreach ($products as $product) { ?>\n      <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n    <?php } ?>\n  </select>\n\n  <br />\n\n  <label for=\"quantity\">Quantity:</label>\n  <input type=\"number\" name=\"quantity\" required>\n\n  <br />\n\n  <button type=\"submit\">Purchase</button>\n</form>\n\n<?php\n```", "```php\n// purchase.php\n\nrequire_once 'database.php';\n\nif (isset($_POST['product_id']) && isset($_POST['quantity'])) {\n  $productId = $_POST['product_id'];\n  $quantity = $_POST['quantity'];\n\n  // Retrieve product details from database\n  $stmt = $pdo->prepare('SELECT price FROM products WHERE id = :id');\n  $stmt->execute([':id' => $productId]);\n  $productPrice = $stmt->fetchColumn();\n\n  // Calculate total cost\n  $totalCost = $productPrice * $quantity;\n\n  // Store purchase in database\n  $stmt = $pdo->prepare('INSERT INTO purchases (product_id, quantity, total_cost) VALUES (:id, :qty, :tc)');\n  $stmt->execute([\n    ':id' => $productId,\n    ':qty' => $quantity,\n    ':tc' => $totalCost\n  ]);\n\n  echo 'Purchase successful!';\n}\n```", "```php\n// database.php\n\n$pdo = new PDO('mysql:host=localhost;dbname=mydatabase', 'username', 'password');\n```"]}
