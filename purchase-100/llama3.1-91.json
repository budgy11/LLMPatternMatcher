{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of how you can create a basic purchase cart functionality using PHP. This example assumes that you have the following:\n\n* A database to store products and their details\n* A database table named `products` with columns `id`, `name`, `price`, etc.\n* A session variable to store the user's shopping cart data\n\n**Database Schema:**\n\n```sql\nCREATE TABLE products (\n  id INT PRIMARY KEY,\n  name VARCHAR(255),\n  price DECIMAL(10,2)\n);\n```\n\n**PHP Code:**\n\n**`cart.php`:**\n```php\n<?php\n// Initialize session variables\nsession_start();\n\n// Function to add product to cart\nfunction addToCart($productId) {\n    // Get product details from database\n    $product = getProduct($productId);\n\n    // If product is not found, return false\n    if (!$product) {\n        return false;\n    }\n\n    // Check if product is already in cart\n    $cartItems = getCartItems();\n    foreach ($cartItems as &$item) {\n        if ($item['id'] == $productId) {\n            // Increment quantity of existing item\n            $item['quantity']++;\n            break;\n        }\n    }\n\n    // If product is not in cart, add it with quantity 1\n    if (!isset($cartItems[$productId])) {\n        $cartItems[$productId] = array(\n            'id' => $product->id,\n            'name' => $product->name,\n            'price' => $product->price,\n            'quantity' => 1\n        );\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to remove product from cart\nfunction removeFromCart($productId) {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // If product is in cart, delete it\n    if (isset($cartItems[$productId])) {\n        unset($cartItems[$productId]);\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to update quantity of a product in the cart\nfunction updateQuantity($productId, $quantity) {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // If product is in cart and quantity is valid, update it\n    if (isset($cartItems[$productId]) && $quantity > 0) {\n        $cartItems[$productId]['quantity'] = $quantity;\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to calculate total cost of the cart\nfunction calculateTotal() {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // Calculate total cost by summing up the product prices and quantities\n    $total = 0;\n    foreach ($cartItems as &$item) {\n        $total += $item['price'] * $item['quantity'];\n    }\n\n    return $total;\n}\n\n// Function to get all cart items\nfunction getCartItems() {\n    // Return session cart data if it exists, otherwise initialize an empty array\n    return $_SESSION['cart'] ?? [];\n}\n```\n\n**`index.php`:**\n```php\n<?php\ninclude 'cart.php';\n\n// Get products from database ( example )\n$products = array(\n    array('id' => 1, 'name' => 'Product A', 'price' => 10.99),\n    array('id' => 2, 'name' => 'Product B', 'price' => 5.49),\n    // ...\n);\n\n// Display cart\n?>\n<h1>Shopping Cart</h1>\n\n<table>\n    <tr>\n        <th>Product Name</th>\n        <th>Price</th>\n        <th>Quantity</th>\n        <th>Total</th>\n    </tr>\n    <?php foreach (getCartItems() as $item): ?>\n    <tr>\n        <td><?= $item['name'] ?></td>\n        <td><?= $item['price'] ?></td>\n        <td><?= $item['quantity'] ?></td>\n        <td><?= $item['price'] * $item['quantity'] ?></td>\n    </tr>\n    <?php endforeach; ?>\n</table>\n\n<h2>Total: <?= calculateTotal() ?></h2>\n\n<?php if (isset($_SESSION['cart'])): ?>\n<a href=\"checkout.php\">Checkout</a>\n<?php endif; ?>\n\n<form action=\"\" method=\"post\">\n    <select name=\"product_id\" id=\"product_id\">\n        <?php foreach ($products as $product): ?>\n            <option value=\"<?= $product['id'] ?>\"><?= $product['name'] ?></option>\n        <?php endforeach; ?>\n    </select>\n\n    <input type=\"number\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\n    <button type=\"submit\">Add to Cart</button>\n</form>\n```\n\n**`checkout.php`:**\n```php\n<?php\ninclude 'cart.php';\n\n// Process checkout form submission ( example )\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Save cart data to database\n    saveCartData();\n}\n\n// Display saved cart data\n?>\n<h1>Checkout Successful!</h1>\n\n<p>Your order has been successfully processed.</p>\n```\n\nNote that this is a simplified example and does not include error handling, security measures, or other features you may want in a real-world e-commerce application.", "code_blocks": [null, "```php\n<?php\n// Initialize session variables\nsession_start();\n\n// Function to add product to cart\nfunction addToCart($productId) {\n    // Get product details from database\n    $product = getProduct($productId);\n\n    // If product is not found, return false\n    if (!$product) {\n        return false;\n    }\n\n    // Check if product is already in cart\n    $cartItems = getCartItems();\n    foreach ($cartItems as &$item) {\n        if ($item['id'] == $productId) {\n            // Increment quantity of existing item\n            $item['quantity']++;\n            break;\n        }\n    }\n\n    // If product is not in cart, add it with quantity 1\n    if (!isset($cartItems[$productId])) {\n        $cartItems[$productId] = array(\n            'id' => $product->id,\n            'name' => $product->name,\n            'price' => $product->price,\n            'quantity' => 1\n        );\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to remove product from cart\nfunction removeFromCart($productId) {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // If product is in cart, delete it\n    if (isset($cartItems[$productId])) {\n        unset($cartItems[$productId]);\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to update quantity of a product in the cart\nfunction updateQuantity($productId, $quantity) {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // If product is in cart and quantity is valid, update it\n    if (isset($cartItems[$productId]) && $quantity > 0) {\n        $cartItems[$productId]['quantity'] = $quantity;\n    }\n\n    // Update session cart data\n    $_SESSION['cart'] = $cartItems;\n\n    return true;\n}\n\n// Function to calculate total cost of the cart\nfunction calculateTotal() {\n    // Get current cart items\n    $cartItems = getCartItems();\n\n    // Calculate total cost by summing up the product prices and quantities\n    $total = 0;\n    foreach ($cartItems as &$item) {\n        $total += $item['price'] * $item['quantity'];\n    }\n\n    return $total;\n}\n\n// Function to get all cart items\nfunction getCartItems() {\n    // Return session cart data if it exists, otherwise initialize an empty array\n    return $_SESSION['cart'] ?? [];\n}\n```", "```php\n<?php\ninclude 'cart.php';\n\n// Get products from database ( example )\n$products = array(\n    array('id' => 1, 'name' => 'Product A', 'price' => 10.99),\n    array('id' => 2, 'name' => 'Product B', 'price' => 5.49),\n    // ...\n);\n\n// Display cart\n?>\n<h1>Shopping Cart</h1>\n\n<table>\n    <tr>\n        <th>Product Name</th>\n        <th>Price</th>\n        <th>Quantity</th>\n        <th>Total</th>\n    </tr>\n    <?php foreach (getCartItems() as $item): ?>\n    <tr>\n        <td><?= $item['name'] ?></td>\n        <td><?= $item['price'] ?></td>\n        <td><?= $item['quantity'] ?></td>\n        <td><?= $item['price'] * $item['quantity'] ?></td>\n    </tr>\n    <?php endforeach; ?>\n</table>\n\n<h2>Total: <?= calculateTotal() ?></h2>\n\n<?php if (isset($_SESSION['cart'])): ?>\n<a href=\"checkout.php\">Checkout</a>\n<?php endif; ?>\n\n<form action=\"\" method=\"post\">\n    <select name=\"product_id\" id=\"product_id\">\n        <?php foreach ($products as $product): ?>\n            <option value=\"<?= $product['id'] ?>\"><?= $product['name'] ?></option>\n        <?php endforeach; ?>\n    </select>\n\n    <input type=\"number\" name=\"quantity\" id=\"quantity\" value=\"1\">\n\n    <button type=\"submit\">Add to Cart</button>\n</form>\n```", "```php\n<?php\ninclude 'cart.php';\n\n// Process checkout form submission ( example )\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Save cart data to database\n    saveCartData();\n}\n\n// Display saved cart data\n?>\n<h1>Checkout Successful!</h1>\n\n<p>Your order has been successfully processed.</p>\n```"]}
