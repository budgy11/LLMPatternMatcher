{"prompt": "Create a purchase functionality using php", "llm_output": "Here is an example of a basic purchase functionality using PHP, MySQL, and HTML. This code includes features to add products to cart, view cart contents, and complete the purchase.\n\n**Note:** This is a simplified example and does not include error checking or validation for brevity.\n\n**database.php** (connection settings)\n```php\n<?php\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```\n**product.php** (product information)\n```php\n<?php\ninclude 'database.php';\n\n$query = \"SELECT * FROM products\";\n$result = mysqli_query($conn, $query);\n\nwhile ($row = mysqli_fetch_assoc($result)) {\n    echo '<h2>' . $row['name'] . '</h2>';\n    echo '<p>Price: ' . $row['price'] . '</p>';\n    echo '<button class=\"add-to-cart\" data-id=\"' . $row['id'] . '\">Add to Cart</button><br><br>';\n}\n?>\n```\n**cart.php** (view cart contents)\n```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$cart = array();\n\nif (isset($_SESSION['cart'])) {\n    $cart = unserialize($_SESSION['cart']);\n}\n\necho '<h2>Cart Contents:</h2>';\necho '<table border=\"1\">';\necho '<tr><th>Product</th><th>Quantity</th><th>Total</th></tr>';\n\n$total = 0;\n\nforeach ($cart as $product_id => $quantity) {\n    $query = \"SELECT * FROM products WHERE id='\" . $product_id . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    echo '<tr><td>' . $row['name'] . '</td><td>' . $quantity . '</td><td>' . $row['price'] * $quantity . '</td></tr>';\n    $total += $row['price'] * $quantity;\n}\n\necho '<tr><th>Total:</th><th colspan=\"2\">' . $total . '</th></tr>';\necho '</table>';\n\nif (isset($_POST['remove'])) {\n    unset($cart[$_POST['product_id']]);\n}\n\n$items = array();\nforeach ($cart as $product_id => $quantity) {\n    $query = \"SELECT * FROM products WHERE id='\" . $product_id . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    $items[] = array('name' => $row['name'], 'price' => $row['price']);\n}\n\n$_SESSION['cart'] = serialize($items);\n\nif (isset($_POST['checkout'])) {\n    // TO DO: Complete the purchase\n}\n?>\n```\n**add-to-cart.php** (add product to cart)\n```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$product_id = $_GET['id'];\n$quantity = 1;\n\nif (isset($_SESSION['cart'])) {\n    $cart = unserialize($_SESSION['cart']);\n} else {\n    $cart = array();\n}\nif (array_key_exists($product_id, $cart)) {\n    $cart[$product_id] += $quantity;\n} else {\n    $cart[$product_id] = $quantity;\n}\n\n$_SESSION['cart'] = serialize($cart);\n\nheader('Location: cart.php');\n?>\n```\n**checkout.php** (complete the purchase)\n```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$items = unserialize($_SESSION['cart']);\n\n$total = 0;\nforeach ($items as $product) {\n    $query = \"SELECT * FROM products WHERE name='\" . $product['name'] . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    $total += $row['price'] * $product['quantity'];\n}\n\n// TO DO: Implement payment gateway and update database\n?>\n```\nThis is a basic example of how to create a purchase functionality using PHP. Note that you will need to implement a payment gateway (such as Stripe or PayPal) to complete the checkout process.\n\n**Example Use Cases**\n\n1. User adds product to cart by clicking \"Add to Cart\" button on product page.\n2. User views cart contents and can remove products from cart.\n3. User completes purchase by clicking \"Checkout\" button on cart page.\n\nRemember to replace `your_username`, `your_password`, and `your_database` with your actual database credentials.", "code_blocks": ["```php\n<?php\n$servername = \"localhost\";\n$username = \"your_username\";\n$password = \"your_password\";\n$dbname = \"your_database\";\n\n$conn = new mysqli($servername, $username, $password, $dbname);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\n$query = \"SELECT * FROM products\";\n$result = mysqli_query($conn, $query);\n\nwhile ($row = mysqli_fetch_assoc($result)) {\n    echo '<h2>' . $row['name'] . '</h2>';\n    echo '<p>Price: ' . $row['price'] . '</p>';\n    echo '<button class=\"add-to-cart\" data-id=\"' . $row['id'] . '\">Add to Cart</button><br><br>';\n}\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$cart = array();\n\nif (isset($_SESSION['cart'])) {\n    $cart = unserialize($_SESSION['cart']);\n}\n\necho '<h2>Cart Contents:</h2>';\necho '<table border=\"1\">';\necho '<tr><th>Product</th><th>Quantity</th><th>Total</th></tr>';\n\n$total = 0;\n\nforeach ($cart as $product_id => $quantity) {\n    $query = \"SELECT * FROM products WHERE id='\" . $product_id . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    echo '<tr><td>' . $row['name'] . '</td><td>' . $quantity . '</td><td>' . $row['price'] * $quantity . '</td></tr>';\n    $total += $row['price'] * $quantity;\n}\n\necho '<tr><th>Total:</th><th colspan=\"2\">' . $total . '</th></tr>';\necho '</table>';\n\nif (isset($_POST['remove'])) {\n    unset($cart[$_POST['product_id']]);\n}\n\n$items = array();\nforeach ($cart as $product_id => $quantity) {\n    $query = \"SELECT * FROM products WHERE id='\" . $product_id . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    $items[] = array('name' => $row['name'], 'price' => $row['price']);\n}\n\n$_SESSION['cart'] = serialize($items);\n\nif (isset($_POST['checkout'])) {\n    // TO DO: Complete the purchase\n}\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$product_id = $_GET['id'];\n$quantity = 1;\n\nif (isset($_SESSION['cart'])) {\n    $cart = unserialize($_SESSION['cart']);\n} else {\n    $cart = array();\n}\nif (array_key_exists($product_id, $cart)) {\n    $cart[$product_id] += $quantity;\n} else {\n    $cart[$product_id] = $quantity;\n}\n\n$_SESSION['cart'] = serialize($cart);\n\nheader('Location: cart.php');\n?>\n```", "```php\n<?php\ninclude 'database.php';\n\nif (!isset($_SESSION)) {\n    session_start();\n}\n\n$items = unserialize($_SESSION['cart']);\n\n$total = 0;\nforeach ($items as $product) {\n    $query = \"SELECT * FROM products WHERE name='\" . $product['name'] . \"'\";\n    $result = mysqli_query($conn, $query);\n    $row = mysqli_fetch_assoc($result);\n\n    $total += $row['price'] * $product['quantity'];\n}\n\n// TO DO: Implement payment gateway and update database\n?>\n```"]}
