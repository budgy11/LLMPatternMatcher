{"prompt": "Create a purchase cart functionality using php", "llm_output": "Here is an example of a basic purchase cart functionality using PHP. This will allow users to add items to their cart, view the contents of their cart, and remove items from their cart.\n\n**cart.php**\n```php\n<?php\n// session_start() starts a new session or resumes an existing one\nsession_start();\n\n// If there's no cart in the session, create a new one\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addItemToCart($product_id) {\n    global $wpdb;\n    // Check if product is already in cart\n    foreach ($_SESSION['cart'] as $key => $value) {\n        if ($value['product_id'] == $product_id) {\n            return; // Product is already in cart, so do nothing\n        }\n    }\n    \n    // Get product details from database\n    $product = get_product($wpdb, $product_id);\n    \n    // Add item to cart array with quantity set to 1\n    $_SESSION['cart'][] = array('product_id' => $product_id, 'quantity' => 1);\n}\n\n// Function to remove item from cart\nfunction removeItemFromCart($product_id) {\n    global $wpdb;\n    // Check if product is in cart\n    foreach ($_SESSION['cart'] as $key => $value) {\n        if ($value['product_id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return; // Product removed from cart, so do nothing\n        }\n    }\n}\n\n// Function to view cart contents\nfunction viewCart() {\n    global $wpdb;\n    \n    // Get product details for each item in cart\n    foreach ($_SESSION['cart'] as &$value) {\n        $product = get_product($wpdb, $value['product_id']);\n        \n        // Add price and quantity to item array\n        $value['price'] = $product['price'];\n        $value['quantity'] = $value['quantity'];\n    }\n}\n\n// Function to calculate total cost of items in cart\nfunction calculateTotalCost() {\n    global $wpdb;\n    \n    // Initialize total cost to 0\n    $total_cost = 0;\n    \n    // Loop through each item in cart and add price multiplied by quantity to total cost\n    foreach ($_SESSION['cart'] as &$value) {\n        $total_cost += $value['price'] * $value['quantity'];\n    }\n    \n    return $total_cost;\n}\n\n// Function to display cart contents\nfunction displayCart() {\n    global $wpdb;\n    \n    // View cart contents\n    viewCart();\n    \n    // Calculate total cost of items in cart\n    $total_cost = calculateTotalCost();\n    \n    ?>\n    <h1>Cart Contents</h1>\n    <table border=\"1\">\n        <tr>\n            <th>Product ID</th>\n            <th>Quantity</th>\n            <th>Price</th>\n        </tr>\n        <?php foreach ($_SESSION['cart'] as $value) { ?>\n            <tr>\n                <td><?php echo $value['product_id']; ?></td>\n                <td><?php echo $value['quantity']; ?></td>\n                <td><?php echo $value['price']; ?></td>\n            </tr>\n        <?php } ?>\n    </table>\n    \n    <p>Total cost: <?php echo $total_cost; ?></p>\n    <?php\n}\n\n// Function to display add item form\nfunction displayAddItemForm() {\n    global $wpdb;\n    \n    // Get products from database\n    $products = get_products($wpdb);\n    \n    ?>\n    <h1>Add Item</h1>\n    <form action=\"\" method=\"post\">\n        <select name=\"product_id\">\n            <?php foreach ($products as $product) { ?>\n                <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n            <?php } ?>\n        </select>\n        \n        <input type=\"submit\" value=\"Add to Cart\">\n    </form>\n    <?php\n}\n\n// Function to display remove item form\nfunction displayRemoveItemForm() {\n    global $wpdb;\n    \n    // Get products from database\n    $products = get_products($wpdb);\n    \n    ?>\n    <h1>Remove Item</h1>\n    <form action=\"\" method=\"post\">\n        <select name=\"product_id\">\n            <?php foreach ($products as $product) { ?>\n                <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n            <?php } ?>\n        </select>\n        \n        <input type=\"submit\" value=\"Remove from Cart\">\n    </form>\n    <?php\n}\n\n// Display cart contents and add item form\ndisplayCart();\ndisplayAddItemForm();\n\n?>\n```\nThis is a basic example of how you can create a purchase cart functionality using PHP. It allows users to add items to their cart, view the contents of their cart, and remove items from their cart.\n\nNote: This code uses `session_start()` to start a new session or resume an existing one. It also uses `$_SESSION` to store data for each user. The database functions (`get_product()`, `get_products()`) are assumed to be defined elsewhere in the code.\n\nYou can modify this code to fit your specific needs and requirements.\n\n**cart_functions.php**\n```php\n<?php\n\n// Function to get product details from database\nfunction get_product($wpdb, $product_id) {\n    global $wpdb;\n    \n    // Query database for product with given ID\n    $result = $wpdb->get_row(\"SELECT * FROM products WHERE id = '$product_id'\");\n    \n    return $result;\n}\n\n// Function to get all products from database\nfunction get_products($wpdb) {\n    global $wpdb;\n    \n    // Query database for all products\n    $results = $wpdb->get_results(\"SELECT * FROM products\");\n    \n    return $results;\n}\n```\nThis file contains the functions used in `cart.php` to interact with the database.\n\nYou can also add more features like:\n\n* Validating user input data\n* Handling errors and exceptions\n* Implementing payment processing\n* etc.\n\nI hope this helps! Let me know if you have any questions or need further assistance.", "code_blocks": ["```php\n<?php\n// session_start() starts a new session or resumes an existing one\nsession_start();\n\n// If there's no cart in the session, create a new one\nif (!isset($_SESSION['cart'])) {\n    $_SESSION['cart'] = array();\n}\n\n// Function to add item to cart\nfunction addItemToCart($product_id) {\n    global $wpdb;\n    // Check if product is already in cart\n    foreach ($_SESSION['cart'] as $key => $value) {\n        if ($value['product_id'] == $product_id) {\n            return; // Product is already in cart, so do nothing\n        }\n    }\n    \n    // Get product details from database\n    $product = get_product($wpdb, $product_id);\n    \n    // Add item to cart array with quantity set to 1\n    $_SESSION['cart'][] = array('product_id' => $product_id, 'quantity' => 1);\n}\n\n// Function to remove item from cart\nfunction removeItemFromCart($product_id) {\n    global $wpdb;\n    // Check if product is in cart\n    foreach ($_SESSION['cart'] as $key => $value) {\n        if ($value['product_id'] == $product_id) {\n            unset($_SESSION['cart'][$key]);\n            return; // Product removed from cart, so do nothing\n        }\n    }\n}\n\n// Function to view cart contents\nfunction viewCart() {\n    global $wpdb;\n    \n    // Get product details for each item in cart\n    foreach ($_SESSION['cart'] as &$value) {\n        $product = get_product($wpdb, $value['product_id']);\n        \n        // Add price and quantity to item array\n        $value['price'] = $product['price'];\n        $value['quantity'] = $value['quantity'];\n    }\n}\n\n// Function to calculate total cost of items in cart\nfunction calculateTotalCost() {\n    global $wpdb;\n    \n    // Initialize total cost to 0\n    $total_cost = 0;\n    \n    // Loop through each item in cart and add price multiplied by quantity to total cost\n    foreach ($_SESSION['cart'] as &$value) {\n        $total_cost += $value['price'] * $value['quantity'];\n    }\n    \n    return $total_cost;\n}\n\n// Function to display cart contents\nfunction displayCart() {\n    global $wpdb;\n    \n    // View cart contents\n    viewCart();\n    \n    // Calculate total cost of items in cart\n    $total_cost = calculateTotalCost();\n    \n    ?>\n    <h1>Cart Contents</h1>\n    <table border=\"1\">\n        <tr>\n            <th>Product ID</th>\n            <th>Quantity</th>\n            <th>Price</th>\n        </tr>\n        <?php foreach ($_SESSION['cart'] as $value) { ?>\n            <tr>\n                <td><?php echo $value['product_id']; ?></td>\n                <td><?php echo $value['quantity']; ?></td>\n                <td><?php echo $value['price']; ?></td>\n            </tr>\n        <?php } ?>\n    </table>\n    \n    <p>Total cost: <?php echo $total_cost; ?></p>\n    <?php\n}\n\n// Function to display add item form\nfunction displayAddItemForm() {\n    global $wpdb;\n    \n    // Get products from database\n    $products = get_products($wpdb);\n    \n    ?>\n    <h1>Add Item</h1>\n    <form action=\"\" method=\"post\">\n        <select name=\"product_id\">\n            <?php foreach ($products as $product) { ?>\n                <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n            <?php } ?>\n        </select>\n        \n        <input type=\"submit\" value=\"Add to Cart\">\n    </form>\n    <?php\n}\n\n// Function to display remove item form\nfunction displayRemoveItemForm() {\n    global $wpdb;\n    \n    // Get products from database\n    $products = get_products($wpdb);\n    \n    ?>\n    <h1>Remove Item</h1>\n    <form action=\"\" method=\"post\">\n        <select name=\"product_id\">\n            <?php foreach ($products as $product) { ?>\n                <option value=\"<?php echo $product['id']; ?>\"><?php echo $product['name']; ?></option>\n            <?php } ?>\n        </select>\n        \n        <input type=\"submit\" value=\"Remove from Cart\">\n    </form>\n    <?php\n}\n\n// Display cart contents and add item form\ndisplayCart();\ndisplayAddItemForm();\n\n?>\n```", "```php\n<?php\n\n// Function to get product details from database\nfunction get_product($wpdb, $product_id) {\n    global $wpdb;\n    \n    // Query database for product with given ID\n    $result = $wpdb->get_row(\"SELECT * FROM products WHERE id = '$product_id'\");\n    \n    return $result;\n}\n\n// Function to get all products from database\nfunction get_products($wpdb) {\n    global $wpdb;\n    \n    // Query database for all products\n    $results = $wpdb->get_results(\"SELECT * FROM products\");\n    \n    return $results;\n}\n```"]}
