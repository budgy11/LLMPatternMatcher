{"prompt": "Create a user cart session using php", "llm_output": "Here is an example of how to create a user cart session using PHP:\n\n**Note:** This example assumes you are using a MySQL database to store the products and their prices.\n\n**Step 1: Create a cart table in your database**\n\n```sql\nCREATE TABLE cart (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT,\n  product_id INT,\n  quantity INT,\n  price DECIMAL(10,2)\n);\n```\n\n**Step 2: Create a PHP script to manage the cart**\n\nCreate a new file called `cart.php` and add the following code:\n```php\n<?php\n\n// Configuration\n$db_host = 'localhost';\n$db_user = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_user, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add product to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $conn;\n    \n    // Check if product already exists in cart\n    $query = \"SELECT * FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        // Update quantity of existing product\n        $row = $result->fetch_assoc();\n        $new_quantity = $row['quantity'] + $quantity;\n        $price = $row['price'];\n        \n        $update_query = \"UPDATE cart SET quantity = '\".$new_quantity.\"', price = '\".$price.\"' WHERE id = '\".$row['id'].\"'\";\n        $conn->query($update_query);\n    } else {\n        // Insert new product into cart\n        $insert_query = \"INSERT INTO cart (user_id, product_id, quantity, price) VALUES ('\".$_SESSION['user_id'].\"', '\".$product_id.\"', '\".$quantity.\"', 'NULL')\";\n        $conn->query($insert_query);\n    }\n}\n\n// Function to remove product from cart\nfunction remove_from_cart($product_id) {\n    global $conn;\n    \n    // Delete product from cart\n    $delete_query = \"DELETE FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $conn->query($delete_query);\n}\n\n// Function to update quantity of product in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $conn;\n    \n    // Update quantity of product in cart\n    $update_query = \"UPDATE cart SET quantity = '\".$new_quantity.\"' WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $conn->query($update_query);\n}\n\n// Function to get products in cart\nfunction get_cart() {\n    global $conn;\n    \n    // Get products in cart\n    $query = \"SELECT * FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"'\";\n    $result = $conn->query($query);\n    \n    return $result;\n}\n\n?>\n```\n\n**Step 3: Create a PHP script to display the cart contents**\n\nCreate a new file called `cart_display.php` and add the following code:\n```php\n<?php\n\n// Include cart.php\ninclude 'cart.php';\n\n// Get products in cart\n$products = get_cart();\n\n// Display cart contents\necho \"<h2>Cart Contents:</h2>\";\necho \"<table border='1'>\";\necho \"<tr><th>Product</th><th>Quantity</th><th>Total Price</th></tr>\";\n\nforeach ($products as $product) {\n    echo \"<tr>\";\n    echo \"<td>\".$product['name'].\"</td>\";\n    echo \"<td>\".$product['quantity'].\"</td>\";\n    echo \"<td>\".$product['price'].\" * \".$product['quantity'].\"</td>\";\n    echo \"</tr>\";\n}\n\necho \"</table>\";\n\n?>\n```\n\n**Step 4: Create a PHP script to update the cart session**\n\nCreate a new file called `cart_update.php` and add the following code:\n```php\n<?php\n\n// Include cart.php\ninclude 'cart.php';\n\n// Update quantity of product in cart\nif (isset($_POST['update_quantity'])) {\n    $product_id = $_POST['product_id'];\n    $new_quantity = $_POST['new_quantity'];\n    \n    update_quantity($product_id, $new_quantity);\n}\n\n// Add product to cart\nif (isset($_POST['add_to_cart'])) {\n    $product_id = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n    \n    add_to_cart($product_id, $quantity);\n}\n\n// Remove product from cart\nif (isset($_POST['remove_from_cart'])) {\n    $product_id = $_POST['product_id'];\n    \n    remove_from_cart($product_id);\n}\n\n?>\n```\n\nThis code creates a simple user cart system that allows users to add products to their cart, update the quantity of products in their cart, and remove products from their cart. The cart contents are displayed on a separate page.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\n$db_host = 'localhost';\n$db_user = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_user, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to add product to cart\nfunction add_to_cart($product_id, $quantity) {\n    global $conn;\n    \n    // Check if product already exists in cart\n    $query = \"SELECT * FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        // Update quantity of existing product\n        $row = $result->fetch_assoc();\n        $new_quantity = $row['quantity'] + $quantity;\n        $price = $row['price'];\n        \n        $update_query = \"UPDATE cart SET quantity = '\".$new_quantity.\"', price = '\".$price.\"' WHERE id = '\".$row['id'].\"'\";\n        $conn->query($update_query);\n    } else {\n        // Insert new product into cart\n        $insert_query = \"INSERT INTO cart (user_id, product_id, quantity, price) VALUES ('\".$_SESSION['user_id'].\"', '\".$product_id.\"', '\".$quantity.\"', 'NULL')\";\n        $conn->query($insert_query);\n    }\n}\n\n// Function to remove product from cart\nfunction remove_from_cart($product_id) {\n    global $conn;\n    \n    // Delete product from cart\n    $delete_query = \"DELETE FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $conn->query($delete_query);\n}\n\n// Function to update quantity of product in cart\nfunction update_quantity($product_id, $new_quantity) {\n    global $conn;\n    \n    // Update quantity of product in cart\n    $update_query = \"UPDATE cart SET quantity = '\".$new_quantity.\"' WHERE user_id = '\".$_SESSION['user_id'].\"' AND product_id = '\".$product_id.\"'\";\n    $conn->query($update_query);\n}\n\n// Function to get products in cart\nfunction get_cart() {\n    global $conn;\n    \n    // Get products in cart\n    $query = \"SELECT * FROM cart WHERE user_id = '\".$_SESSION['user_id'].\"'\";\n    $result = $conn->query($query);\n    \n    return $result;\n}\n\n?>\n```", "```php\n<?php\n\n// Include cart.php\ninclude 'cart.php';\n\n// Get products in cart\n$products = get_cart();\n\n// Display cart contents\necho \"<h2>Cart Contents:</h2>\";\necho \"<table border='1'>\";\necho \"<tr><th>Product</th><th>Quantity</th><th>Total Price</th></tr>\";\n\nforeach ($products as $product) {\n    echo \"<tr>\";\n    echo \"<td>\".$product['name'].\"</td>\";\n    echo \"<td>\".$product['quantity'].\"</td>\";\n    echo \"<td>\".$product['price'].\" * \".$product['quantity'].\"</td>\";\n    echo \"</tr>\";\n}\n\necho \"</table>\";\n\n?>\n```", "```php\n<?php\n\n// Include cart.php\ninclude 'cart.php';\n\n// Update quantity of product in cart\nif (isset($_POST['update_quantity'])) {\n    $product_id = $_POST['product_id'];\n    $new_quantity = $_POST['new_quantity'];\n    \n    update_quantity($product_id, $new_quantity);\n}\n\n// Add product to cart\nif (isset($_POST['add_to_cart'])) {\n    $product_id = $_POST['product_id'];\n    $quantity = $_POST['quantity'];\n    \n    add_to_cart($product_id, $quantity);\n}\n\n// Remove product from cart\nif (isset($_POST['remove_from_cart'])) {\n    $product_id = $_POST['product_id'];\n    \n    remove_from_cart($product_id);\n}\n\n?>\n```"]}
