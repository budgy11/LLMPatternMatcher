{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nThis is an example of a basic user login function written in PHP. It includes functions for checking if the username and password are valid, as well as for logging in and logging out.\n\n**Function 1: `check_credentials`**\n\nThis function checks if the provided username and password match those stored in the database.\n```php\nfunction check_credentials($username, $password) {\n    // Connect to the database (example using PDO)\n    $conn = new PDO('mysql:host=localhost;dbname=mydatabase', 'myuser', 'mypassword');\n\n    // Query the database for the user's information\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the user's data\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // Check if a match was found and the password is correct\n    if ($result && password_verify($password, $result['password'])) {\n        return true;\n    } else {\n        return false;\n    }\n\n    // Close the database connection\n    $conn = null;\n}\n```\n**Function 2: `login_user`**\n\nThis function logs in a user and sets their session variables.\n```php\nfunction login_user($username) {\n    // Get the user's data from the database (example using PDO)\n    $conn = new PDO('mysql:host=localhost;dbname=mydatabase', 'myuser', 'mypassword');\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // Check if a match was found\n    if ($result) {\n        // Start the session and set the user's ID and name\n        session_start();\n        $_SESSION['user_id'] = $result['id'];\n        $_SESSION['username'] = $username;\n\n        // Redirect to a secure page (e.g., dashboard)\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid username or password.\";\n    }\n\n    // Close the database connection\n    $conn = null;\n}\n```\n**Function 3: `logout_user`**\n\nThis function logs out a user and destroys their session variables.\n```php\nfunction logout_user() {\n    // Destroy the session\n    session_start();\n    $_SESSION = array();\n    session_destroy();\n\n    // Redirect to the login page\n    header('Location: login.php');\n    exit;\n}\n```\n**Example Usage**\n-----------------\n\nTo use these functions, simply call them with the necessary arguments. For example:\n```php\n// Check credentials\nif (check_credentials($username, $password)) {\n    echo \"Login successful!\";\n} else {\n    echo \"Invalid username or password.\";\n}\n\n// Login user\nlogin_user($username);\n\n// Logout user\nlogout_user();\n```\nRemember to replace `localhost`, `mydatabase`, `myuser`, and `mypassword` with your actual database credentials.", "code_blocks": ["```php\nfunction check_credentials($username, $password) {\n    // Connect to the database (example using PDO)\n    $conn = new PDO('mysql:host=localhost;dbname=mydatabase', 'myuser', 'mypassword');\n\n    // Query the database for the user's information\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the user's data\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // Check if a match was found and the password is correct\n    if ($result && password_verify($password, $result['password'])) {\n        return true;\n    } else {\n        return false;\n    }\n\n    // Close the database connection\n    $conn = null;\n}\n```", "```php\nfunction login_user($username) {\n    // Get the user's data from the database (example using PDO)\n    $conn = new PDO('mysql:host=localhost;dbname=mydatabase', 'myuser', 'mypassword');\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n\n    // Check if a match was found\n    if ($result) {\n        // Start the session and set the user's ID and name\n        session_start();\n        $_SESSION['user_id'] = $result['id'];\n        $_SESSION['username'] = $username;\n\n        // Redirect to a secure page (e.g., dashboard)\n        header('Location: dashboard.php');\n        exit;\n    } else {\n        echo \"Invalid username or password.\";\n    }\n\n    // Close the database connection\n    $conn = null;\n}\n```", "```php\nfunction logout_user() {\n    // Destroy the session\n    session_start();\n    $_SESSION = array();\n    session_destroy();\n\n    // Redirect to the login page\n    header('Location: login.php');\n    exit;\n}\n```", "```php\n// Check credentials\nif (check_credentials($username, $password)) {\n    echo \"Login successful!\";\n} else {\n    echo \"Invalid username or password.\";\n}\n\n// Login user\nlogin_user($username);\n\n// Logout user\nlogout_user();\n```"]}
