{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login system using PHP. This example uses a simple database (SQLite) to store users and their passwords.\n\n**Please note that storing passwords in plain text is not secure, so we will use password_hash() and password_verify() functions for better security**\n\n### Database Setup\n\nFirst create a new SQLite database named `users.db` with the following table structure:\n\n```sql\nCREATE TABLE users (\n  id INTEGER PRIMARY KEY,\n  username TEXT NOT NULL UNIQUE,\n  email TEXT NOT NULL UNIQUE,\n  password TEXT NOT NULL\n);\n```\n\n### PHP Login Function\n\nCreate a file named `login.php` in your project directory and add the following code:\n\n```php\n<?php\n\n// Configuration\n$host = 'localhost';\n$dbname = 'users.db';\n\n// Connect to database\n$conn = new PDO(\"sqlite:$dbname\");\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Retrieve data from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    try {\n        // Query the database to select user\n        $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n        $stmt->bindParam(':username', $username);\n        $stmt->execute();\n        $user = $stmt->fetch();\n\n        if ($user) {\n\n            // Verify password using password_verify()\n            if (password_verify($password, $user['password'])) {\n\n                // Login successful\n                echo 'Login successful';\n            } else {\n                // Incorrect password\n                echo 'Incorrect password';\n            }\n        } else {\n            // User not found\n            echo 'User not found';\n        }\n    } catch (PDOException $e) {\n        // Database error\n        echo 'Database error: ' . $e->getMessage();\n    }\n\n} else {\n\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```\n\n### How to use\n\n1. Open a web browser and navigate to the `login.php` file.\n2. Fill in your username and password, then submit the form.\n3. If login is successful, you should see \"Login successful\" on the screen.\n\nNote: This example uses a simple form validation and does not include error checking or security features like cross-site scripting (XSS) protection. For production use, consider using a more robust framework or library for secure user authentication.", "code_blocks": [null, "```php\n<?php\n\n// Configuration\n$host = 'localhost';\n$dbname = 'users.db';\n\n// Connect to database\n$conn = new PDO(\"sqlite:$dbname\");\n\n// Check if form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Retrieve data from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    try {\n        // Query the database to select user\n        $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n        $stmt->bindParam(':username', $username);\n        $stmt->execute();\n        $user = $stmt->fetch();\n\n        if ($user) {\n\n            // Verify password using password_verify()\n            if (password_verify($password, $user['password'])) {\n\n                // Login successful\n                echo 'Login successful';\n            } else {\n                // Incorrect password\n                echo 'Incorrect password';\n            }\n        } else {\n            // User not found\n            echo 'User not found';\n        }\n    } catch (PDOException $e) {\n        // Database error\n        echo 'Database error: ' . $e->getMessage();\n    }\n\n} else {\n\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n?>\n```"]}
