{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n// Define the database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create a new MySQLi connection object\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check if the connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define the login function\nfunction userLogin() {\n    global $conn;\n\n    // Get the username and password from the form submission\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Validate the input data\n    if (empty($username) || empty($password)) {\n        return array('error' => 'Username or password is required');\n    }\n\n    // Hash the password for security\n    $hashedPassword = hash('sha256', $password);\n\n    // Query the database to check the username and password\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n    $result = $conn->query($query);\n\n    // Check if there's a match\n    if ($result->num_rows > 0) {\n        return array('success' => 'Login successful');\n    } else {\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Handle the form submission\nif (isset($_POST['login'])) {\n    $response = userLogin();\n    if ($response['success']) {\n        // Login successful, redirect to protected page\n        header('Location: protected-page.php');\n        exit;\n    } else {\n        // Display error message\n        echo '<p style=\"color: red;\">' . $response['error'] . '</p>';\n    }\n}\n\n// Close the database connection\n$conn->close();\n?>\n```\n**login.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Form</title>\n</head>\n<body>\n    <h1>Login Form</h1>\n    <form action=\"login.php\" method=\"post\">\n        <label>Username:</label><br>\n        <input type=\"text\" name=\"username\"><br>\n        <label>Password:</label><br>\n        <input type=\"password\" name=\"password\"><br>\n        <input type=\"submit\" name=\"login\" value=\"Login\">\n    </form>\n</body>\n</html>\n```\nThis example assumes you have a database table named `users` with columns for `username` and `password`.\n\nHere's how it works:\n\n1. The user submits the login form.\n2. The PHP script checks if the form was submitted (i.e., if the `login` button was clicked).\n3. If the form was submitted, the script calls the `userLogin()` function with the username and password from the form submission.\n4. The `userLogin()` function queries the database to check if there's a match between the input data and any row in the `users` table.\n5. If there's a match, it returns an array with a success message; otherwise, it returns an error message.\n6. The script checks the response from `userLogin()`. If it's a success message, it redirects the user to a protected page (in this example, `protected-page.php`). Otherwise, it displays the error message.\n\nNote that this is a basic example and you should consider implementing additional security measures, such as:\n\n* Salting and hashing passwords securely\n* Validating user input data\n* Implementing rate limiting or IP blocking for brute-force attacks", "code_blocks": ["```php\n<?php\n// Define the database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create a new MySQLi connection object\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check if the connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define the login function\nfunction userLogin() {\n    global $conn;\n\n    // Get the username and password from the form submission\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Validate the input data\n    if (empty($username) || empty($password)) {\n        return array('error' => 'Username or password is required');\n    }\n\n    // Hash the password for security\n    $hashedPassword = hash('sha256', $password);\n\n    // Query the database to check the username and password\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashedPassword'\";\n    $result = $conn->query($query);\n\n    // Check if there's a match\n    if ($result->num_rows > 0) {\n        return array('success' => 'Login successful');\n    } else {\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Handle the form submission\nif (isset($_POST['login'])) {\n    $response = userLogin();\n    if ($response['success']) {\n        // Login successful, redirect to protected page\n        header('Location: protected-page.php');\n        exit;\n    } else {\n        // Display error message\n        echo '<p style=\"color: red;\">' . $response['error'] . '</p>';\n    }\n}\n\n// Close the database connection\n$conn->close();\n?>\n```", null]}
