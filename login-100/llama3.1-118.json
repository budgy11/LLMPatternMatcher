{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define user data array\n$user_data = array();\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Sanitize input\n    $username = mysqli_real_escape_string($conn, $_POST['username']);\n    $password = mysqli_real_escape_string($conn, $_POST['password']);\n\n    // Query database for user\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Get user data from query result\n        while ($row = $result->fetch_assoc()) {\n            $user_data[] = array(\n                'id' => $row['id'],\n                'username' => $row['username'],\n                'password' => $row['password']\n            );\n        }\n\n        // Check if password matches\n        if (password_verify($_POST['password'], $user_data[0]['password'])) {\n            // Login successful, set session variables\n            $_SESSION['username'] = $user_data[0]['username'];\n            $_SESSION['id'] = $user_data[0]['id'];\n\n            header(\"Location: /dashboard.php\");\n            exit();\n        } else {\n            // Incorrect password\n            echo \"Incorrect password\";\n        }\n    } else {\n        // User not found\n        echo \"User not found\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n**Note:**\n\n* This example uses the `mysqli` extension for database connections.\n* The `password_verify()` function is used to verify the password, which is hashed in the database using `password_hash()`.\n* The user data array `$user_data` contains only the necessary information for a successful login (username and id).\n* The session variables are set after a successful login.\n\n**Example Use Cases:**\n\n1. User submits the login form with correct credentials:\n\t* User is redirected to the dashboard page.\n2. User submits incorrect password:\n\t* An error message is displayed.\n3. User does not exist in database:\n\t* An error message is displayed.\n\nPlease note that this is a basic example and should be adapted to your specific needs, such as adding error handling, security measures (e.g., salting passwords), and more.", "code_blocks": ["```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database_name');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define user data array\n$user_data = array();\n\n// Check if form has been submitted\nif ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    // Sanitize input\n    $username = mysqli_real_escape_string($conn, $_POST['username']);\n    $password = mysqli_real_escape_string($conn, $_POST['password']);\n\n    // Query database for user\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Get user data from query result\n        while ($row = $result->fetch_assoc()) {\n            $user_data[] = array(\n                'id' => $row['id'],\n                'username' => $row['username'],\n                'password' => $row['password']\n            );\n        }\n\n        // Check if password matches\n        if (password_verify($_POST['password'], $user_data[0]['password'])) {\n            // Login successful, set session variables\n            $_SESSION['username'] = $user_data[0]['username'];\n            $_SESSION['id'] = $user_data[0]['id'];\n\n            header(\"Location: /dashboard.php\");\n            exit();\n        } else {\n            // Incorrect password\n            echo \"Incorrect password\";\n        }\n    } else {\n        // User not found\n        echo \"User not found\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```"]}
