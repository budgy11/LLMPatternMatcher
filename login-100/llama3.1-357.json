{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n================================\n\nThis example demonstrates a basic user login functionality using PHP. The code assumes you have a database set up with a `users` table containing columns for `username`, `password` (hashed), and other relevant information.\n\n**Database Schema:**\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  password VARCHAR(255)\n);\n```\n\n**PHP Code:**\n```php\n<?php\n\n// Configuration settings\nrequire_once 'config.php';\n\n// Function to login a user\nfunction loginUser($username, $password) {\n  // Query database for user with matching username\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($GLOBALS['db'], $query);\n  \n  if ($row = mysqli_fetch_assoc($result)) {\n    // Hashed password stored in db, so we hash the input as well\n    $inputPassword = hash('sha256', $password);\n    \n    if ($inputPassword === $row['password']) {\n      // Login successful, return user data\n      return array(\n        'id' => $row['id'],\n        'username' => $row['username']\n      );\n    } else {\n      echo \"Invalid password\";\n    }\n  } else {\n    echo \"User not found\";\n  }\n  \n  return false;\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$result = loginUser($username, $password);\n\nif ($result) {\n  // User logged in successfully\n  session_start();\n  $_SESSION['user_id'] = $result['id'];\n  $_SESSION['username'] = $result['username'];\n  \n  echo \"Welcome, {$result['username']}!\";\n} else {\n  echo \"Login failed\";\n}\n\n?>\n```\n\n**config.php (for database connection):**\n```php\n<?php\n\n// Database configuration settings\n$server = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database';\n\n// Create a database connection object\n$conn = mysqli_connect($server, $username, $password);\nif (!$conn) {\n  die('Connection failed: '.mysqli_error($conn));\n}\n\n// Select the database\nmysqli_select_db($conn, $dbname);\n\n// Store the database connection for later use\n$db = array(\n  'connection' => $conn,\n  'selectdb' => mysqli_select_db\n);\n\n?>\n```\n\n**Security Notes:**\n\n1. **Never store passwords in plain text**. Always hash and salt user input before storing it.\n2. **Use prepared statements or parameterized queries** to prevent SQL injection attacks.\n3. **Limit database privileges** for the user running this script.\n\nThis example provides a basic login functionality using PHP. However, please note that this is not an exhaustive guide and you should consider implementing additional security measures (e.g., password salting, rate limiting, etc.) based on your specific use case.", "code_blocks": [null, "```php\n<?php\n\n// Configuration settings\nrequire_once 'config.php';\n\n// Function to login a user\nfunction loginUser($username, $password) {\n  // Query database for user with matching username\n  $query = \"SELECT * FROM users WHERE username = '$username'\";\n  $result = mysqli_query($GLOBALS['db'], $query);\n  \n  if ($row = mysqli_fetch_assoc($result)) {\n    // Hashed password stored in db, so we hash the input as well\n    $inputPassword = hash('sha256', $password);\n    \n    if ($inputPassword === $row['password']) {\n      // Login successful, return user data\n      return array(\n        'id' => $row['id'],\n        'username' => $row['username']\n      );\n    } else {\n      echo \"Invalid password\";\n    }\n  } else {\n    echo \"User not found\";\n  }\n  \n  return false;\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$result = loginUser($username, $password);\n\nif ($result) {\n  // User logged in successfully\n  session_start();\n  $_SESSION['user_id'] = $result['id'];\n  $_SESSION['username'] = $result['username'];\n  \n  echo \"Welcome, {$result['username']}!\";\n} else {\n  echo \"Login failed\";\n}\n\n?>\n```", "```php\n<?php\n\n// Database configuration settings\n$server = 'localhost';\n$username = 'your_username';\n$password = 'your_password';\n$dbname = 'your_database';\n\n// Create a database connection object\n$conn = mysqli_connect($server, $username, $password);\nif (!$conn) {\n  die('Connection failed: '.mysqli_error($conn));\n}\n\n// Select the database\nmysqli_select_db($conn, $dbname);\n\n// Store the database connection for later use\n$db = array(\n  'connection' => $conn,\n  'selectdb' => mysqli_select_db\n);\n\n?>\n```"]}
