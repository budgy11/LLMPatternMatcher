{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration settings\n$database = array(\n  'host' => 'localhost',\n  'username' => 'your_username',\n  'password' => 'your_password',\n  'database_name' => 'your_database_name'\n);\n\n// Connect to the database\n$conn = mysqli_connect($database['host'], $database['username'], $database['password']);\n\nif (!$conn) {\n  die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n// Select the database\nmysqli_select_db($conn, $database['database_name']);\n\nfunction login_user() {\n  // Get the user's input data\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Hash the password (using SHA-256 in this example)\n  $hashed_password = hash('sha256', $password);\n\n  // SQL query to check if the username and hashed password match a row in the database\n  $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) == 1) {\n    // Login successful! Get the user's ID and create a session for them\n    $user_data = mysqli_fetch_assoc($result);\n    $_SESSION['user_id'] = $user_data['id'];\n    $_SESSION['username'] = $username;\n    header('Location: dashboard.php');\n    exit();\n  } else {\n    // Login failed! Display an error message\n    echo 'Invalid username or password';\n  }\n}\n\n// Check if the form has been submitted (i.e., when the user clicks the login button)\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  login_user();\n}\n?>\n```\n**index.php**\n```php\n<?php\ninclude 'login.php';\n\nif (isset($_SESSION['user_id'])) {\n  echo 'Welcome, ' . $_SESSION['username'];\n} else {\n?>\n<form action=\"\" method=\"post\">\n  <label>Username:</label>\n  <input type=\"text\" name=\"username\"><br><br>\n  <label>Password:</label>\n  <input type=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\">Login</button>\n</form>\n<?php\n}\n?>\n```\n**dashboard.php**\n```php\n<?php\ninclude 'login.php';\n\n// Check if the user is logged in\nif (!isset($_SESSION['user_id'])) {\n  header('Location: index.php');\n  exit();\n}\n\necho 'Welcome, ' . $_SESSION['username'];\n?>\n```\nThis example uses a simple MySQL database to store users and their hashed passwords. The `login_user()` function checks if the username and password match a row in the database by hashing the inputted password and comparing it with the stored hash.\n\nNote that this is a basic example and should not be used in production without proper security measures (e.g., hashing, salting, etc.).\n\nAlso, make sure to replace the placeholders (`your_username`, `your_password`, etc.) with your actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$database = array(\n  'host' => 'localhost',\n  'username' => 'your_username',\n  'password' => 'your_password',\n  'database_name' => 'your_database_name'\n);\n\n// Connect to the database\n$conn = mysqli_connect($database['host'], $database['username'], $database['password']);\n\nif (!$conn) {\n  die(\"Connection failed: \" . mysqli_connect_error());\n}\n\n// Select the database\nmysqli_select_db($conn, $database['database_name']);\n\nfunction login_user() {\n  // Get the user's input data\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  // Hash the password (using SHA-256 in this example)\n  $hashed_password = hash('sha256', $password);\n\n  // SQL query to check if the username and hashed password match a row in the database\n  $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$hashed_password'\";\n  $result = mysqli_query($conn, $query);\n\n  if (mysqli_num_rows($result) == 1) {\n    // Login successful! Get the user's ID and create a session for them\n    $user_data = mysqli_fetch_assoc($result);\n    $_SESSION['user_id'] = $user_data['id'];\n    $_SESSION['username'] = $username;\n    header('Location: dashboard.php');\n    exit();\n  } else {\n    // Login failed! Display an error message\n    echo 'Invalid username or password';\n  }\n}\n\n// Check if the form has been submitted (i.e., when the user clicks the login button)\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n  login_user();\n}\n?>\n```", "```php\n<?php\ninclude 'login.php';\n\nif (isset($_SESSION['user_id'])) {\n  echo 'Welcome, ' . $_SESSION['username'];\n} else {\n?>\n<form action=\"\" method=\"post\">\n  <label>Username:</label>\n  <input type=\"text\" name=\"username\"><br><br>\n  <label>Password:</label>\n  <input type=\"password\" name=\"password\"><br><br>\n  <button type=\"submit\">Login</button>\n</form>\n<?php\n}\n?>\n```", "```php\n<?php\ninclude 'login.php';\n\n// Check if the user is logged in\nif (!isset($_SESSION['user_id'])) {\n  header('Location: index.php');\n  exit();\n}\n\necho 'Welcome, ' . $_SESSION['username'];\n?>\n```"]}
