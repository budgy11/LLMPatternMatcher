{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login system in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Connect to database\n$conn = new mysqli($host, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define variables for form data\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Escape user input to prevent SQL injection\n$username = mysqli_real_escape_string($conn, $username);\n$password = mysqli_real_escape_string($conn, $password);\n\n// Query the database\n$query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n$result = $conn->query($query);\n\n// Check if user exists and password is correct\nif ($result->num_rows > 0) {\n    // User exists, log them in\n    session_start();\n    $_SESSION['username'] = $username;\n    header('Location: index.php');\n} else {\n    // Incorrect username or password\n    echo \"Incorrect username or password\";\n}\n\n// Close database connection\n$conn->close();\n?>\n```\n**index.php**\n```php\n<?php\nsession_start();\n\nif (isset($_SESSION['username'])) {\n    // User is logged in, display welcome message\n    echo \"Welcome, \" . $_SESSION['username'] . \"!\";\n\n    // Display logout link\n    echo \"<a href='logout.php'>Logout</a>\";\n} else {\n    // User is not logged in, display login form\n    ?>\n    <form action=\"login.php\" method=\"post\">\n        Username: <input type=\"text\" name=\"username\"><br>\n        Password: <input type=\"password\" name=\"password\"><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n?>\n```\n**logout.php**\n```php\n<?php\nsession_start();\nsession_destroy();\nheader('Location: index.php');\n?>\n```\nHere's a breakdown of the code:\n\n1. **login.php**: This script handles user login requests. It connects to the database, escapes user input to prevent SQL injection, and queries the database for the existence of a user with the provided username and password.\n2. **index.php**: This script checks if the user is logged in by checking for a session variable. If they are logged in, it displays a welcome message and a logout link. Otherwise, it displays a login form.\n3. **logout.php**: This script logs out the user by destroying their session.\n\nNote that this is a simple example and you should consider implementing additional security measures such as:\n\n* Hashing passwords instead of storing them in plain text\n* Using prepared statements to prevent SQL injection\n* Implementing account lockout policies", "code_blocks": ["```php\n<?php\n// Configuration\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Connect to database\n$conn = new mysqli($host, $username, $password, $dbname);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Define variables for form data\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Escape user input to prevent SQL injection\n$username = mysqli_real_escape_string($conn, $username);\n$password = mysqli_real_escape_string($conn, $password);\n\n// Query the database\n$query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n$result = $conn->query($query);\n\n// Check if user exists and password is correct\nif ($result->num_rows > 0) {\n    // User exists, log them in\n    session_start();\n    $_SESSION['username'] = $username;\n    header('Location: index.php');\n} else {\n    // Incorrect username or password\n    echo \"Incorrect username or password\";\n}\n\n// Close database connection\n$conn->close();\n?>\n```", "```php\n<?php\nsession_start();\n\nif (isset($_SESSION['username'])) {\n    // User is logged in, display welcome message\n    echo \"Welcome, \" . $_SESSION['username'] . \"!\";\n\n    // Display logout link\n    echo \"<a href='logout.php'>Logout</a>\";\n} else {\n    // User is not logged in, display login form\n    ?>\n    <form action=\"login.php\" method=\"post\">\n        Username: <input type=\"text\" name=\"username\"><br>\n        Password: <input type=\"password\" name=\"password\"><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n?>\n```", "```php\n<?php\nsession_start();\nsession_destroy();\nheader('Location: index.php');\n?>\n```"]}
