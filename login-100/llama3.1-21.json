{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Define the database connection parameters\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a connection to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if the connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the input values from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare a SQL query to select the user from the database\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username=? AND password=?\");\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute the query\n    if ($stmt->execute()) {\n        // Get the result of the query\n        $result = $stmt->get_result();\n\n        // Check if a user was found\n        if ($result->num_rows > 0) {\n            // User exists, log them in\n            session_start();\n            $_SESSION['username'] = $username;\n            header(\"Location: dashboard.php\");\n            exit();\n        } else {\n            // User does not exist or password is incorrect\n            echo \"Invalid username or password.\";\n        }\n    } else {\n        echo \"Error executing query: \" . $stmt->error;\n    }\n\n    // Close the statement and connection\n    $stmt->close();\n    $conn->close();\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    login_user();\n} else {\n    echo \"<form action='' method='post'>\";\n    echo \"Username: <input type='text' name='username'><br>\";\n    echo \"Password: <input type='password' name='password'><br>\";\n    echo \"<input type='submit' name='submit' value='Login'>\";\n    echo \"</form>\";\n}\n\n?>\n```\n**Explanation**\n\nThis script uses the `mysqli` extension to connect to a MySQL database. It defines two functions:\n\n* `login_user()`: This function takes the username and password from the form input, prepares a SQL query to select the user from the database, executes the query, and checks if a user was found. If a user exists, it starts a new session and redirects the user to the dashboard page.\n* The main script: It checks if the form has been submitted (i.e., if the `submit` button has been clicked). If so, it calls the `login_user()` function. Otherwise, it displays a login form.\n\n**Security Notes**\n\nThis is a very basic example and should not be used in production without modifications to improve security:\n\n* Use prepared statements with parameterized queries to prevent SQL injection.\n* Hash passwords using a secure hashing algorithm (e.g., `password_hash()`) and store the hashed password in the database.\n* Use HTTPS (SSL/TLS) to encrypt communication between the client and server.\n\n**Remember**: This is just an example, you should modify it to fit your specific needs.", "code_blocks": ["```php\n<?php\n\n// Define the database connection parameters\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a connection to the database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n// Check if the connection was successful\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    // Get the input values from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare a SQL query to select the user from the database\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username=? AND password=?\");\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute the query\n    if ($stmt->execute()) {\n        // Get the result of the query\n        $result = $stmt->get_result();\n\n        // Check if a user was found\n        if ($result->num_rows > 0) {\n            // User exists, log them in\n            session_start();\n            $_SESSION['username'] = $username;\n            header(\"Location: dashboard.php\");\n            exit();\n        } else {\n            // User does not exist or password is incorrect\n            echo \"Invalid username or password.\";\n        }\n    } else {\n        echo \"Error executing query: \" . $stmt->error;\n    }\n\n    // Close the statement and connection\n    $stmt->close();\n    $conn->close();\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    login_user();\n} else {\n    echo \"<form action='' method='post'>\";\n    echo \"Username: <input type='text' name='username'><br>\";\n    echo \"Password: <input type='password' name='password'><br>\";\n    echo \"<input type='submit' name='submit' value='Login'>\";\n    echo \"</form>\";\n}\n\n?>\n```"]}
