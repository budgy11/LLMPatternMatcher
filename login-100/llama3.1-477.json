{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\n### Requirements\n\n* PHP 7.2 or higher\n* Database (e.g., MySQL) for storing user credentials\n\n### Code\n\n```php\n<?php\n\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a database connection\nfunction connect_to_db() {\n    global $db_host, $db_username, $db_password, $db_name;\n    $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Check user credentials and login\nfunction user_login($username, $password) {\n    global $db_host, $db_username, $db_password, $db_name;\n\n    // Create a database connection\n    $conn = connect_to_db();\n\n    // Query to retrieve user data\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Retrieve user data\n        $row = $result->fetch_assoc();\n        $hashed_password = $row['password'];\n\n        // Verify password\n        if (password_verify($password, $hashed_password)) {\n            // Login successful\n            $_SESSION['username'] = $username;\n            $_SESSION['logged_in'] = true;\n            header('Location: /dashboard'); // Redirect to dashboard after login\n            exit();\n        } else {\n            echo 'Invalid password';\n        }\n    } else {\n        echo 'Username not found';\n    }\n\n    // Close database connection\n    $conn->close();\n}\n\n// Call the user_login function on form submission\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    user_login($_POST['username'], $_POST['password']);\n}\n```\n\n### Example Use Case\n\n1. Create a HTML form to collect user credentials:\n```html\n<form action=\"\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\">Login</button>\n</form>\n```\n2. On form submission, the `user_login` function is called with the submitted username and password.\n\n### Security Notes\n\n* **Hash passwords**: Always hash user passwords before storing them in the database using a library like PHP's built-in `password_hash()` function.\n* **Validate user input**: Sanitize and validate all user input to prevent SQL injection attacks.\n* **Use prepared statements**: Use prepared statements with parameterized queries to further improve security.\n\nRemember to replace placeholders (`your_username`, `your_password`, etc.) with actual database credentials.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a database connection\nfunction connect_to_db() {\n    global $db_host, $db_username, $db_password, $db_name;\n    $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Check user credentials and login\nfunction user_login($username, $password) {\n    global $db_host, $db_username, $db_password, $db_name;\n\n    // Create a database connection\n    $conn = connect_to_db();\n\n    // Query to retrieve user data\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // Retrieve user data\n        $row = $result->fetch_assoc();\n        $hashed_password = $row['password'];\n\n        // Verify password\n        if (password_verify($password, $hashed_password)) {\n            // Login successful\n            $_SESSION['username'] = $username;\n            $_SESSION['logged_in'] = true;\n            header('Location: /dashboard'); // Redirect to dashboard after login\n            exit();\n        } else {\n            echo 'Invalid password';\n        }\n    } else {\n        echo 'Username not found';\n    }\n\n    // Close database connection\n    $conn->close();\n}\n\n// Call the user_login function on form submission\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    user_login($_POST['username'], $_POST['password']);\n}\n```", null]}
