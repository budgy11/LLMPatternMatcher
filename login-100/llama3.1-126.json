{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    // Prepare query\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists and login credentials are correct\n    return ($result && $result->num_rows > 0);\n}\n\n// Function to get user data (optional)\nfunction get_user_data($username) {\n    // Prepare query\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind parameter\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Return user data if user exists\n    return ($result && $result->num_rows > 0) ? $result->fetch_assoc() : false;\n}\n\n// Check login form submission\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Check if username and password are not empty\n    if (!empty($username) && !empty($password)) {\n        // Hash password for comparison (optional)\n        $hashed_password = md5($password);\n        \n        // Check user login credentials\n        if (check_login($username, $hashed_password)) {\n            // User logged in successfully!\n            echo \"Logged in successfully!\";\n            \n            // Get user data (optional)\n            $user_data = get_user_data($username);\n            echo \"User data: \";\n            print_r($user_data);\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    } else {\n        echo \"Please enter both username and password.\";\n    }\n}\n\n// Close database connection\n$mysqli->close();\n?>\n```\n**Example use case**\n\nCreate a simple login form (`login.html`):\n```html\n<form action=\"login.php\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```\nSubmit the form, and the PHP script will check the login credentials. If successful, it will display a success message and retrieve user data (if enabled).\n\n**Security note**\n\nThis example uses MD5 for password hashing, which is not recommended in production environments due to its weak security. Consider using a more secure hashing algorithm like bcrypt or Argon2. Additionally, this example does not implement any form of authentication token or session management; consider implementing these features to enhance security.\n\nI hope this helps! Let me know if you have any questions or need further assistance.", "code_blocks": ["```php\n<?php\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$mysqli = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n}\n\n// Function to check user login credentials\nfunction check_login($username, $password) {\n    // Prepare query\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists and login credentials are correct\n    return ($result && $result->num_rows > 0);\n}\n\n// Function to get user data (optional)\nfunction get_user_data($username) {\n    // Prepare query\n    $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind parameter\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Return user data if user exists\n    return ($result && $result->num_rows > 0) ? $result->fetch_assoc() : false;\n}\n\n// Check login form submission\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Check if username and password are not empty\n    if (!empty($username) && !empty($password)) {\n        // Hash password for comparison (optional)\n        $hashed_password = md5($password);\n        \n        // Check user login credentials\n        if (check_login($username, $hashed_password)) {\n            // User logged in successfully!\n            echo \"Logged in successfully!\";\n            \n            // Get user data (optional)\n            $user_data = get_user_data($username);\n            echo \"User data: \";\n            print_r($user_data);\n        } else {\n            echo \"Invalid username or password.\";\n        }\n    } else {\n        echo \"Please enter both username and password.\";\n    }\n}\n\n// Close database connection\n$mysqli->close();\n?>\n```", null]}
