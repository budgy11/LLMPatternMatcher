{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a basic user login system using PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to handle user login\nfunction login_user($username, $password) {\n    // Prepare query to select user data from database\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    \n    // Create a prepared statement object\n    $stmt = db_connect()->prepare($sql);\n    \n    // Bind the parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists and password is correct\n    if ($result->num_rows == 1) {\n        // User found, get the data from the row\n        $user_data = $result->fetch_assoc();\n        \n        // Create session variables to store user data\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['id'] = $user_data['id'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    // Get user input from form\n    $username = $_POST['username'];\n    $password = md5($_POST['password']); // Hash password for security\n    \n    // Call login_user function to check if user exists and password is correct\n    if (login_user($username, $password)) {\n        header(\"Location: dashboard.php\");\n        exit;\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n?>\n```\n\n**HTML Form**\n```html\n<form action=\"\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\" required></br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\" required></br>\n    <button type=\"submit\" name=\"submit\">Login</button>\n</form>\n```\n**Explanation:**\n\nThis script uses the `mysqli` extension to connect to a MySQL database. The `login_user` function takes two parameters, `$username` and `$password`, which are used to query the database for matching user data.\n\nThe form submission is checked using `isset($_POST['submit'])`. If it's true, we get the user input from the form and hash the password using `md5()` for security. We then call the `login_user` function with these parameters.\n\nIf the user exists and the password is correct, a session variable is created to store the user data and we redirect them to the dashboard page (`dashboard.php`). If not, an error message is displayed.\n\n**Remember:**\n\n*   Replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n*   Use a secure method of hashing passwords (e.g., `password_hash()` in PHP 5.5+) instead of `md5()`.\n*   This is a basic example, you may want to add more security measures like rate limiting or using tokens.\n\nPlease note that this code has been simplified and might not be suitable for production use without further modifications.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    return $conn;\n}\n\n// Function to handle user login\nfunction login_user($username, $password) {\n    // Prepare query to select user data from database\n    $sql = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    \n    // Create a prepared statement object\n    $stmt = db_connect()->prepare($sql);\n    \n    // Bind the parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    // Check if user exists and password is correct\n    if ($result->num_rows == 1) {\n        // User found, get the data from the row\n        $user_data = $result->fetch_assoc();\n        \n        // Create session variables to store user data\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['id'] = $user_data['id'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check if the form has been submitted\nif (isset($_POST['submit'])) {\n    // Get user input from form\n    $username = $_POST['username'];\n    $password = md5($_POST['password']); // Hash password for security\n    \n    // Call login_user function to check if user exists and password is correct\n    if (login_user($username, $password)) {\n        header(\"Location: dashboard.php\");\n        exit;\n    } else {\n        echo \"Invalid username or password\";\n    }\n}\n\n?>\n```", null]}
