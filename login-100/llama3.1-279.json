{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login function in PHP. This example includes the basic logic for logging in and also error handling.\n\n### User Login Function (`login.php`)\n\n```php\n<?php\n\n// Configuration constants\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connection to database\nfunction dbConnect() {\n    try {\n        $conn = new PDO(\"mysql:host=\".DB_HOST.\";dbname=\".DB_NAME, DB_USERNAME, DB_PASSWORD);\n        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n        return $conn;\n    } catch (PDOException $e) {\n        echo 'ERROR: Unable to connect. '. $e->getMessage();\n        exit();\n    }\n}\n\nfunction login($username, $password) {\n    try {\n        // Connect to database\n        $db = dbConnect();\n\n        // Query for user\n        $stmt = $db->prepare('SELECT * FROM users WHERE username = :username');\n        $stmt->execute([':username' => $username]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($user && password_verify($password, $user['password'])) {\n            // Login successful, store user data in session\n            $_SESSION['username'] = $username;\n            $_SESSION['id'] = $user['id'];\n            return true;\n        } else {\n            throw new Exception('Invalid username or password');\n        }\n    } catch (PDOException $e) {\n        echo 'ERROR: '. $e->getMessage();\n        exit();\n    } catch (Exception $e) {\n        echo 'Error: ' . $e->getMessage() . '<br>';\n        return false;\n    }\n}\n\n?>\n```\n\n### Example Usage (`index.php`)\n\n```php\n<?php\nsession_start();\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Retrieve form input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (login($username, $password)) {\n        echo 'Login successful';\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```\n\nThis example assumes you have a `users` table in your database with `id`, `username`, and `password` columns. The password is hashed before storing it using PHP's built-in `password_hash()` function.\n\nRemember to replace `'your_database'`, `'your_username'`, and `'your_password'` placeholders with actual database credentials.\n\n**Security Note:** This example uses `password_verify()` for secure password comparison. Always use a secure hashing method like bcrypt, PBKDF2, or Argon2 for storing passwords in your database.", "code_blocks": ["```php\n<?php\n\n// Configuration constants\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connection to database\nfunction dbConnect() {\n    try {\n        $conn = new PDO(\"mysql:host=\".DB_HOST.\";dbname=\".DB_NAME, DB_USERNAME, DB_PASSWORD);\n        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n        return $conn;\n    } catch (PDOException $e) {\n        echo 'ERROR: Unable to connect. '. $e->getMessage();\n        exit();\n    }\n}\n\nfunction login($username, $password) {\n    try {\n        // Connect to database\n        $db = dbConnect();\n\n        // Query for user\n        $stmt = $db->prepare('SELECT * FROM users WHERE username = :username');\n        $stmt->execute([':username' => $username]);\n        $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n        if ($user && password_verify($password, $user['password'])) {\n            // Login successful, store user data in session\n            $_SESSION['username'] = $username;\n            $_SESSION['id'] = $user['id'];\n            return true;\n        } else {\n            throw new Exception('Invalid username or password');\n        }\n    } catch (PDOException $e) {\n        echo 'ERROR: '. $e->getMessage();\n        exit();\n    } catch (Exception $e) {\n        echo 'Error: ' . $e->getMessage() . '<br>';\n        return false;\n    }\n}\n\n?>\n```", "```php\n<?php\nsession_start();\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Retrieve form input\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (login($username, $password)) {\n        echo 'Login successful';\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n?>\n\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```"]}
