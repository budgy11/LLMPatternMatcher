{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a user login function written in PHP. This function uses a simple username and password verification mechanism, but you should never use this in production without proper security measures (e.g., hashing passwords).\n\n### `user_login.php`\n\n```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    \n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    \n    return $conn;\n}\n\n// Function to check user credentials\nfunction check_credentials($username, $password) {\n    $conn = db_connect();\n    \n    // Prepare the SQL query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind the parameter\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute the query\n    $stmt->execute();\n    \n    // Fetch the result\n    $result = $stmt->get_result();\n    \n    // Check if a matching user exists\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            if (password_verify($password, $row['password'])) {\n                return true;\n            }\n        }\n    }\n    \n    return false;\n}\n\n// Function to login the user\nfunction user_login($username, $password) {\n    if (check_credentials($username, $password)) {\n        // Successful login - set session variables\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    if (user_login($username, $password)) {\n        echo \"You are now logged in as $username!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n?>\n```\n\n### Security Notes:\n\n*   **Hashing passwords**: This example uses `password_verify()`, which is a secure way to verify passwords. However, for storing hashed passwords, use `password_hash()` instead of plain hashing.\n*   **Session management**: Never store sensitive data like passwords in session variables.\n*   **SQL injection protection**: Use prepared statements with parameter binding to prevent SQL injection attacks.\n\n**Example Usage:**\n\nTo test the `user_login` function, create a simple HTML form:\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login Example</title>\n</head>\n<body>\n\n<form action=\"\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\" name=\"login\">Login</button>\n</form>\n\n<?php include 'user_login.php'; ?>\n\n</body>\n</html>\n```\n\n**Commit message:**\n\n`feat(user_login): Added user login function with basic security measures in place.`", "code_blocks": ["```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n    $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n    \n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n    \n    return $conn;\n}\n\n// Function to check user credentials\nfunction check_credentials($username, $password) {\n    $conn = db_connect();\n    \n    // Prepare the SQL query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind the parameter\n    $stmt->bind_param(\"s\", $username);\n    \n    // Execute the query\n    $stmt->execute();\n    \n    // Fetch the result\n    $result = $stmt->get_result();\n    \n    // Check if a matching user exists\n    if ($result->num_rows > 0) {\n        while ($row = $result->fetch_assoc()) {\n            if (password_verify($password, $row['password'])) {\n                return true;\n            }\n        }\n    }\n    \n    return false;\n}\n\n// Function to login the user\nfunction user_login($username, $password) {\n    if (check_credentials($username, $password)) {\n        // Successful login - set session variables\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    if (user_login($username, $password)) {\n        echo \"You are now logged in as $username!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n?>\n```", null]}
