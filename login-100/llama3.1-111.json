{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check username and password\nfunction login_user($username, $password) {\n    // SQL query to select user from database\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($sql);\n    \n    // Check if result is true (i.e., user exists and password is correct)\n    if ($result->num_rows > 0) {\n        // Get user data from database\n        while($row = $result->fetch_assoc()) {\n            return array(\n                'id' => $row['id'],\n                'username' => $row['username']\n            );\n        }\n    } else {\n        // Return null if user does not exist or password is incorrect\n        return null;\n    }\n}\n\n// Check for POST request and call login_user function\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Call login_user function\n    $user_data = login_user($username, $password);\n    \n    if ($user_data !== null) {\n        // If user is logged in, set session variables and redirect to dashboard\n        session_start();\n        $_SESSION['id'] = $user_data['id'];\n        $_SESSION['username'] = $user_data['username'];\n        \n        header('Location: dashboard.php');\n        exit;\n    } else {\n        // Display login error message if user is not logged in\n        echo \"Invalid username or password\";\n    }\n}\n\n// Close connection to database\n$conn->close();\n\n?>\n```\n**index.php**\n```php\n<?php\n// Include login function file\nrequire_once 'login.php';\n\n// Check for GET request and display login form\nif (isset($_GET['action']) && $_GET['action'] == 'login') {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n} else {\n    // Display login button and link to registration page\n    ?>\n    <a href=\"?action=login\">Login</a> | <a href=\"register.php\">Register</a>\n    <?php\n}\n?>\n```\nThis example assumes you have a `users` table in your database with columns for `id`, `username`, and `password`.\n\nHere's how it works:\n\n1. The user submits the login form.\n2. The PHP script checks if the POST request is for login and calls the `login_user` function with the username and password from the form data.\n3. The `login_user` function connects to the database, executes a SQL query to select the user from the database based on the provided username and password, and returns an array of user data if the user exists and password is correct.\n4. If the user is logged in, the script sets session variables for the user's ID and username, redirects to the dashboard page, and closes the connection to the database.\n\nNote: This example does not include any error handling or security measures such as hashing passwords, validating form data, or checking for SQL injection attempts. You should consider adding these features to make your login function more secure.", "code_blocks": ["```php\n<?php\n\n// Configuration\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check username and password\nfunction login_user($username, $password) {\n    // SQL query to select user from database\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($sql);\n    \n    // Check if result is true (i.e., user exists and password is correct)\n    if ($result->num_rows > 0) {\n        // Get user data from database\n        while($row = $result->fetch_assoc()) {\n            return array(\n                'id' => $row['id'],\n                'username' => $row['username']\n            );\n        }\n    } else {\n        // Return null if user does not exist or password is incorrect\n        return null;\n    }\n}\n\n// Check for POST request and call login_user function\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Call login_user function\n    $user_data = login_user($username, $password);\n    \n    if ($user_data !== null) {\n        // If user is logged in, set session variables and redirect to dashboard\n        session_start();\n        $_SESSION['id'] = $user_data['id'];\n        $_SESSION['username'] = $user_data['username'];\n        \n        header('Location: dashboard.php');\n        exit;\n    } else {\n        // Display login error message if user is not logged in\n        echo \"Invalid username or password\";\n    }\n}\n\n// Close connection to database\n$conn->close();\n\n?>\n```", "```php\n<?php\n// Include login function file\nrequire_once 'login.php';\n\n// Check for GET request and display login form\nif (isset($_GET['action']) && $_GET['action'] == 'login') {\n    ?>\n    <form action=\"\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n} else {\n    // Display login button and link to registration page\n    ?>\n    <a href=\"?action=login\">Login</a> | <a href=\"register.php\">Register</a>\n    <?php\n}\n?>\n```"]}
