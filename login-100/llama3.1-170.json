{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n// Configuration variables\n$database_host = 'localhost';\n$database_username = 'your_database_username';\n$database_password = 'your_database_password';\n$database_name = 'your_database_name';\n\n// Connect to the database\n$conn = new mysqli($database_host, $database_username, $database_password, $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Retrieve the username and password from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare the SQL query to select the user's data from the database\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '\".md5($password).\"'\";\n\n    // Execute the query\n    $result = $conn->query($sql);\n\n    // Check if there are any results\n    if ($result->num_rows > 0) {\n        // Get the user's data from the result set\n        $row = $result->fetch_assoc();\n\n        // Set the session variables for the logged in user\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['password'] = md5($password);\n\n        // Redirect to a protected page (e.g. admin.php)\n        header('Location: admin.php');\n        exit;\n    } else {\n        // Display an error message if the username or password is incorrect\n        echo 'Incorrect username or password';\n    }\n}\n\n// Close the database connection\n$conn->close();\n?>\n```\n**index.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Form</title>\n</head>\n<body>\n    <form action=\"login.php\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n</body>\n</html>\n```\n**admin.php**\n```php\n<?php\n// Check if the user is logged in (session variables set)\nif (!isset($_SESSION['username'])) {\n    header('Location: index.html');\n    exit;\n}\n\n// Display a welcome message for the logged in user\necho 'Welcome, ' . $_SESSION['username'] . '!';\n?>\n```\n**Explanation**\n\n* The `login.php` script connects to the database using mysqli and retrieves the username and password from the form submission.\n* It then checks if there are any results in the result set. If there is one or more rows returned (i.e., the username and password match), it sets the session variables for the logged in user and redirects them to a protected page (`admin.php`).\n* The `index.html` script displays a simple login form that submits the data to the `login.php` script.\n* The `admin.php` script checks if the user is logged in (session variables set) before displaying a welcome message.\n\n**Security Notes**\n\n* This example uses MD5 hashing for password storage, which is not recommended due to its vulnerability to collisions and brute-force attacks. Consider using a more secure method like bcrypt or PBKDF2.\n* Always validate and sanitize form data before submitting it to the database or storing it in session variables.\n* Never store passwords in plain text; always hash them using a secure algorithm.\n\n**Testing**\n\n* Save all files (login.php, index.html, admin.php) in the same directory.\n* Open `index.html` in your web browser and fill out the form with a valid username and password. If everything is set up correctly, you should be redirected to `admin.php`.", "code_blocks": ["```php\n<?php\n// Configuration variables\n$database_host = 'localhost';\n$database_username = 'your_database_username';\n$database_password = 'your_database_password';\n$database_name = 'your_database_name';\n\n// Connect to the database\n$conn = new mysqli($database_host, $database_username, $database_password, $database_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n\n    // Retrieve the username and password from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Prepare the SQL query to select the user's data from the database\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '\".md5($password).\"'\";\n\n    // Execute the query\n    $result = $conn->query($sql);\n\n    // Check if there are any results\n    if ($result->num_rows > 0) {\n        // Get the user's data from the result set\n        $row = $result->fetch_assoc();\n\n        // Set the session variables for the logged in user\n        $_SESSION['username'] = $row['username'];\n        $_SESSION['password'] = md5($password);\n\n        // Redirect to a protected page (e.g. admin.php)\n        header('Location: admin.php');\n        exit;\n    } else {\n        // Display an error message if the username or password is incorrect\n        echo 'Incorrect username or password';\n    }\n}\n\n// Close the database connection\n$conn->close();\n?>\n```", null, "```php\n<?php\n// Check if the user is logged in (session variables set)\nif (!isset($_SESSION['username'])) {\n    header('Location: index.html');\n    exit;\n}\n\n// Display a welcome message for the logged in user\necho 'Welcome, ' . $_SESSION['username'] . '!';\n?>\n```"]}
