{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n\n// Database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check user login credentials\nfunction checkUserLogin($username, $password) {\n    global $conn;\n\n    // SQL query to select user data from database\n    $sql = \"SELECT * FROM users WHERE username='$username' AND password=PASSWORD('$password')\";\n\n    // Execute query and get result\n    $result = $conn->query($sql);\n\n    // Check if result is not empty\n    if ($result->num_rows > 0) {\n        // Return user data as an array\n        return $result->fetch_array(MYSQLI_ASSOC);\n    } else {\n        return false;\n    }\n}\n\n// Function to login user\nfunction loginUser() {\n    global $conn;\n\n    // Get form input values\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Check if username and password are set\n    if (empty($username) || empty($password)) {\n        return false;\n    }\n\n    // Call checkUserLogin function to verify credentials\n    $userData = checkUserLogin($username, $password);\n\n    // If user data is returned, login the user\n    if ($userData !== false) {\n        session_start();\n        $_SESSION['username'] = $username;\n        $_SESSION['logged_in'] = true;\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Login form handler\nif (isset($_POST['submit'])) {\n    // Call loginUser function to check login credentials\n    if (loginUser()) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n?>\n```\n**index.html**\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title>Login Form</title>\n</head>\n<body>\n    <form action=\"login.php\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n</body>\n</html>\n```\nThis code defines two functions: `checkUserLogin` and `loginUser`. The `checkUserLogin` function takes the username and password as arguments, queries the database to verify the credentials, and returns the user data if the credentials are valid. The `loginUser` function gets the form input values from the login form, calls the `checkUserLogin` function to verify the credentials, and logs in the user using a session variable if the credentials are valid.\n\nNote that this is a very basic implementation of a login system and should not be used for production purposes without proper security measures such as password hashing and salting. Also, make sure to replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database connection settings.\n\nTo use this code:\n\n1. Save the PHP file (`login.php`) in a directory on your server.\n2. Create an `index.html` file in the same directory as above, or change the form action to point to another HTML file that contains the login form.\n3. Set up a MySQL database and create a table named `users` with columns for username, password (hashed), and any other relevant data.\n4. Update the PHP code to match your actual database connection settings.\n\nRemember to follow proper security practices when implementing a login system, such as using prepared statements or parameterized queries, and storing passwords securely using hashing and salting.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Create database connection\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check user login credentials\nfunction checkUserLogin($username, $password) {\n    global $conn;\n\n    // SQL query to select user data from database\n    $sql = \"SELECT * FROM users WHERE username='$username' AND password=PASSWORD('$password')\";\n\n    // Execute query and get result\n    $result = $conn->query($sql);\n\n    // Check if result is not empty\n    if ($result->num_rows > 0) {\n        // Return user data as an array\n        return $result->fetch_array(MYSQLI_ASSOC);\n    } else {\n        return false;\n    }\n}\n\n// Function to login user\nfunction loginUser() {\n    global $conn;\n\n    // Get form input values\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Check if username and password are set\n    if (empty($username) || empty($password)) {\n        return false;\n    }\n\n    // Call checkUserLogin function to verify credentials\n    $userData = checkUserLogin($username, $password);\n\n    // If user data is returned, login the user\n    if ($userData !== false) {\n        session_start();\n        $_SESSION['username'] = $username;\n        $_SESSION['logged_in'] = true;\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Login form handler\nif (isset($_POST['submit'])) {\n    // Call loginUser function to check login credentials\n    if (loginUser()) {\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n?>\n```", null]}
