{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\nrequire_once 'config.php'; // assumes config.php has database connection settings\n\nfunction login_user($username, $password) {\n    global $db; // assuming $db is the database object\n\n    // Sanitize input\n    $username = mysqli_real_escape_string($db, $username);\n    $password = mysqli_real_escape_string($db, $password);\n\n    // Query to check if user exists and password matches\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($db, $query);\n\n    // Check if query was successful\n    if (!$result) {\n        return array('error' => 'Database error');\n    }\n\n    // Get user data from result\n    $user_data = mysqli_fetch_assoc($result);\n\n    // If user exists and password matches, return user data\n    if ($user_data) {\n        return array(\n            'success' => true,\n            'username' => $user_data['username'],\n            'email' => $user_data['email']\n        );\n    } else {\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    $result = login_user($username, $password);\n\n    if ($result['success']) {\n        echo \"Welcome, $result[username]!\";\n    } else {\n        echo $result['error'];\n    }\n}\n?>\n```\n**config.php**\n```php\n<?php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$user = 'myuser';\n$password = 'mypassword';\n\n// Create database object\n$db = new mysqli($host, $user, $password, $dbname);\n\nif ($db->connect_errno) {\n    die(\"Connect failed: \" . $db->connect_error);\n}\n?>\n```\nThis code assumes you have a `config.php` file with your database connection settings. The `login_user()` function takes in two parameters, `$username` and `$password`, which are sanitized using `mysqli_real_escape_string()` to prevent SQL injection.\n\nThe function queries the database to check if the user exists and password matches. If successful, it returns an array with the user's data (`'success' => true`, `'username' => $user_data['username']`, etc.).\n\nIn the example usage section, we assume that there is a form on the page with fields for username and password. When the form is submitted, the `login_user()` function is called with the POST values as parameters.\n\nNote: This is a basic example and you should consider implementing additional security measures such as:\n\n* Hashing passwords instead of storing them plain\n* Using prepared statements to prevent SQL injection\n* Validating user input on both server-side and client-side\n* Implementing login session management", "code_blocks": ["```php\n<?php\nrequire_once 'config.php'; // assumes config.php has database connection settings\n\nfunction login_user($username, $password) {\n    global $db; // assuming $db is the database object\n\n    // Sanitize input\n    $username = mysqli_real_escape_string($db, $username);\n    $password = mysqli_real_escape_string($db, $password);\n\n    // Query to check if user exists and password matches\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = mysqli_query($db, $query);\n\n    // Check if query was successful\n    if (!$result) {\n        return array('error' => 'Database error');\n    }\n\n    // Get user data from result\n    $user_data = mysqli_fetch_assoc($result);\n\n    // If user exists and password matches, return user data\n    if ($user_data) {\n        return array(\n            'success' => true,\n            'username' => $user_data['username'],\n            'email' => $user_data['email']\n        );\n    } else {\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    $result = login_user($username, $password);\n\n    if ($result['success']) {\n        echo \"Welcome, $result[username]!\";\n    } else {\n        echo $result['error'];\n    }\n}\n?>\n```", "```php\n<?php\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$user = 'myuser';\n$password = 'mypassword';\n\n// Create database object\n$db = new mysqli($host, $user, $password, $dbname);\n\nif ($db->connect_errno) {\n    die(\"Connect failed: \" . $db->connect_error);\n}\n?>\n```"]}
