{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n```php\n// config.php (store database connection settings)\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database');\n\n// functions.php (login function)\n<?php\n\nfunction login($username, $password) {\n  // Connect to the database\n  $conn = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_error($conn));\n  }\n\n  // Prepare SQL query\n  $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n  $stmt = mysqli_prepare($conn, $query);\n\n  // Bind parameters\n  mysqli_stmt_bind_param($stmt, 'ss', $username, $password);\n\n  // Execute query\n  if (mysqli_stmt_execute($stmt)) {\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) > 0) {\n      // Login successful, return user data\n      while ($row = mysqli_fetch_assoc($result)) {\n        return array(\n          'id' => $row['id'],\n          'username' => $row['username']\n        );\n      }\n    } else {\n      // Incorrect username or password\n      return false;\n    }\n  } else {\n    // Query execution failed\n    return false;\n  }\n\n  // Close the database connection\n  mysqli_close($conn);\n}\n\n?>\n```\nYou can call this function in a PHP script like so:\n```php\n<?php\n\n// Include functions.php\nrequire 'functions.php';\n\n// Get user input\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Login user\n$userData = login($username, $password);\n\nif ($userData) {\n  // Login successful, redirect to dashboard or home page\n  header('Location: dashboard.php');\n} else {\n  // Login failed, display error message\n  echo 'Invalid username or password.';\n}\n?>\n```\nPlease note that this is a basic example and you should take steps to secure your database connection and user passwords.\n\nSecurity considerations:\n\n* Use prepared statements to prevent SQL injection attacks.\n* Store hashed versions of user passwords in the database instead of plain text passwords.\n* Implement additional security measures such as CSRF protection, session management, and secure password storage.", "code_blocks": ["```php\n// config.php (store database connection settings)\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'username');\ndefine('DB_PASSWORD', 'password');\ndefine('DB_NAME', 'database');\n\n// functions.php (login function)\n<?php\n\nfunction login($username, $password) {\n  // Connect to the database\n  $conn = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_error($conn));\n  }\n\n  // Prepare SQL query\n  $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n  $stmt = mysqli_prepare($conn, $query);\n\n  // Bind parameters\n  mysqli_stmt_bind_param($stmt, 'ss', $username, $password);\n\n  // Execute query\n  if (mysqli_stmt_execute($stmt)) {\n    $result = mysqli_stmt_get_result($stmt);\n    if (mysqli_num_rows($result) > 0) {\n      // Login successful, return user data\n      while ($row = mysqli_fetch_assoc($result)) {\n        return array(\n          'id' => $row['id'],\n          'username' => $row['username']\n        );\n      }\n    } else {\n      // Incorrect username or password\n      return false;\n    }\n  } else {\n    // Query execution failed\n    return false;\n  }\n\n  // Close the database connection\n  mysqli_close($conn);\n}\n\n?>\n```", "```php\n<?php\n\n// Include functions.php\nrequire 'functions.php';\n\n// Get user input\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n// Login user\n$userData = login($username, $password);\n\nif ($userData) {\n  // Login successful, redirect to dashboard or home page\n  header('Location: dashboard.php');\n} else {\n  // Login failed, display error message\n  echo 'Invalid username or password.';\n}\n?>\n```"]}
