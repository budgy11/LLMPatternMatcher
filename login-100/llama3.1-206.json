{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n================================\n\nBelow is an example of a simple user login function using PHP. This code includes form validation, password hashing and verification.\n\n### `login.php` file\n```php\n<?php\n\n// Configuration settings\n$databaseHost = 'localhost';\n$databaseName = 'users';\n$databaseUser = 'root';\n$databasePassword = '';\n\n// Connect to the database\n$conn = mysqli_connect($databaseHost, $databaseUser, $databasePassword, $databaseName);\n\nif (!$conn) {\n    die('Connection failed: ' . mysqli_connect_error());\n}\n\nfunction userLogin($username, $password)\n{\n    // SQL query to select user data from the database\n    $query = \"SELECT * FROM users WHERE username='$username'\";\n    \n    // Execute the query and fetch the result\n    $result = mysqli_query($conn, $query);\n    \n    if ($result) {\n        $userData = mysqli_fetch_assoc($result);\n        \n        // Check if the user exists\n        if (!empty($userData)) {\n            // Verify the password\n            if (password_verify($password, $userData['password'])) {\n                return true;  // User logged in successfully\n            } else {\n                echo 'Invalid password';\n            }\n        } else {\n            echo 'User not found';\n        }\n    } else {\n        echo 'Error: ' . mysqli_error($conn);\n    }\n\n    return false;  // Login failed\n}\n\n// Form handling function\nfunction handleLogin()\n{\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (empty($username) || empty($password)) {\n        echo 'Please fill all fields';\n    } else {\n        userLogin($username, $password);\n    }\n}\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    handleLogin();\n} elseif ($_SERVER['REQUEST_METHOD'] == 'GET') {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n\n?>\n```\n### **Important Security Notes**\n\n1.  **Hash passwords securely**: Always hash passwords using `password_hash()` and verify with `password_verify()`. Never store plain text passwords.\n2.  **Validate user input**: Ensure that user data is validated to prevent SQL injection attacks.\n3.  **Use prepared statements or parameterized queries**: This example uses a simple SQL query for demonstration purposes, but in production code, use prepared statements or parameterized queries to prevent SQL injection attacks.\n\n### Example Use Case\n\n1.  Access `login.php` in your web browser (e.g., `http://localhost/login.php`).\n2.  Fill out the login form with a valid username and password.\n3.  Submit the form by clicking the \"Login\" button.\n4.  If the credentials are correct, you will be logged in successfully.\n\nRemember to replace placeholders (`$databaseHost`, `$databaseName`, etc.) with your actual database settings.", "code_blocks": ["```php\n<?php\n\n// Configuration settings\n$databaseHost = 'localhost';\n$databaseName = 'users';\n$databaseUser = 'root';\n$databasePassword = '';\n\n// Connect to the database\n$conn = mysqli_connect($databaseHost, $databaseUser, $databasePassword, $databaseName);\n\nif (!$conn) {\n    die('Connection failed: ' . mysqli_connect_error());\n}\n\nfunction userLogin($username, $password)\n{\n    // SQL query to select user data from the database\n    $query = \"SELECT * FROM users WHERE username='$username'\";\n    \n    // Execute the query and fetch the result\n    $result = mysqli_query($conn, $query);\n    \n    if ($result) {\n        $userData = mysqli_fetch_assoc($result);\n        \n        // Check if the user exists\n        if (!empty($userData)) {\n            // Verify the password\n            if (password_verify($password, $userData['password'])) {\n                return true;  // User logged in successfully\n            } else {\n                echo 'Invalid password';\n            }\n        } else {\n            echo 'User not found';\n        }\n    } else {\n        echo 'Error: ' . mysqli_error($conn);\n    }\n\n    return false;  // Login failed\n}\n\n// Form handling function\nfunction handleLogin()\n{\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (empty($username) || empty($password)) {\n        echo 'Please fill all fields';\n    } else {\n        userLogin($username, $password);\n    }\n}\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    handleLogin();\n} elseif ($_SERVER['REQUEST_METHOD'] == 'GET') {\n    // Display login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n\n?>\n```"]}
