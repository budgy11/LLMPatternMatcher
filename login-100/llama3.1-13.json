{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Define the database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a new PDO object to connect to the database\n$dsn = \"mysql:host=$db_host;dbname=$db_name\";\n$db = new PDO($dsn, $db_username, $db_password);\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get the username and password from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password (using SHA-256 for this example)\n    $hashed_password = hash('sha256', $password);\n\n    // Query the database to get the user's details\n    $stmt = $db->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n    $user_data = $stmt->fetch();\n\n    // Check if a user was found and if their password matches\n    if ($user_data && $hashed_password == $user_data['password']) {\n        // Log the user in\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n\n        // Redirect to a protected page (e.g. dashboard.php)\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        // Display an error message if login fails\n        echo 'Invalid username or password';\n    }\n}\n\n?>\n```\n\n**index.php**\n```php\n<?php\n\n// Include the login function\nrequire_once 'login.php';\n\n?>\n\n<!-- Create a simple form for users to enter their credentials -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n<?php\n// If the user is already logged in, display a message\nif (isset($_SESSION['logged_in'])) {\n    echo 'You are now logged in as ' . $_SESSION['username'];\n}\n?>\n```\n\n**Note:**\n\n* This example uses SHA-256 to hash passwords. Consider using a more secure hashing algorithm like bcrypt or Argon2.\n* Make sure to replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n* The `dashboard.php` page is not included in this example, but you should create a separate file for it that checks if the user is logged in before displaying any sensitive content.\n\nThis code provides a basic login functionality using PHP's PDO extension. Remember to follow best practices and consider security measures such as password hashing, session management, and input validation.", "code_blocks": ["```php\n<?php\n\n// Define the database connection settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Create a new PDO object to connect to the database\n$dsn = \"mysql:host=$db_host;dbname=$db_name\";\n$db = new PDO($dsn, $db_username, $db_password);\n\n// Check if the form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get the username and password from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Hash the password (using SHA-256 for this example)\n    $hashed_password = hash('sha256', $password);\n\n    // Query the database to get the user's details\n    $stmt = $db->prepare(\"SELECT * FROM users WHERE username = :username\");\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n    $user_data = $stmt->fetch();\n\n    // Check if a user was found and if their password matches\n    if ($user_data && $hashed_password == $user_data['password']) {\n        // Log the user in\n        $_SESSION['logged_in'] = true;\n        $_SESSION['username'] = $username;\n\n        // Redirect to a protected page (e.g. dashboard.php)\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        // Display an error message if login fails\n        echo 'Invalid username or password';\n    }\n}\n\n?>\n```", "```php\n<?php\n\n// Include the login function\nrequire_once 'login.php';\n\n?>\n\n<!-- Create a simple form for users to enter their credentials -->\n<form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n\n<?php\n// If the user is already logged in, display a message\nif (isset($_SESSION['logged_in'])) {\n    echo 'You are now logged in as ' . $_SESSION['username'];\n}\n?>\n```"]}
