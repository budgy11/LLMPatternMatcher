{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a simple user login function using PHP. This code assumes that you have already set up a database with a `users` table containing the fields `id`, `username`, and `password`.\n\n**Note:** For security purposes, it's recommended to use password hashing and salting when storing passwords in your database.\n\n### Database Schema\n\n```sql\nCREATE TABLE users (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(255) NOT NULL,\n    password VARCHAR(255) NOT NULL\n);\n```\n\n### PHP Code\n\n**`login.php`:**\n```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    // Prepare query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"s\", $username);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    if ($row = $result->fetch_assoc()) {\n        // Check password (hashed)\n        if (password_verify($password, $row['password'])) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// Handle login request\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if ($login($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```\n\n### Usage\n\n1. Save this code in a file named `login.php`.\n2. Replace the placeholders (`your_username`, `your_password`, and `your_database`) with your actual database credentials.\n3. Open `login.php` in a web browser to access the login form.\n4. Enter your username and password, then submit the form.\n\nThis is a basic example of a user login function using PHP and MySQLi. Note that you should use a more secure method for storing passwords (e.g., bcrypt) instead of plain text hashing. Additionally, this code does not handle any potential errors or edge cases that may arise during execution.", "code_blocks": [null, "```php\n<?php\n\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to database\n$conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    // Prepare query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"s\", $username);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    if ($row = $result->fetch_assoc()) {\n        // Check password (hashed)\n        if (password_verify($password, $row['password'])) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// Handle login request\nif (isset($_POST['username']) && isset($_POST['password'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if ($login($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\">Login</button>\n    </form>\n    <?php\n}\n\n// Close database connection\n$conn->close();\n\n?>\n```"]}
