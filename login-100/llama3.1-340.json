{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get user input from form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Sanitize input\n    $username = mysqli_real_escape_string($conn, $username);\n    $password = mysqli_real_escape_string($conn, $password);\n\n    // Query database for user\n    $query = \"SELECT * FROM users WHERE username='$username' AND password=md5('$password')\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // User found, retrieve their ID\n        $row = $result->fetch_assoc();\n        $_SESSION['user_id'] = $row['id'];\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check for form submission\nif (isset($_POST['submit'])) {\n    if (login_user()) {\n        // Redirect to dashboard or other protected page\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Username: <input type=\"text\" name=\"username\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n?>\n```\nThis code assumes you have a `users` table in your database with the following structure:\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255),\n  password VARCHAR(255)\n);\n```\nNote that this is a simple example and you should consider using more secure practices, such as:\n\n* Using prepared statements instead of concatenating SQL queries\n* Storing passwords securely (e.g. hashed with a salt)\n* Validating user input on the server-side\n* Implementing CSRF protection\n\nAlso, be sure to adjust the database connection settings to match your own environment.\n\n**Example Use Case:**\n\n1. Create a new PHP file (e.g. `login.php`) and paste this code into it.\n2. Update the database connection settings at the top of the code to match your own environment.\n3. Create a simple form with two input fields for username and password, and a submit button.\n4. When the user submits the form, the `login_user()` function will be called, which checks the credentials against the database.\n5. If the user is found in the database, their ID will be stored in the session and they will be redirected to the dashboard or other protected page.\n\nRemember to always keep your code up-to-date with security patches and best practices!", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$db_host = 'localhost';\n$db_username = 'username';\n$db_password = 'password';\n$db_name = 'database';\n\n// Create database connection\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user() {\n    global $conn;\n\n    // Get user input from form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Sanitize input\n    $username = mysqli_real_escape_string($conn, $username);\n    $password = mysqli_real_escape_string($conn, $password);\n\n    // Query database for user\n    $query = \"SELECT * FROM users WHERE username='$username' AND password=md5('$password')\";\n    $result = $conn->query($query);\n\n    if ($result->num_rows > 0) {\n        // User found, retrieve their ID\n        $row = $result->fetch_assoc();\n        $_SESSION['user_id'] = $row['id'];\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check for form submission\nif (isset($_POST['submit'])) {\n    if (login_user()) {\n        // Redirect to dashboard or other protected page\n        header('Location: dashboard.php');\n        exit();\n    } else {\n        echo \"Invalid username or password\";\n    }\n} else {\n    // Display login form\n    ?>\n    <form action=\"<?php $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        Username: <input type=\"text\" name=\"username\"><br><br>\n        Password: <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" name=\"submit\" value=\"Login\">\n    </form>\n    <?php\n}\n?>\n```", null]}
