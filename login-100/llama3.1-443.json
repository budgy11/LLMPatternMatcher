{"prompt": "Create a user login function using php", "llm_output": "Here's an example of how you can create a simple user login function in PHP:\n\n```php\n<?php\n    // Database connection settings\n    $dbHost = 'localhost';\n    $dbUsername = 'your_username';\n    $dbPassword = 'your_password';\n    $dbName = 'your_database';\n\n    // Create database connection\n    $conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n\n    function login_user() {\n        global $conn;\n        \n        // Get user input\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Validate user input\n        if (empty($username) || empty($password)) {\n            echo 'Please enter both username and password';\n            return false;\n        }\n\n        // Prepare SQL query\n        $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n        $stmt = $conn->prepare($query);\n\n        // Bind parameters\n        $stmt->bind_param('ss', $username, $password);\n\n        // Execute query\n        if ($stmt->execute()) {\n            $result = $stmt->get_result();\n            \n            if ($result->num_rows > 0) {\n                // Login successful, redirect to home page or dashboard\n                header('Location: /');\n                exit;\n                \n            } else {\n                echo 'Invalid username or password';\n                return false;\n            }\n        } else {\n            echo 'Error logging in: ' . $stmt->error;\n            return false;\n        }\n\n        // Close statement and connection\n        $stmt->close();\n        $conn->close();\n\n    }\n\n?>\n```\nTo use this function, you need to send a POST request with the username and password fields to this script. You can do it from a form:\n\n```html\n<form action=\"login.php\" method=\"post\">\n    Username: <input type=\"text\" name=\"username\"><br>\n    Password: <input type=\"password\" name=\"password\"><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n```\nRemember to replace the placeholders `your_username`, `your_password`, and `your_database` with your actual database credentials.\n\nThis code snippet does the following:\n\n1.  Connects to a MySQL database using the provided connection settings.\n2.  Defines a `login_user()` function that gets called when the form is submitted.\n3.  In this function, it retrieves the username and password from the POST request, validates them for emptiness, and if they are valid, prepares an SQL query with a parameterized query to prevent SQL injection attacks.\n4.  The function executes the SQL query and checks whether there's at least one result row. If there is, it redirects to the home page or dashboard; otherwise, it displays an error message.\n\n**Important Security Notes:**\n\n*   **Password Storage:** In this example, passwords are stored as plain text for simplicity. In real-world applications, use a secure method like hashing and salting to store passwords securely.\n*   **SQL Injection Protection:** The code uses prepared statements with parameter binding to protect against SQL injection attacks.\n*   **Error Handling:** It's essential to handle database errors properly to avoid disclosing sensitive information about your database schema or configuration.", "code_blocks": ["```php\n<?php\n    // Database connection settings\n    $dbHost = 'localhost';\n    $dbUsername = 'your_username';\n    $dbPassword = 'your_password';\n    $dbName = 'your_database';\n\n    // Create database connection\n    $conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n    if ($conn->connect_error) {\n        die(\"Connection failed: \" . $conn->connect_error);\n    }\n\n    function login_user() {\n        global $conn;\n        \n        // Get user input\n        $username = $_POST['username'];\n        $password = $_POST['password'];\n\n        // Validate user input\n        if (empty($username) || empty($password)) {\n            echo 'Please enter both username and password';\n            return false;\n        }\n\n        // Prepare SQL query\n        $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n        $stmt = $conn->prepare($query);\n\n        // Bind parameters\n        $stmt->bind_param('ss', $username, $password);\n\n        // Execute query\n        if ($stmt->execute()) {\n            $result = $stmt->get_result();\n            \n            if ($result->num_rows > 0) {\n                // Login successful, redirect to home page or dashboard\n                header('Location: /');\n                exit;\n                \n            } else {\n                echo 'Invalid username or password';\n                return false;\n            }\n        } else {\n            echo 'Error logging in: ' . $stmt->error;\n            return false;\n        }\n\n        // Close statement and connection\n        $stmt->close();\n        $conn->close();\n\n    }\n\n?>\n```", null]}
