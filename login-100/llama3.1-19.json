{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n  $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n  return $conn;\n}\n\n// Function to register a new user\nfunction register_user($username, $password, $email) {\n  $conn = db_connect();\n  $stmt = $conn->prepare(\"INSERT INTO users (username, password, email) VALUES (?, ?, ?)\");\n  $stmt->bind_param(\"sss\", $username, $password, $email);\n  if (!$stmt->execute()) {\n    echo \"Error registering user: \" . $stmt->error;\n  }\n  $stmt->close();\n}\n\n// Function to check if a username already exists\nfunction check_username_exists($username) {\n  $conn = db_connect();\n  $result = $conn->query(\"SELECT * FROM users WHERE username = '$username'\");\n  return ($result->num_rows > 0);\n}\n\n// Function to login an existing user\nfunction login_user($username, $password) {\n  $conn = db_connect();\n  $result = $conn->query(\"SELECT * FROM users WHERE username = '$username' AND password = SHA1('$password')\");\n  if ($result->num_rows == 1) {\n    // Login successful\n    session_start();\n    $_SESSION['username'] = $username;\n    return true;\n  } else {\n    // Login failed\n    return false;\n  }\n}\n\n?>\n```\n**example usage:**\n```php\n// Register a new user\n$username = \"newuser\";\n$password = \"password123\";\n$email = \"newuser@example.com\";\nregister_user($username, $password, $email);\n\n// Check if username already exists\n$existing_username = \"olduser\";\nif (check_username_exists($existing_username)) {\n  echo \"Username already exists!\";\n}\n\n// Login an existing user\n$username = \"olduser\";\n$password = \"password123\";\nif (login_user($username, $password)) {\n  echo \"Login successful! Welcome, $username.\";\n} else {\n  echo \"Login failed. Please try again.\";\n}\n```\nThis code defines three functions:\n\n* `db_connect`: connects to the database using mysqli\n* `register_user`: registers a new user with a given username, password, and email\n* `login_user`: logs in an existing user with a given username and password\n\nNote that this is just a simple example, and you should consider implementing additional security measures such as:\n\n* Salting and hashing passwords\n* Verifying email addresses before creating accounts\n* Limiting login attempts to prevent brute-force attacks\n* Using HTTPS encryption to protect sensitive data", "code_blocks": ["```php\n<?php\n\n// Configuration settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to the database\nfunction db_connect() {\n  $conn = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n  return $conn;\n}\n\n// Function to register a new user\nfunction register_user($username, $password, $email) {\n  $conn = db_connect();\n  $stmt = $conn->prepare(\"INSERT INTO users (username, password, email) VALUES (?, ?, ?)\");\n  $stmt->bind_param(\"sss\", $username, $password, $email);\n  if (!$stmt->execute()) {\n    echo \"Error registering user: \" . $stmt->error;\n  }\n  $stmt->close();\n}\n\n// Function to check if a username already exists\nfunction check_username_exists($username) {\n  $conn = db_connect();\n  $result = $conn->query(\"SELECT * FROM users WHERE username = '$username'\");\n  return ($result->num_rows > 0);\n}\n\n// Function to login an existing user\nfunction login_user($username, $password) {\n  $conn = db_connect();\n  $result = $conn->query(\"SELECT * FROM users WHERE username = '$username' AND password = SHA1('$password')\");\n  if ($result->num_rows == 1) {\n    // Login successful\n    session_start();\n    $_SESSION['username'] = $username;\n    return true;\n  } else {\n    // Login failed\n    return false;\n  }\n}\n\n?>\n```", "```php\n// Register a new user\n$username = \"newuser\";\n$password = \"password123\";\n$email = \"newuser@example.com\";\nregister_user($username, $password, $email);\n\n// Check if username already exists\n$existing_username = \"olduser\";\nif (check_username_exists($existing_username)) {\n  echo \"Username already exists!\";\n}\n\n// Login an existing user\n$username = \"olduser\";\n$password = \"password123\";\nif (login_user($username, $password)) {\n  echo \"Login successful! Welcome, $username.\";\n} else {\n  echo \"Login failed. Please try again.\";\n}\n```"]}
