{"prompt": "Create a user login function using php", "llm_output": "Here's an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n\n// Configuration variables\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    global $conn;\n\n    // Prepare query to select user data from the database\n    $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    $stmt = $conn->prepare($query);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get the result\n    $result = $stmt->get_result();\n\n    // Check if user exists and password is correct\n    if ($result->num_rows > 0) {\n        // Fetch user data\n        $user = $result->fetch_assoc();\n\n        // Start a session\n        session_start();\n\n        // Set session variables\n        $_SESSION['username'] = $user['username'];\n        $_SESSION['logged_in'] = true;\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check if login form has been submitted\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Call the login function\n    if (login($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n?>\n```\n**form.php**\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Login</title>\n</head>\n<body>\n    <h1>Login Form</h1>\n\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label for=\"username\">Username:</label>\n        <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n        <label for=\"password\">Password:</label>\n        <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n        <button type=\"submit\" name=\"login\">Login</button>\n    </form>\n\n    <?php if (isset($_GET['error'])) { ?>\n        <p style=\"color: red;\"><?php echo $_GET['error']; ?></p>\n    <?php } ?>\n</body>\n</html>\n```\n**How it works**\n\n1. The user fills out the login form and submits it.\n2. The form data is sent to the `login.php` script, which checks if the username and password are valid by querying the database using a prepared statement.\n3. If the credentials are correct, a session is started and the user's data is stored in session variables.\n4. If the credentials are incorrect or the user doesn't exist, an error message is displayed.\n\nNote: This is a simplified example and should not be used for production environments without proper security measures (e.g., password hashing).", "code_blocks": ["```php\n<?php\n\n// Configuration variables\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to the database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    global $conn;\n\n    // Prepare query to select user data from the database\n    $query = \"SELECT * FROM users WHERE username = ? AND password = ?\";\n    $stmt = $conn->prepare($query);\n\n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get the result\n    $result = $stmt->get_result();\n\n    // Check if user exists and password is correct\n    if ($result->num_rows > 0) {\n        // Fetch user data\n        $user = $result->fetch_assoc();\n\n        // Start a session\n        session_start();\n\n        // Set session variables\n        $_SESSION['username'] = $user['username'];\n        $_SESSION['logged_in'] = true;\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Check if login form has been submitted\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Call the login function\n    if (login($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n\n?>\n```", null]}
