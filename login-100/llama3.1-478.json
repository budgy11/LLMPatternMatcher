{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**login.php**\n```php\n<?php\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check login credentials\nfunction check_login($username, $password) {\n    global $conn;\n    \n    // Prepare query\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        return true; // Login successful\n    } else {\n        return false; // Login failed\n    }\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    global $conn;\n    \n    // Check if username and password are valid\n    if (check_login($username, $password)) {\n        // Get user data from database\n        $query = \"SELECT * FROM users WHERE username = '$username'\";\n        $result = $conn->query($query);\n        $user_data = $result->fetch_assoc();\n        \n        // Set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['password'] = $user_data['password'];\n        \n        return true; // Login successful\n    } else {\n        return false; // Login failed\n    }\n}\n\n// Function to handle login form submission\nfunction handle_login_form_submission() {\n    global $conn;\n    \n    // Get form data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        header('Location: index.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n\n// Check if login form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    handle_login_form_submission();\n} else {\n?>\n<form action=\"\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n<?php\n}\n?>\n```\n**index.php**\n```php\n<?php\nsession_start();\nif (!isset($_SESSION['username'])) {\n    header('Location: login.php');\n    exit();\n}\n\n// Display user data (e.g. username, email)\necho 'Welcome, ' . $_SESSION['username'] . '!';\n?>\n```\nIn this example:\n\n1. The `check_login` function checks the username and password against the database.\n2. The `login_user` function logs in the user by setting session variables.\n3. The `handle_login_form_submission` function handles form submission, logging in the user if credentials are valid.\n4. In `index.php`, we start a new session and check if the user is logged in (i.e., `$_SESSION['username']` exists). If not, we redirect to the login page.\n\nPlease note that this is a basic example for illustration purposes only. In a real-world application, you should use prepared statements and hash passwords to improve security.\n\nAlso, make sure to update the database credentials (`$db_host`, `$db_username`, `$db_password`, `$db_name`) with your actual values.", "code_blocks": ["```php\n<?php\n// Configuration\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\n// Connect to database\n$conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\n// Function to check login credentials\nfunction check_login($username, $password) {\n    global $conn;\n    \n    // Prepare query\n    $query = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    \n    // Execute query\n    $result = $conn->query($query);\n    \n    if ($result->num_rows > 0) {\n        return true; // Login successful\n    } else {\n        return false; // Login failed\n    }\n}\n\n// Function to login user\nfunction login_user($username, $password) {\n    global $conn;\n    \n    // Check if username and password are valid\n    if (check_login($username, $password)) {\n        // Get user data from database\n        $query = \"SELECT * FROM users WHERE username = '$username'\";\n        $result = $conn->query($query);\n        $user_data = $result->fetch_assoc();\n        \n        // Set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['password'] = $user_data['password'];\n        \n        return true; // Login successful\n    } else {\n        return false; // Login failed\n    }\n}\n\n// Function to handle login form submission\nfunction handle_login_form_submission() {\n    global $conn;\n    \n    // Get form data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        header('Location: index.php');\n        exit();\n    } else {\n        echo 'Invalid username or password';\n    }\n}\n\n// Check if login form has been submitted\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    handle_login_form_submission();\n} else {\n?>\n<form action=\"\" method=\"post\">\n    <label for=\"username\">Username:</label>\n    <input type=\"text\" id=\"username\" name=\"username\"><br><br>\n    <label for=\"password\">Password:</label>\n    <input type=\"password\" id=\"password\" name=\"password\"><br><br>\n    <input type=\"submit\" value=\"Login\">\n</form>\n<?php\n}\n?>\n```", "```php\n<?php\nsession_start();\nif (!isset($_SESSION['username'])) {\n    header('Location: login.php');\n    exit();\n}\n\n// Display user data (e.g. username, email)\necho 'Welcome, ' . $_SESSION['username'] . '!';\n?>\n```"]}
