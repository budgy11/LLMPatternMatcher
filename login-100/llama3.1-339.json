{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n\n**login.php**\n```php\n<?php\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user($username, $password) {\n    // Prepare query to select user data\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, md5($password));\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    if ($result->num_rows > 0) {\n        // User found, get data from row\n        $user_data = $result->fetch_assoc();\n        \n        // Set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['email'] = $user_data['email'];\n        $_SESSION['role'] = $user_data['role'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Handle form submission (login)\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get posted data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n?>\n```\n**index.php**\n```php\n<?php\nrequire_once 'login.php';\n\nif (!isset($_SESSION['username'])) {\n    // Show login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n} else {\n    // User is logged in, show dashboard\n    echo \"Welcome, \".$_SESSION['username'].\"!\";\n}\n?>\n```\n**Important notes:**\n\n1. Replace `'your_username'`, `'your_password'`, and `'your_database'` with your actual database credentials.\n2. Make sure to create a `users` table in your database with columns for `username`, `password` (hashed), `email`, and `role`.\n3. In the above example, passwords are stored as MD5 hashes for simplicity. However, MD5 is not recommended for password storage due to security concerns. Consider using more secure hashing algorithms like bcrypt or Argon2.\n4. This code assumes you have PHP's MySQLi extension enabled. If you're using PDO instead, replace `$conn` with a PDO instance and modify the queries accordingly.\n\nThis example provides a basic login functionality, but keep in mind that it is not recommended to store passwords in plain text (or MD5-hashed) for security reasons. You should consider implementing a more secure password storage solution, such as using salted hashes or an external authentication service like OAuth.", "code_blocks": ["```php\n<?php\n// Configuration variables\ndefine('DB_HOST', 'localhost');\ndefine('DB_USER', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Connect to the database\n$conn = new mysqli(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login_user($username, $password) {\n    // Prepare query to select user data\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    \n    // Bind parameters\n    $stmt->bind_param(\"ss\", $username, md5($password));\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Get result\n    $result = $stmt->get_result();\n    \n    if ($result->num_rows > 0) {\n        // User found, get data from row\n        $user_data = $result->fetch_assoc();\n        \n        // Set session variables\n        $_SESSION['username'] = $user_data['username'];\n        $_SESSION['email'] = $user_data['email'];\n        $_SESSION['role'] = $user_data['role'];\n        \n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Handle form submission (login)\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    // Get posted data\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n    \n    // Login user\n    if (login_user($username, $password)) {\n        echo \"Login successful!\";\n    } else {\n        echo \"Invalid username or password.\";\n    }\n}\n?>\n```", "```php\n<?php\nrequire_once 'login.php';\n\nif (!isset($_SESSION['username'])) {\n    // Show login form\n    ?>\n    <form action=\"<?php echo $_SERVER['PHP_SELF']; ?>\" method=\"post\">\n        <label>Username:</label>\n        <input type=\"text\" name=\"username\"><br><br>\n        <label>Password:</label>\n        <input type=\"password\" name=\"password\"><br><br>\n        <input type=\"submit\" value=\"Login\">\n    </form>\n    <?php\n} else {\n    // User is logged in, show dashboard\n    echo \"Welcome, \".$_SESSION['username'].\"!\";\n}\n?>\n```"]}
