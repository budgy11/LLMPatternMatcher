{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a user login function written in PHP. This code includes basic input validation and database interaction.\n\n**Note:** For this example, we assume you have a MySQL database set up with a `users` table containing columns for `id`, `username`, and `password`.\n\n```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Establish database connection\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\nfunction login($username, $password) {\n    // Prepare SQL query to retrieve user data\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username=:username');\n    \n    // Bind parameters\n    $stmt->bindParam(':username', $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Fetch result\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if ($user) {\n        // Check password using SHA-256 hashing (you should use a more secure method like bcrypt or Argon2)\n        if (sha1($password) === sha1($user['password'])) {\n            return true;\n        } else {\n            echo 'Incorrect password';\n        }\n    } else {\n        echo 'User not found';\n    }\n}\n\n// Example usage:\n$username = 'john_doe';\n$password = 'password123';\n\nif (login($username, $password)) {\n    echo 'Login successful!';\n} else {\n    echo 'Failed to login';\n}\n```\n\n**Important Notes:**\n\n*   **Password Security:** The example uses SHA-256 hashing for simplicity. However, this is not recommended as it is vulnerable to collisions and rainbow table attacks. Use a secure password hashing method like bcrypt or Argon2.\n*   **SQL Injection Protection:** This code uses prepared statements with parameter binding to prevent SQL injection attacks.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\n$host = 'localhost';\n$dbname = 'mydatabase';\n$username = 'root';\n$password = '';\n\n// Establish database connection\n$conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n\nfunction login($username, $password) {\n    // Prepare SQL query to retrieve user data\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username=:username');\n    \n    // Bind parameters\n    $stmt->bindParam(':username', $username);\n    \n    // Execute query\n    $stmt->execute();\n    \n    // Fetch result\n    $user = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if ($user) {\n        // Check password using SHA-256 hashing (you should use a more secure method like bcrypt or Argon2)\n        if (sha1($password) === sha1($user['password'])) {\n            return true;\n        } else {\n            echo 'Incorrect password';\n        }\n    } else {\n        echo 'User not found';\n    }\n}\n\n// Example usage:\n$username = 'john_doe';\n$password = 'password123';\n\nif (login($username, $password)) {\n    echo 'Login successful!';\n} else {\n    echo 'Failed to login';\n}\n```"]}
