{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function using PHP:\n\n**`login.php`**\n```php\n<?php\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    // Prepare SQL query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    if ($result->num_rows > 0) {\n        // Login successful, return user data\n        $row = $result->fetch_assoc();\n        return array(\n            'id' => $row['id'],\n            'username' => $row['username']\n        );\n    } else {\n        // Login failed, return error message\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$userData = login($username, $password);\n\nif ($userData) {\n    echo \"Login successful!\";\n} else {\n    echo \"Error: \" . $userData['error'];\n}\n?>\n```\nThis example uses the `mysqli` extension to connect to a MySQL database. The `login()` function takes in two parameters: `$username` and `$password`, which are used to query the `users` table.\n\nHere's how it works:\n\n1. We first establish a connection to the database using `mysqli`.\n2. If the connection fails, we die with an error message.\n3. We define the `login()` function, which takes in two parameters: `$username` and `$password`.\n4. Inside the function, we prepare an SQL query using `mysqli::prepare()`, binding the `$username` and `$password` variables to the query.\n5. We execute the query using `mysqli::execute()`.\n6. If the query returns any results, we fetch the first row using `mysqli_result::fetch_assoc()` and return an array containing the user's ID and username.\n7. If no results are returned, we return an error message indicating that the login failed.\n\nNote that this is a very basic example and you should consider implementing additional security measures such as:\n\n* Hashing passwords instead of storing them plaintext\n* Using prepared statements with parameterized queries to prevent SQL injection attacks\n* Validating user input to prevent cross-site scripting (XSS) attacks\n\n**Example use case:**\n\nTo test this code, simply create a `login.php` file and save it to your server. Then, open a web browser and navigate to the page. You should see an error message indicating that the login failed.\n\nTo successfully log in, you'll need to modify the example usage at the bottom of the script to submit a form with a username and password. For instance:\n```php\n<form action=\"login.php\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\">Login</button>\n</form>\n```\nThis will submit the form to `login.php`, which will then call the `login()` function with the submitted username and password. If the login is successful, it will display a success message; otherwise, it will display an error message.", "code_blocks": ["```php\n<?php\n// Configuration\n$dbHost = 'localhost';\n$dbUsername = 'your_username';\n$dbPassword = 'your_password';\n$dbName = 'your_database';\n\n// Connect to database\n$conn = new mysqli($dbHost, $dbUsername, $dbPassword, $dbName);\n\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n}\n\nfunction login($username, $password) {\n    // Prepare SQL query\n    $stmt = $conn->prepare(\"SELECT * FROM users WHERE username = ? AND password = ?\");\n    $stmt->bind_param(\"ss\", $username, $password);\n\n    // Execute query\n    $stmt->execute();\n\n    // Get result\n    $result = $stmt->get_result();\n\n    if ($result->num_rows > 0) {\n        // Login successful, return user data\n        $row = $result->fetch_assoc();\n        return array(\n            'id' => $row['id'],\n            'username' => $row['username']\n        );\n    } else {\n        // Login failed, return error message\n        return array('error' => 'Invalid username or password');\n    }\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$userData = login($username, $password);\n\nif ($userData) {\n    echo \"Login successful!\";\n} else {\n    echo \"Error: \" . $userData['error'];\n}\n?>\n```", "```php\n<form action=\"login.php\" method=\"post\">\n    <input type=\"text\" name=\"username\" placeholder=\"Username\">\n    <input type=\"password\" name=\"password\" placeholder=\"Password\">\n    <button type=\"submit\">Login</button>\n</form>\n```"]}
