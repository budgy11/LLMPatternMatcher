{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a basic user login function written in PHP. This function will check if the provided username and password match those stored in the database.\n\n### Configuration\n\nBefore we begin, you'll need to configure your MySQL database connection settings. Create a new file named `config.php` with the following code:\n\n```php\n// config.php\n\n$database = array(\n    'host' => 'your_host',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'db_name' => 'your_database'\n);\n```\n\nReplace `your_host`, `your_username`, `your_password`, and `your_database` with your actual MySQL database connection settings.\n\n### User Login Function\n\nCreate a new file named `login.php` with the following code:\n\n```php\n// login.php\n\nrequire_once 'config.php';\n\nfunction userLogin($username, $password) {\n    // Connect to the database\n    $conn = mysqli_connect($database['host'], $database['username'], $database['password']);\n\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_error($conn));\n    }\n\n    // Select the database\n    $db_name = $database['db_name'];\n    if (!mysqli_select_db($conn, $db_name)) {\n        die(\"Database selection failed: \" . mysqli_error($conn));\n    }\n\n    // Query to retrieve user data from the database\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = mysqli_query($conn, $query);\n\n    if (mysqli_num_rows($result) == 1) {\n        // Retrieve the stored password\n        $row = mysqli_fetch_assoc($result);\n        $stored_password = $row['password'];\n\n        // Check if the provided password matches the stored one\n        if (password_verify($password, $stored_password)) {\n            return array(true, \"Login successful!\");\n        } else {\n            return array(false, \"Incorrect password.\");\n        }\n    } else {\n        return array(false, \"Username not found.\");\n    }\n\n    // Close the database connection\n    mysqli_close($conn);\n}\n\n// Example usage:\n$username = 'your_username';\n$password = 'your_password';\n\n$result = userLogin($username, $password);\n\nif ($result[0]) {\n    echo $result[1];\n} else {\n    echo \"Error: \" . $result[1];\n}\n```\n\n### Notes\n\n*   This code uses the `mysqli` extension for database operations.\n*   Passwords are stored using the `password_hash` function and verified using the `password_verify` function, which is recommended practice to secure passwords in PHP.\n*   The example usage at the end demonstrates how to call the `userLogin` function with a username and password.\n\n### Commit Message\n\nIf you were to commit this code to version control, your commit message might look something like:\n\n`Added basic user login function using mysqli extension and password hashing`\n\nThis is just one way to implement a user login function in PHP. Depending on your specific requirements, you may need to modify or extend this example.", "code_blocks": ["```php\n// config.php\n\n$database = array(\n    'host' => 'your_host',\n    'username' => 'your_username',\n    'password' => 'your_password',\n    'db_name' => 'your_database'\n);\n```", "```php\n// login.php\n\nrequire_once 'config.php';\n\nfunction userLogin($username, $password) {\n    // Connect to the database\n    $conn = mysqli_connect($database['host'], $database['username'], $database['password']);\n\n    if (!$conn) {\n        die(\"Connection failed: \" . mysqli_error($conn));\n    }\n\n    // Select the database\n    $db_name = $database['db_name'];\n    if (!mysqli_select_db($conn, $db_name)) {\n        die(\"Database selection failed: \" . mysqli_error($conn));\n    }\n\n    // Query to retrieve user data from the database\n    $query = \"SELECT * FROM users WHERE username = '$username'\";\n    $result = mysqli_query($conn, $query);\n\n    if (mysqli_num_rows($result) == 1) {\n        // Retrieve the stored password\n        $row = mysqli_fetch_assoc($result);\n        $stored_password = $row['password'];\n\n        // Check if the provided password matches the stored one\n        if (password_verify($password, $stored_password)) {\n            return array(true, \"Login successful!\");\n        } else {\n            return array(false, \"Incorrect password.\");\n        }\n    } else {\n        return array(false, \"Username not found.\");\n    }\n\n    // Close the database connection\n    mysqli_close($conn);\n}\n\n// Example usage:\n$username = 'your_username';\n$password = 'your_password';\n\n$result = userLogin($username, $password);\n\nif ($result[0]) {\n    echo $result[1];\n} else {\n    echo \"Error: \" . $result[1];\n}\n```"]}
