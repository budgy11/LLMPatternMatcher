{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n\n**login.php**\n```php\n<?php\n  // Configuration settings\n  $db_host = 'your_database_host';\n  $db_username = 'your_database_username';\n  $db_password = 'your_database_password';\n  $db_name = 'your_database_name';\n\n  // Connect to the database\n  $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  function login_user() {\n    global $conn;\n\n    // Get user input from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Sanitize and hash password (use a library like password_hash for security)\n    $password = sha1($password);\n\n    // SQL query to retrieve user data\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n      while ($row = $result->fetch_assoc()) {\n        $_SESSION['logged_in'] = true;\n        $_SESSION['user_id'] = $row['id'];\n        header('Location: dashboard.php');\n        exit();\n      }\n    } else {\n      echo 'Invalid username or password';\n    }\n\n    // Close the database connection\n    $conn->close();\n  }\n\n  if (isset($_POST['login'])) {\n    login_user();\n  }\n?>\n```\n**Note:** In a real-world scenario, you should use a library like `password_hash` to securely hash passwords, and never store plaintext passwords. Also, consider using prepared statements for SQL queries.\n\nHere's an explanation of the code:\n\n1. We connect to the database using `mysqli`.\n2. We define a function `login_user()` that takes user input from a form and checks it against the stored password in the database.\n3. If the credentials are correct, we set session variables (`$_SESSION['logged_in']` and `$_SESSION['user_id']`) and redirect to a dashboard page.\n4. If the credentials are incorrect, we display an error message.\n\n**Example use case:**\n\n1. Create a form with username and password fields:\n```html\n<form action=\"login.php\" method=\"post\">\n  <input type=\"text\" name=\"username\" placeholder=\"Username\">\n  <input type=\"password\" name=\"password\" placeholder=\"Password\">\n  <button type=\"submit\" name=\"login\">Login</button>\n</form>\n```\n2. Submit the form, and if the credentials are correct, you'll be redirected to a dashboard page.\n\nRemember to adapt this code to your specific database schema and security requirements.", "code_blocks": ["```php\n<?php\n  // Configuration settings\n  $db_host = 'your_database_host';\n  $db_username = 'your_database_username';\n  $db_password = 'your_database_password';\n  $db_name = 'your_database_name';\n\n  // Connect to the database\n  $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  function login_user() {\n    global $conn;\n\n    // Get user input from the form\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    // Sanitize and hash password (use a library like password_hash for security)\n    $password = sha1($password);\n\n    // SQL query to retrieve user data\n    $sql = \"SELECT * FROM users WHERE username = '$username' AND password = '$password'\";\n    $result = $conn->query($sql);\n\n    if ($result->num_rows > 0) {\n      while ($row = $result->fetch_assoc()) {\n        $_SESSION['logged_in'] = true;\n        $_SESSION['user_id'] = $row['id'];\n        header('Location: dashboard.php');\n        exit();\n      }\n    } else {\n      echo 'Invalid username or password';\n    }\n\n    // Close the database connection\n    $conn->close();\n  }\n\n  if (isset($_POST['login'])) {\n    login_user();\n  }\n?>\n```", null]}
