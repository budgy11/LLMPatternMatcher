{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to database\nfunction dbConnect() {\n  $conn = new PDO(\"mysql:host=\" . DB_HOST . \";dbname=\" . DB_NAME, DB_USERNAME, DB_PASSWORD);\n  return $conn;\n}\n\n// Function to login user\nfunction loginUser($username, $password) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Query to select user by username and password\n  $query = \"SELECT * FROM users WHERE username = :username AND password = :password\";\n  $stmt = $conn->prepare($query);\n  $stmt->bindParam(':username', $username);\n  $stmt->bindParam(':password', $password);\n  $stmt->execute();\n\n  // Get user data from query\n  $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n  // Check if user exists and password is correct\n  if ($user) {\n    return true;\n  } else {\n    return false;\n  }\n\n  // Close database connection\n  $conn = null;\n}\n\n// Function to register new user\nfunction registerUser($username, $password, $email) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Query to insert new user into users table\n  $query = \"INSERT INTO users (username, password, email) VALUES (:username, :password, :email)\";\n  $stmt = $conn->prepare($query);\n  $stmt->bindParam(':username', $username);\n  $stmt->bindParam(':password', $password);\n  $stmt->bindParam(':email', $email);\n  $stmt->execute();\n\n  // Close database connection\n  $conn = null;\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (loginUser($username, $password)) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Invalid username or password.\";\n  }\n}\n\nif (isset($_POST['register'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n  $email = $_POST['email'];\n\n  registerUser($username, $password, $email);\n  echo \"User registered successfully!\";\n}\n?>\n```\nThis code includes three functions:\n\n* `dbConnect()`: Connects to the database using PDO.\n* `loginUser()`: Verifies a user's username and password against the database.\n* `registerUser()`: Inserts a new user into the database.\n\nThe example usage at the bottom shows how to use these functions in an HTML form. The form has two buttons: \"Login\" and \"Register\". When the \"Login\" button is clicked, it submits the form with the username and password fields filled in. If the `loginUser()` function returns true, a success message is displayed; otherwise, an error message is shown. When the \"Register\" button is clicked, it submits the form with the username, password, and email fields filled in. The `registerUser()` function is called to insert the new user into the database.\n\nNote that this is just a basic example and you should take steps to secure your code against SQL injection attacks. You may want to use prepared statements with parameterized queries, and also consider using a more secure password hashing algorithm (e.g., bcrypt) instead of plain text passwords.", "code_blocks": ["```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to database\nfunction dbConnect() {\n  $conn = new PDO(\"mysql:host=\" . DB_HOST . \";dbname=\" . DB_NAME, DB_USERNAME, DB_PASSWORD);\n  return $conn;\n}\n\n// Function to login user\nfunction loginUser($username, $password) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Query to select user by username and password\n  $query = \"SELECT * FROM users WHERE username = :username AND password = :password\";\n  $stmt = $conn->prepare($query);\n  $stmt->bindParam(':username', $username);\n  $stmt->bindParam(':password', $password);\n  $stmt->execute();\n\n  // Get user data from query\n  $user = $stmt->fetch(PDO::FETCH_ASSOC);\n\n  // Check if user exists and password is correct\n  if ($user) {\n    return true;\n  } else {\n    return false;\n  }\n\n  // Close database connection\n  $conn = null;\n}\n\n// Function to register new user\nfunction registerUser($username, $password, $email) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Query to insert new user into users table\n  $query = \"INSERT INTO users (username, password, email) VALUES (:username, :password, :email)\";\n  $stmt = $conn->prepare($query);\n  $stmt->bindParam(':username', $username);\n  $stmt->bindParam(':password', $password);\n  $stmt->bindParam(':email', $email);\n  $stmt->execute();\n\n  // Close database connection\n  $conn = null;\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n\n  if (loginUser($username, $password)) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Invalid username or password.\";\n  }\n}\n\nif (isset($_POST['register'])) {\n  $username = $_POST['username'];\n  $password = $_POST['password'];\n  $email = $_POST['email'];\n\n  registerUser($username, $password, $email);\n  echo \"User registered successfully!\";\n}\n?>\n```"]}
