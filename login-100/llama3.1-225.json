{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nThis example demonstrates a basic user login functionality using PHP. We'll create a function that checks if the provided username and password match a stored record.\n\n**Database Table Structure**\n---------------------------\n\nFor this example, we assume you have a MySQL database with a `users` table having the following structure:\n\n```sql\nCREATE TABLE users (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  username VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL\n);\n```\n\n**PHP Code**\n------------\n\nCreate a file named `login.php` and add the following code:\n```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to database\nfunction dbConnect() {\n  $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n  }\n  return $conn;\n}\n\n// Function to verify user credentials\nfunction login($username, $password) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Prepare SQL query\n  $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ?\");\n  mysqli_stmt_bind_param($stmt, \"s\", $username);\n\n  // Execute query and store result\n  mysqli_stmt_execute($stmt);\n  $result = mysqli_stmt_get_result($stmt);\n\n  // Fetch the stored record\n  $record = mysqli_fetch_assoc($result);\n\n  // Check if user exists and password matches\n  if ($record && password_verify($password, $record['password'])) {\n    return true; // Login successful\n  } else {\n    return false; // Incorrect username or password\n  }\n\n  // Close database connection\n  mysqli_close($conn);\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\nif (isset($_POST['login'])) {\n  $success = login($username, $password);\n\n  if ($success) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Incorrect username or password.\";\n  }\n}\n\n?>\n```\n\n**Example Usage**\n----------------\n\nCreate an HTML form to collect the user's credentials and use the `login.php` file as a script to handle the login functionality:\n\n```html\n<!-- login.html -->\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Login Form</title>\n</head>\n<body>\n\n  <form action=\"login.php\" method=\"post\">\n    <label>Username:</label>\n    <input type=\"text\" name=\"username\"><br><br>\n    <label>Password:</label>\n    <input type=\"password\" name=\"password\"><br><br>\n    <button type=\"submit\" name=\"login\">Login</button>\n  </form>\n\n</body>\n</html>\n```\n\n**Note:** This is a basic example and you should consider implementing additional security measures, such as:\n\n* Salting and hashing passwords\n* Using a secure password storage method (e.g., bcrypt)\n* Validating user input\n* Implementing rate limiting to prevent brute-force attacks\n\nAlso, keep in mind that storing passwords in plaintext is not recommended. You should use a secure method to store passwords, like bcrypt or Argon2.", "code_blocks": [null, "```php\n<?php\n\n// Database connection settings\ndefine('DB_HOST', 'localhost');\ndefine('DB_USERNAME', 'your_username');\ndefine('DB_PASSWORD', 'your_password');\ndefine('DB_NAME', 'your_database');\n\n// Function to connect to database\nfunction dbConnect() {\n  $conn = mysqli_connect(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);\n  if (!$conn) {\n    die(\"Connection failed: \" . mysqli_connect_error());\n  }\n  return $conn;\n}\n\n// Function to verify user credentials\nfunction login($username, $password) {\n  // Connect to database\n  $conn = dbConnect();\n\n  // Prepare SQL query\n  $stmt = mysqli_prepare($conn, \"SELECT * FROM users WHERE username = ?\");\n  mysqli_stmt_bind_param($stmt, \"s\", $username);\n\n  // Execute query and store result\n  mysqli_stmt_execute($stmt);\n  $result = mysqli_stmt_get_result($stmt);\n\n  // Fetch the stored record\n  $record = mysqli_fetch_assoc($result);\n\n  // Check if user exists and password matches\n  if ($record && password_verify($password, $record['password'])) {\n    return true; // Login successful\n  } else {\n    return false; // Incorrect username or password\n  }\n\n  // Close database connection\n  mysqli_close($conn);\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\nif (isset($_POST['login'])) {\n  $success = login($username, $password);\n\n  if ($success) {\n    echo \"Login successful!\";\n  } else {\n    echo \"Incorrect username or password.\";\n  }\n}\n\n?>\n```", null]}
