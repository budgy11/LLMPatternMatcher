{"prompt": "Create a user login function using php", "llm_output": "**User Login Function in PHP**\n=====================================\n\nBelow is an example of a basic user login function written in PHP. This code will handle user authentication by checking the username and password against a database.\n\n**Note:** Before running this code, you'll need to create a MySQL database with a `users` table containing columns for `username`, `password`, and `email`. You can use a tool like phpMyAdmin or SQL commands in your IDE to set up the database.\n\n**Database Setup (SQL):**\n```sql\nCREATE TABLE users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  username VARCHAR(255) NOT NULL,\n  password VARCHAR(255) NOT NULL,\n  email VARCHAR(255) NOT NULL\n);\n```\n**Login Function:**\n```php\n<?php\n\nfunction login($username, $password) {\n  // Connect to the database\n  $mysqli = new mysqli(\"localhost\", \"username\", \"password\", \"database\");\n\n  // Check connection\n  if ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n  }\n\n  // Prepare SQL query\n  $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username=?\");\n  $stmt->bind_param(\"s\", $username);\n\n  // Execute the query and get the result\n  if ($stmt->execute()) {\n    $result = $stmt->get_result();\n\n    // If user found, check password\n    if ($result->num_rows > 0) {\n      $row = $result->fetch_assoc();\n      if (password_verify($password, $row['password'])) {\n        return true; // Successful login\n      } else {\n        echo \"Invalid password\";\n        return false;\n      }\n    } else {\n      echo \"User not found\";\n      return false;\n    }\n  } else {\n    echo \"Error: \" . $mysqli->error;\n    return false;\n  }\n\n  // Close the statement and connection\n  $stmt->close();\n  $mysqli->close();\n\n  // If no user or password is invalid, return false\n  return false;\n}\n\n?>\n```\n**Example Usage:**\n```php\n<?php\n\n$username = \"exampleuser\";\n$password = \"password123\";\n\nif (login($username, $password)) {\n  echo \"Login successful!\";\n} else {\n  echo \"Login failed.\";\n}\n\n?>\n```\nThis code will attempt to log in the user with the specified username and password. If the login is successful, it will display a success message; otherwise, it will display an error message.\n\n**Security Note:** This example uses `password_verify()` to check the password, which is recommended for secure password storage and verification. However, storing passwords in plain text (as shown here) is not recommended and should be replaced with a hashed password in production environments.", "code_blocks": [null, "```php\n<?php\n\nfunction login($username, $password) {\n  // Connect to the database\n  $mysqli = new mysqli(\"localhost\", \"username\", \"password\", \"database\");\n\n  // Check connection\n  if ($mysqli->connect_error) {\n    die(\"Connection failed: \" . $mysqli->connect_error);\n  }\n\n  // Prepare SQL query\n  $stmt = $mysqli->prepare(\"SELECT * FROM users WHERE username=?\");\n  $stmt->bind_param(\"s\", $username);\n\n  // Execute the query and get the result\n  if ($stmt->execute()) {\n    $result = $stmt->get_result();\n\n    // If user found, check password\n    if ($result->num_rows > 0) {\n      $row = $result->fetch_assoc();\n      if (password_verify($password, $row['password'])) {\n        return true; // Successful login\n      } else {\n        echo \"Invalid password\";\n        return false;\n      }\n    } else {\n      echo \"User not found\";\n      return false;\n    }\n  } else {\n    echo \"Error: \" . $mysqli->error;\n    return false;\n  }\n\n  // Close the statement and connection\n  $stmt->close();\n  $mysqli->close();\n\n  // If no user or password is invalid, return false\n  return false;\n}\n\n?>\n```", "```php\n<?php\n\n$username = \"exampleuser\";\n$password = \"password123\";\n\nif (login($username, $password)) {\n  echo \"Login successful!\";\n} else {\n  echo \"Login failed.\";\n}\n\n?>\n```"]}
