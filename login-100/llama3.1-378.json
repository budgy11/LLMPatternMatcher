{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a basic user login function in PHP:\n```php\n<?php\n/**\n * User Login Function\n *\n * @package    MyPHPApp\n * @author     Your Name\n */\n\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\nfunction login_user($username, $password) {\n  // Connect to the database\n  $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  // SQL query to select user data\n  $sql = \"SELECT * FROM users WHERE username='$username' AND password=SHA2('$password', 256)\";\n\n  // Execute the query and store result in a variable\n  $result = $conn->query($sql);\n\n  if ($result->num_rows > 0) {\n    // User exists, retrieve user data\n    while ($row = $result->fetch_assoc()) {\n      return array('success' => true, 'user_id' => $row['id'], 'username' => $row['username']);\n    }\n  } else {\n    // User does not exist or password is incorrect\n    return array('success' => false, 'message' => 'Invalid username or password');\n  }\n\n  // Close the database connection\n  $conn->close();\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$user_data = login_user($username, $password);\n\nif ($user_data['success']) {\n  echo \"Logged in successfully!\";\n  echo \"User ID: \" . $user_data['user_id'] . \", Username: \" . $user_data['username'];\n} else {\n  echo $user_data['message'];\n}\n?>\n```\nThis code assumes you have a database table named `users` with columns `id`, `username`, and `password`. The password is stored using SHA2 hashing.\n\n**Security Notes**\n\n* **Do not store plain text passwords!**\n* Use prepared statements or parameterized queries to prevent SQL injection attacks.\n* Consider using a more secure password hashing algorithm like bcrypt or PBKDF2.\n* Always escape user input data before inserting it into the database.\n\nThis is just a basic example and you should adapt it to your specific needs.", "code_blocks": ["```php\n<?php\n/**\n * User Login Function\n *\n * @package    MyPHPApp\n * @author     Your Name\n */\n\n// Configuration settings\n$db_host = 'localhost';\n$db_username = 'your_username';\n$db_password = 'your_password';\n$db_name = 'your_database';\n\nfunction login_user($username, $password) {\n  // Connect to the database\n  $conn = new mysqli($db_host, $db_username, $db_password, $db_name);\n\n  if ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n  }\n\n  // SQL query to select user data\n  $sql = \"SELECT * FROM users WHERE username='$username' AND password=SHA2('$password', 256)\";\n\n  // Execute the query and store result in a variable\n  $result = $conn->query($sql);\n\n  if ($result->num_rows > 0) {\n    // User exists, retrieve user data\n    while ($row = $result->fetch_assoc()) {\n      return array('success' => true, 'user_id' => $row['id'], 'username' => $row['username']);\n    }\n  } else {\n    // User does not exist or password is incorrect\n    return array('success' => false, 'message' => 'Invalid username or password');\n  }\n\n  // Close the database connection\n  $conn->close();\n}\n\n// Example usage:\n$username = $_POST['username'];\n$password = $_POST['password'];\n\n$user_data = login_user($username, $password);\n\nif ($user_data['success']) {\n  echo \"Logged in successfully!\";\n  echo \"User ID: \" . $user_data['user_id'] . \", Username: \" . $user_data['username'];\n} else {\n  echo $user_data['message'];\n}\n?>\n```"]}
