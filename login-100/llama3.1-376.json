{"prompt": "Create a user login function using php", "llm_output": "Here is an example of a simple user login function in PHP:\n```php\n<?php\n\n// Define the database connection settings\n$host = 'localhost';\n$dbname = 'database_name';\n$username = 'username';\n$password = 'password';\n\n// Create a new PDO instance\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo 'Connection failed: ' . $e->getMessage();\n}\n\n// Define the user login function\nfunction loginUser($username, $password) {\n    global $conn;\n\n    // Prepare the SQL query to retrieve the user's credentials\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the result of the query\n    $user = $stmt->fetch();\n\n    // Check if the user exists and password is correct\n    if ($user && password_verify($password, $user['password'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Define a function to get the user's data after login\nfunction getUserData($username) {\n    global $conn;\n\n    // Prepare the SQL query to retrieve the user's data\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the result of the query\n    return $stmt->fetch();\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (loginUser($username, $password)) {\n        // User is logged in successfully\n        echo 'Welcome, ' . $username . '! You have been logged in.';\n        $userData = getUserData($username);\n        // Store the user's session data\n        $_SESSION['username'] = $username;\n        $_SESSION['user_id'] = $userData['id'];\n    } else {\n        // User login failed\n        echo 'Invalid username or password. Please try again.';\n    }\n}\n?>\n```\nThis code defines two functions:\n\n1. `loginUser($username, $password)`: checks if the user exists in the database and if their password is correct.\n2. `getUserData($username)`: retrieves the user's data from the database after a successful login.\n\nThe example usage shows how to call these functions in a login form submission handler.\n\n**Important Notes:**\n\n* This code uses PDO (PHP Data Objects) for database interactions, which provides a more secure way of interacting with databases.\n* The `password_verify()` function is used to verify the password, which ensures that passwords are stored securely using bcrypt.\n* This example assumes you have already created a database table named `users` with columns `id`, `username`, and `password`.\n* You should adapt this code to your specific use case and ensure that it follows best practices for security and coding standards.", "code_blocks": ["```php\n<?php\n\n// Define the database connection settings\n$host = 'localhost';\n$dbname = 'database_name';\n$username = 'username';\n$password = 'password';\n\n// Create a new PDO instance\ntry {\n    $conn = new PDO(\"mysql:host=$host;dbname=$dbname\", $username, $password);\n} catch (PDOException $e) {\n    echo 'Connection failed: ' . $e->getMessage();\n}\n\n// Define the user login function\nfunction loginUser($username, $password) {\n    global $conn;\n\n    // Prepare the SQL query to retrieve the user's credentials\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the result of the query\n    $user = $stmt->fetch();\n\n    // Check if the user exists and password is correct\n    if ($user && password_verify($password, $user['password'])) {\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Define a function to get the user's data after login\nfunction getUserData($username) {\n    global $conn;\n\n    // Prepare the SQL query to retrieve the user's data\n    $stmt = $conn->prepare('SELECT * FROM users WHERE username = :username');\n    $stmt->bindParam(':username', $username);\n    $stmt->execute();\n\n    // Fetch the result of the query\n    return $stmt->fetch();\n}\n\n// Example usage:\nif (isset($_POST['login'])) {\n    $username = $_POST['username'];\n    $password = $_POST['password'];\n\n    if (loginUser($username, $password)) {\n        // User is logged in successfully\n        echo 'Welcome, ' . $username . '! You have been logged in.';\n        $userData = getUserData($username);\n        // Store the user's session data\n        $_SESSION['username'] = $username;\n        $_SESSION['user_id'] = $userData['id'];\n    } else {\n        // User login failed\n        echo 'Invalid username or password. Please try again.';\n    }\n}\n?>\n```"]}
